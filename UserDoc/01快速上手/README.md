**用户快速上手**

SmartCMP主要有两种服务使用场景，其一是使用云资源蓝图服务；其二是使用工单服务。
+	使用云资源蓝图服务
经过蓝图建模之后，通过服务配置指定用户可以申请使用的资源、参数，形成基于蓝图的标准服务，发布后用户可以自助申请，自动化交付。
例如：您申请一项vSphere单节点虚拟机服务是使用云资源蓝图服务的典型场景。


+	使用工单服务
用户通过服务目录进行服务申请，服务团队接收服务工单，进行工单处理操作。
工单服务分为两种类型：
1.	申请非标准化资源的服务（例如：为了卸除某项服务部署，申请云资源蓝图服务）
2. 需要IT人工介入的服务（例如：申请重新设置密码的手工工单服务）


>「Note」更多云资源蓝图服务和手工工单服务使用指南请您参考:[云资源蓝图服务使用指南](https://cloudchef.github.io/doc/UserDoc/03云资源服务使用指南/)和[手工工单服务使用指南](https://cloudchef.github.io/doc/UserDoc/04手工工单服务使用指南/)


此章内容帮助用户快速上手服务申请操作和自助运维操作。

-   申请服务操作：在「服务目录」模块进行服务申请，您可以按需快速申请所需的服务，根据策略自动化部署

-   自助运维：在「我的部署」菜单栏中查看服务部署、云主机或云资源的详细信息，并进行自助运维操作

接下来的章节将介绍如何申请服务操作。

#登录系统


浏览器输入SmartCMP的IP，例如：http://cmp.smartcmp.online:1688/#/login

输入用户名和密码。

#申请服务


服务发布成功后，可在服务目录界面查看并申请已发布的服务。

1.  点击左侧导航栏的一级菜单「服务目录」，选择vSphere单节点服务或OpenStack单节点服务，点击进入服务申请界面

2.  在该页面查看该服务的详情信息，如：基本信息，服务拓扑，组件配置和流程控制等

3.  填写/修改相关信息，若无直接进入下一步

4.  点击申请，根据该业务组的流程控制（审批模板）获得批准后申请成功。如果业务组无审批流程，申请后直接进入服务部署

#自助运维


服务申请后，可在「我的部署」-「服务部署」查看该部署的进行状态。

-   若有审批流程，点击「服务请求」-「待审批」查看待审批的服务列表，点击服务部署申请编号，将进入蓝图部署的审批详情页面，可查看当前审批流程走向

-   若无审批流程，可点击服务部署名称进入部署详情页面，可查看该部署的基本信息，服务部署拓扑，以及操作历史

若服务已开始部署，可在操作历史中查看当前部署进程。

-   在「我的部署」-「服务部署」-「操作历史」标签页中，选中操作，可在下方查看当前部署进程

-   或点击平台右上角的操作历史，点击刚刚申请的操作，进入操作历史详情页面；或者点击「查看全部」，进入操作历史列表界面，点击刚刚申请的服务的「操作名称」，进入操作历史详情页面，查看操作进程

##查看服务部署详情和自助运维

服务成功部署后，可在「服务部署」页面查看该服务部署的详细信息以及云主机、应用组件的监控信息。一个服务部署包含一台或多台云主机。

1.  在左侧菜单选择「我的部署」-「服务部署」后，您将会看到服务部署列表，可在「高级搜索」中根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中
    ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作

2.  在服务部署列表中，您可以选中一个或者多个服务部署快速进行一些运维操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」「更改项目」「更改业务组」和「伸缩」（示例为vSphere服务部署，不同云平台的运维操作有差异）

> 「Note」
> 如果租户管理员在业务组设置或服务配置时，已经配置了虚拟机的操作许可，虚拟机在部署生成后，才能看到允许操作的操作列表。
>
> Default业务组默认全部的启用操作，由业务组管理员负责，并且服务部署无审批流程。

 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」和「监控」（对云主机和应用组件的监控）
-   「基本信息」：包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将"操作失败"更改为"运行"
-   「服务部署拓扑」：包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等

-   「操作历史」：显示该服务部署的操作历史记录

-   「监控」：显示对该部署中的云主机和组件应用的监控信息

## 查看云主机详情和自助运维

同时，可在「云主机」中查看云主机状态和详情来对其进行管理和操作，操作的启用和是否需要审批需要在业务组级别或者服务配置级别进行设置。

1.  在左侧菜单选择「我的部署」-「云主机」，您将会看到云主机的列表，在列表右上角「高级搜索」中可以根据业务组、状态（已启动、遗失、已停止）、所有者、项目、标签进行筛选。点击「展示列」，可以勾选或者不选某些列进行展示

2.  在云主机列表中，您可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」等

3.  您也可以单击某一个云主机进入其详情界面进行管理和操作，包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」标签页和顶部的运维操作列表

> 「Note」只有当该云主机安装监控和带应用时，部署成功后，在云主机详情页才能看见监控和应用标签页

 「基本信息」包括：

-   虚拟机及其相关主机的基本信息，如：名称、操作系统、已装软件、vCPU、内存、状态、SSH端口、自动化代理、监控方式、监控端口、租用/保留到期时间等

-   关系：服务器信息、资源池、数据存储、虚拟机存储策略以及网络标签等

-   物理主机信息

-   用户和组

-   组织信息：服务部署名称、服务名称、业务组、租户、项目等

-   运行状态

-   IP地址

-   键值标签

>「Note」更多主机相关信息，将根据不同云平台、不同服务配置项决定

 「操作历史」包括了该虚拟机进行过的操作历史记录

 「快照信息」显示当前的快照信息（快照名称、创建时间等），可对快照进行「刷新」「添加」「恢复」和「删除」操作

「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据）

> 「Note」只有在虚拟机模板中配置安装监控的虚拟机在部署生成后，才可以在监控中看到数据。

 「应用列表」显示当前虚机已安装的应用列表（若该虚机未安装应用，则不显示应用列表菜单）

 「运维操作列表」包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开

> 「Note」只有在业务组设置或服务配置时配置虚拟机的操作许可，虚拟机在部署生成后才能看到允许的操作列表。Default业务组默认业务组管理员启用全部操作，且无审批流程；业务组成员已启用常见操作，且无审批流程。

## 查看云资源详情

支持用户在「云资源」查看相关云资源状态和详情来对其进行管理和操作。

在左侧菜单选择「我的部署」-「云资源」，您将会看到列表左侧有以下几个类别：存储资源、容器服务、网络资源、PaaS资源、软件资源。

-   「存储资源」:云硬盘、对象存储

-   「容器服务」：部署、守护进程集、有状态副本集、容器、服务、路由、存储卷、配置字典、保密字典

-   「网络资源」：负载均衡器、负载均衡监听器、负载均衡成员池、负载均衡SNAT池、浮动IP、防火墙、安全组、域名系统DNS

-   「PaaS资源」：关系型数据库、Web应用

-   「软件资源」：软件



## 资源状态图

资源状态图能够显示云主机、容器的健康状态，根据性能指标的状态显示不同的颜色。若该云主机或容器未配置监控，默认显示灰色，资源使用率越高，图片背景色越深。

1.  支持用户将鼠标移至该云主机上，将显示该云主机名称

2.  支持用户点击服务部署名称后显示对应云主机详情：

-   基本信息：IP地址、操作系统、vCPU数量、内存、磁盘总空间

-   组织信息：业务组、项目、所有者

-   性能监控指标：内存使用率、CPU使用率、磁盘使用率

>「Note」若未安装监控，将不显示性能监控指标

还支持用户根据需求对展示内容进行筛选，如全部或已安装监控或未安装监控、按云平台筛选、业务组筛选、项目筛选、标签筛选等。

# 资源回收{#回收站}

回收站

SmartCMP的回收站用于保留卸除的资源，当存在误删除的情况时，可以进行还原。在「回收站」页面可进行删除和还原操作。

具体步骤：

1.  在左侧菜单选择「我的部署」-「回收站」对服务部署进行「删除」操作，资源从云平台永久释放回收。

2.  回收站列表页面的服务进行还原，点击「还原」则可以还原资源。

3.  支持设置资源在回收站中默认保留时间，到期之后将自动删除。
