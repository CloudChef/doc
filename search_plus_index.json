{"./":{"url":"./","title":"5.1.0","keywords":"","body":"SmartCMP 5.1发行说明 SmartCMP 5.1新功能说明 全新的UI设计 SmartCMP 5.1的界面进行了全新升级，UI更美观，信息布局更加合理，优化交互和用户体验。 全新的欢迎页界面：总览资源和服务状态 服务部署、云主机和云资源的列表界面：列表宽度可以调节，筛选项更丰富 服务部署、云主机和云资源的详情页面：关键配置信息和性能指标展示更丰富，布局更加合理 列表、标签页、搜索框的风格优化 新增自定义表单 提供全新的表单设计器，创建和配置自定义表单，为任意的服务定义参数和字段，满足任意服务的信息输入和展现需求； 支持自定义创建表单信息和布局。目前表单布局通过Json配置，采用流行的Json Schema Form，可以定义复杂的交互表单，支持和第三方系统交互获取数据。 支持将创建的表单与云资源部署服务或工单服务进行关联，用户按需申请服务，表单动态的渲染展现，用户输入所需要的信息； 审批员在审批过程中、服务团队在处理过程中，能够看到用户填写的表单内容。 全新流程引擎 SmartCMP 5.1提供全新的BPMN流程引擎，不仅可以添加串行、并行审批流程还可以通过可视化的流程设计器灵活地定制多样的流程； 服务流程：新的流程引擎可以灵活定义云资源自动化部署任务和人工任务，以及各个任务之间的流转方式。例如，可以创建一个服务部署流程，在云资源部署成功后，需要额外步骤进行人工操作。 审批子流程：可以灵活定义各种审批方式，包括多级审批、平行审批、条件审批等等。服务流程中可以选择任意审批子流程。 服务支持新增功能 云资源自动化部署服务： 支持一键部署Oracle RAC；支持一键部署Apache Flink。 工单服务： 支持事件处理流程，解决用户报告的IT资源相关的问题，例如：VM出现故障，数据库性能问题等。 自助服务新增功能 用户在申请服务的时候，可以看到预估的整体服务费用。 用户在申请服务的时候，能够对已填写参数进行保存，在下次申请的时候，可以重新加载，自动填充上次已经填写好的参数。 已部署虚拟机的自助管理：可设置定时循环任务，在指定的时间自动化执行操作，并能够查看定时任务，进行取消。 云平台管理新增功能 Azure：支持按需创建新的Azure安全组NSG，配置安全组规则；支持按需创建Azure资源组，以及资源组中的虚拟网络VNET，子网，以及诊断存储账户 Hyper-V：自动化部署Hyper-V虚拟机，支持通过IP池进行IP分配；支持为Hyper-V虚拟机创建和配置多个网卡；支持更多的Hyper-V虚拟机Day2运维操作，包括：调整配置，虚拟机或存储迁移，以及重置虚拟机的OS主机名。 青云：向青云公有云和私有云部署虚拟机，支持通过IP池进行IP地址分配。能够为青云公有云和私有云的虚拟机创建快照，从快照进行恢复，并对快照进行管理。支持远程终端连接青云私有云的虚拟机。 IP地址管理新增功能 支持IP地址池目录结构管理，可以创建多级目录，定义不同层级的网络环境和IP地址段，以树形结构进行展示。 支持IP池中设置主备DNS，网段路由信息，在给虚拟机分发IP地址的时候同时进行设置。 系统管理新增功能 菜单配置：支持接入第三方系统的页面，并可以配置菜单所处的位置，指定能够访问的角色。 解决的问题 以下内容是SmartCMP 5.1新版本中修复的部分缺陷 优化了SmartCMP英文版的菜单项，提示文字等。 在服务请求的记录中，能够看到服务任务的执行结果是成功还是失败。 优化了组件同步的逻辑，从而缩短了将更新组件同步到已发布服务的时间。 将申请资源扩容的工单申请关联到新版的流程引擎，允许业务组管理员在资源不够的时候提交工单申请。 解决了对vCenter进行迁移之后（例如从Windows迁移到Linux Appliance），SmartCMP中纳管的虚拟机状态不正常的问题。 解决了用户无法上传头像的问题。 解决了并行审批时，多人同时进行审批的并发问题。 解决了重新申请部署时，部分参数未重新加载的问题。 修复了业务组管理员对于费用统计和服务发布的权限问题。 修复了延长服务部署租期的时间显示问题。 修复了配置Hyper-V资源池时超时的问题。 已知问题 SmartCMP中青云资源池限制快照数最大为10，只能给每个青云的云主机最多创建10个快照。 SmartCMP中对青云虚拟机创建多个快照，如果删除一个快照，会同时删除这个快照创建之后的所有快照（与青云云平台的操作行为相同）。 申请OpenStack Windows虚拟机时，如果添加了额外数据盘并指定盘符，取消盘符后仍需要安装CMP代理。 发布OpenStack负载均衡服务时，负载均衡节点的数据加载较慢。 发布vSphere虚拟机与NSX网络虚拟化的共享服务时，有些NSX参数不能直接配置，需要申请时候进行修改。 如果设置了多条同步策略，导入相同的虚拟机，会出现重复的服务部署。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-07-26 14:19:11 "},"releaseNotes/5.2.0README.html":{"url":"releaseNotes/5.2.0README.html","title":"5.2.0","keywords":"","body":"SmartCMP 5.2.0发行说明 SmartCMP 5.2.0新功能说明 新增DevOps功能 提供流水线的构建，定义不同阶段与任务，完成新环境部署、软件升级等应用上线流程 支持流水线各个任务的之间的参数传递，例如将上一个任务新部署虚拟机的IP地址传给下一个任务进行调用 流水线的触发支持手工、定时、Jenkins触发、Webhook触发等 支持查看流水线的执行状态、输出信息 新增更加通用的第三方云平台对接方式 支持金山私有云和深信服超融合，对计算、存储、网络等资源进行全面管理 扩展资源池使用策略 支持在分配资源时按费用最低原则选择合适的资源池 扩展虚拟机模板管理 新增支持虚拟机模板的多种镜像来源（公共、市场、自定义） 扩展业务组的管理 支持在业务组上设置费用额度，费用到达额度之后不能申请新的资源 支持为业务组、项目设置图标 扩展命名规范 新增能设置统一的公网IP名称的命名规则。定义规则时，可选择平台定义的字段（如业务组、项目、服务名称等等），或输入自定义的字符。 支持动态数字序列，根据名称的变化自动从初始编号开始，例如Dev-App-01， Dev-App-02， Dev-Web-01 更加多样的通知方式 新增支持使用企业微信、钉钉进行消息、告警等通知 更加灵活的表单配置 支持自定义表单中指定的用户，能够设置访问资源的权限，以及能够作为审批员 支持使用自定义表单中的字段作为服务部署、云主机显示名等的命名规则 扩展服务目录管理 新增一个服务关联/发布到一个或多个业务组里，只有关联业务组的用户可以访问。 针对每个服务，支持指定可以申请该服务的角色 新增支持直接将已发布的蓝图发布为服务，用户申请时候选择和填写参数。 新增支持一个服务关联多个蓝图，用户在申请服务的时候可以按需选择。 UI优化 新增为每个租户设置界面不同的配色风格（亮色系，暗色系） Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-11-15 16:01:25 "},"foundationConcepts/01使用界面/":{"url":"foundationConcepts/01使用界面/","title":"使用界面","keywords":"","body":"使用界面 您可以通过多个界面登录SmartCMP，进行使用和管理。以下为您介绍SmartCMP不同界面的用途、访问方式和所需权限。 Admin管理控制界面 用途： 在租户中心创建、编辑、删除租户 许可证管理，添加、更新、删除许可证 添加、编辑、删除常见问题解答 自定义租户的展示界面（包括Logo图片和主题配色） 访问方式： 打开浏览器，输入访问地址：http://(SmartCMP-IP地址)/#/login?tenant=admin 登录 所需凭据： 您必须使用系统管理员sysadmin进行登录。 默认租户使用和管理界面 在SmartCMP安装完成之后，会为您创建一个默认的租户。 用途： 接入和管理云平台的资源 管理和配置组织架构 创建和发布服务 申请和使用云资源 访问方式： 打开浏览器，输入访问地址：http://(SmartCMP-IP地址) 登录 所需凭据： 您可以使用系统管理员，租户初始化创建的默认租户用户（admin，bgadmin，或user），或您创建的该租户下的其他用户进行登录。关联不同角色的用户有不同的管理配置和使用权限，详细说明请参考“角色”章节。 其它租户使用和管理界面 您可以通过Admin管理控制界面创建其他租户。租户提供了资源使用和管理配置的隔离，有关租户的详细说明请参考“租户”章节。 用途： 接入和管理云平台的资源 管理和配置组织架构 创建和发布服务 申请和使用云资源 访问方式： 打开浏览器，输入访问地址：http://(SmartCMP-IP地址) 登录。 所需凭据： 您可以使用该租户初始化创建的用户，或您创建的该租户下的其他用户进行登录。系统将自动判断用户所属的租户，进行登录。如果您想使用系统管理员sysadmin登录，请在访问地址中指明租户的名称：http://(SmartCMP-IP地址)/#/login?tenant=（租户ID） 例如： 当您在Admin配置管理界面创建租户DemoTenant，系统将为您默认创建Default业务组和三个用户： DemoTenant_admin，租户管理员 DemoTenant_bgadmin，Default业务组管理员 DemoTenant_user，Default业务组普通用户 若使用系统管理员登录，访问地址为：http://(SmartCMP-IP地址)/#/login?tenant=demotenant Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-07-31 15:41:28 "},"foundationConcepts/02组织架构/":{"url":"foundationConcepts/02组织架构/","title":"组织架构","keywords":"","body":"组织架构 组织架构可为每个租户配置独立的组织架构，包括业务组，项目，等等。 租户是SmartCMP中的架构单位，在一个SmartCMP的部署中，可以配置多个租户。租户提供了资源使用和管理配置的隔离边界。以下列出了每个租户中的专用配置： Logo和主题配色方案：可为每个租户定制不同的Logo和主题配色方案，在管理控制界面进行配置。 用户：每个租户有独立的用户管理。可以创建本地用户，租户A的用户只能访问租户A，不能访问其他租户。也可以为每个租户配置一个验证用户身份的目录服务进行身份验证，如Microsoft Active Directory（活动目录）或其他LDAP服务器。多个租户可以使用同一个目录服务，但是相同的用户只能属于某一个租户，不能在不同租户中配置相同ID的用户。 权限：每个租户有独立的权限配置。在租户A中配置的权限，仅限于在租户A的范围中，对其他租户不起作用。 业务流程：每个租户的管理员可以配置业务流程，例如审批流程，服务流程等等，应用在这个租户的范围之内。 云平台管理和资源池配置：每个租户的管理员或基础设施管理员可以为该租户接入和纳管所需的云平台入口，例如VMware vCenter，AWS/Azure/阿里公有云等等。可在不同租户中配置和管理不同的云平台入口，也可以共享相同的云平台入口，通过配置不同的资源池来接入不同的计算资源（例如vCenter中不同的集群）供不同租户中的用户进行使用。 服务目录：每个租户的架构师可以为该租户设计服务蓝图，由管理员根据不同的部门、环境等需求，发布为用户可以自助申请的服务目录。服务目录中的类别和服务项，在不同租户中保持独立。 租户 单租户和多租户示例 单租户 在单租户部署中，所有配置均在默认租户中出现。管理员可管理租户内的云资源和组织架构，配置租户内特定的服务目录。 多租户 在多租户环境中，每个租户拥有独立的配置，由该租户的管理员进行管理。系统管理员可以配置可以查看和管理多个租户中的配置。 业务组与项目 在每个租户内，可以创建不同的组织架构，包括业务组和项目。 业务组 业务组是租户内的逻辑组织结构，可为企业的部门、机构或者事业部创建对应的业务组。支持租户管理员创建多级业务组，关联到业务组的用户可以使用该业务组中的资源和服务。 可以为每个业务组配置独立的规则，流程和资源： 可为每个业务组关联一个或多个资源池。 可为每个业务组关联用户。一个用户可以属于多个业务组。 可为每个业务组设置不同的审批流程，操作许可，云资源使用租期，云资源命名规范等。 项目 在SmartCMP中，一个项目内的云资源对本项目中的所有成员可见，对其它项目的所有成员不可见。 一个项目从属于某个业务组，可以包含多个用户。一个用户可以加入多个项目。 角色 角色由一组可与用户关联的权限组成，用于确定该用户在SmartCMP中可以管理、配置和使用的功能。基于个人的职责，每个用户可关联一个或多个角色，所具备的权限将是这些角色的叠加。 在SmartCMP部署完成之后，默认提供以下角色： 租户角色概览 租户范围上的角色具有该特定租户的相应职责，不会影响系统中的其他租户。可根据需要创建自定义的角色，关联到所需的用户。 租户管理员 通常为负责租户整体架构的管理员。租户管理员会根据其租户内部组织需求来配置SmartCMP，负责租户内流程和策略配置、组织架构配置，用户和权限配置等等。 主要职责： 创建和管理用户、租户角色，为用户分配角色和权限，创建服务团队 创建和管理业务组，为各业务组指定业务组管理员。 创建和管理服务流程和审批流程。 进行租户的系统配置，包括目录服务信息、邮件系统信息、仪表盘和报表的访问权限，等等。 软件架构师 通常负责设计企业和组织中用户需要申请和使用的服务。服务包含多种样式，可以是单台虚拟机，也可以是包括网络负载均衡、Web应用和数据库在内的复杂应用。 主要职责： 创建和管理软件组件。 创建和修改蓝图，根据业务需要，进行建模，定义蓝图中包含的组件，包括基础架构组件、软件组件。 发布蓝图。 对需要下架的蓝图进行取消发布和删除。 基础设施管理员 基础设施管理员是在每个租户内接入一个或多个云平台，管理云平台中的虚拟机模板（即操作系统镜像），计算规格（即实例类型）。创建资源池，将各个云平台的基础架构资源进行指定，分配给业务组使用。同时可以根据软件架构师设计的蓝图，针对不同业务组或者环境要求进行配置，发布到服务目录。 主要职责： 接入云平台 资源池创建与分配，纳管云平台存量云资源 配置和管理云平台的虚拟机模板（即操作系统镜像），计算规格（即实例类型） 管理IP地址池 根据软件架构师发布的蓝图，配置和发布服务。 管理目录服务。 分析资源使用，回收到期资源。 业务组角色概览 业务组范围上的角色具有该特定业务组的相应职责，不会影响其他业务组。 业务组管理员 管理一个或多个业务组，通常是部门经理。 主要职责： 为业务组添加用户并关联角色。 配置云资源的使用租期，命名规范等策略。 配置业务组云资源操作许可和服务部署操作许可，指定用户可以进行的操作（例如开关机，添加磁盘，调整配置等等）以及需要的审批流程。 创建项目，指定项目管理员。 监控业务组中的资源使用情况。如果资源紧缺，可申请资源扩容。 业务组成员 业务组中的所有用户均可以请求发布到该业务组的服务（包括共享给所有业务组的服务）。用户可以从服务目录中请求服务并管理其拥有的资源。 主要职责： 自助申请所需的服务。 查看所拥有云资源的配置、监控信息等，进行自助运维操作（所能够进行的操作权限由业务组关联配置）。 自助设置对所拥有的云资源的告警。 项目角色概览 项目范围上的角色具有该特定项目的相应职责，不会影响其他项目。 项目管理员 管理一个或多个项目，通常是项目经理。 主要职责： 为项目添加用户并关联角色。 查看项目所拥有的云资源。 项目成员 项目成员同时也是该项目所属业务组的成员，因此可以申请发布到该业务组的服务，并能够查看资源，进行操作。同时，同一个项目的所有成员均可以查看该项目中的资源。 服务团队 服务团队是工单服务管理过程中处理工单任务的服务人员集合。租户管理员可以创建一个或多个服务团队，并向每个服务团队指派成员。 主要职责： 当用户通过服务目录申请需要人工介入的手工工单服务之后，根据预先配置的服务流程，相应的服务团队将接到工单进行处理。 服务团队中的人员接到工单之后，可以进行转派，也可以进行线下处理，在完成任务之后更新工单状态，将工单返回给申请用户进行确认和关闭。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-10-14 10:14:16 "},"foundationConcepts/03基础架构/":{"url":"foundationConcepts/03基础架构/","title":"基础架构","keywords":"","body":"基础架构 通过基础架构，您可以统一管理多云异构环境的所有资源，包括私有云、公有云、x86裸金属服务器、网络虚拟化（SDN）、存储虚拟化（SDS）等不同类型。接入云平台之后，您可以通过资源池将计算、存储、网络等资源进行分配，指定给不同业务组使用。同时，您可以在SmartCMP中创建虚拟机模板和计算规格（即实例类型），将各个云平台的虚拟机模板（或操作系统镜像）以及计算规格（即实例类型）进行封装和抽象，实现统一管理和自动化调用。 云平台 您可以在SmartCMP中输入各云平台的访问信息，进行连接和纳管。例如，虚拟化管理控制器地址、用户名和密码，或者公有云访问密钥。下表列出了各个云平台入口需要输入的信息： 云平台类型 接入方式 vSphere vCenter Server OpenStack OpenStack管理控制器 PowerVC PowerVC管理控制器 Hyper-V Microsoft System Center Virtual Machine Manager(SCVMM)服务器 物理服务器 SmartCMP的物理服务器管理节点信息 阿里云 阿里云云服务账号AccessKey AWS AWS云服务账号AccessKey 微软Azure Azure API访问凭证 腾讯云 腾讯云云服务账号AccessKey 青云 青云云服务账号AccessKey VMware NSX NSX管理控制器 Cisco ACI ACI管理控制器 F5 F5管理控制器 资源池 在资源池中，您可以指定云平台中的一组资源对象做为资源入口，用于部署云主机或其他云资源。该资源对象可以是虚拟化平台中的计算机群集，或是公有云的区域。 通过资源池将计算、存储、网络等资源进行分类和指定，分配到不同的业务组，提供给业务组中的成员进行消费和使用。例如，您可以将vSphere群集中的不同数据存储（Datastore）和虚拟交换机分配到不同资源池，使得不同部门部署的资源使用不同的存储和网络；或指定公有云特定的区域、可用区和专有网络（VPC），使得通过该资源池部署的公有云服务都统一使用该可用区的资源，并通过该VPC与其他服务进行网络隔离。 下表列出了各个云平台资源池的资源入口配置： 云平台类型 资源池资源入口 vSphere vSphere群集 OpenStack OpenStack可用区 PowerVC PowerVC可用区 Hyper-V Hyper-V群集 阿里云 阿里云区域，可用区以及VPC AWS AWS区域，可用区以及VPC 微软Azure Azure订阅ID，区域以及资源组 青云 青云云区域，可用区以及VPC 可为每个业务组关联一个或多个资源池（包括多个来自同一云平台的资源池）。同时，每个资源池可以分配给一个业务组使用，也可以分配给多个或全部业务组进行共享。 您可以在资源池中： 指定虚拟化平台的计算资源，或公有云的区域、可用区等信息； 设定可用使用的资源配额，包括CPU数量，内存数量，可以部署的云主机数量等等； 指定特定的存储资源、网络资源 手工导入云平台中的存量资源，或设置定时策略，自动同步云平台中的存量资源。 例如，您可以创建vSphere资源池： 指定纳管的vCenter中某个vSphere群集来提供计算资源； 设定该资源池的资源配额：CPU数量，内存数量，可以部署的云主机数量，允许的快照数量等等； 指定可使用的数据存储，并设定每个数据存储可使用的存储空间； 指定可使用的虚拟交换机，并设定IP地址分配方式。 虚拟机模板 您可以在SmartCMP中定义一个或多个的操作系统（例如CentOS）。操作系统是个逻辑概念，可为每个操作系统关联不同云平台中的模板或镜像（例如vCenter中的CentOS虚拟机模板，或阿里公有云中的CentOS镜像等）。操作系统和虚拟机模板将在服务配置的时候使用。 计算规格 计算规格定义了计算机CPU和内存的配置规范。在SmartCMP平台上，与操作系统类似，计算规格是个逻辑概念，您可以为每个计算规格关联不同云平台中的规格或实例类型（例如OpenStack\b平台中的规格，或AWS公有云中的实例类型等）。计算规格和云平台规格将在服务配置的时候使用。 通过操作系统和计算规格的抽象，您可以根据需要创建不同的操作系统，关联符合企业安全规范的虚拟机模板；同时创建不同的计算规格，指定特定的实例类型（例如已经购买的预留实例类型）。您可以在服务配置的时候指定操作系统和虚拟机模板，发布标准化的服务供用户进行申请。 IP地址管理 您可以创建和管理IP池，从而在部署云资源的时候自动化分配IP地址。IP池能够支持多云的异构环境，例如创建一个IP池，同时分配给vSphere和OpenStack平台使用。 通过IP地址管理，您可以查看IP地址的使用情况、历史日志，并且能够手动占用、释放IP地址。 密钥对 密钥对是用户访问不同云平台的云主机所需要的登录凭证。基础设施管理员和租户管理员可以对密钥对进行管理，包括创建、导入、下载和删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-07-26 09:38:20 "},"foundationConcepts/04服务目录/":{"url":"foundationConcepts/04服务目录/","title":"服务模型","keywords":"","body":"服务模型 在SmartCMP中，服务分为两种类型： 云资源蓝图服务：是指各云平台资源的申请和自动化部署。这些服务可以是基础设施服务（例如虚拟机，防火墙，DNS等），应用服务（例如数据库，或是包含网络负载均衡、Web组件和数据库在内的整体应用等）等。 手工工单服务：即非标准化、需要人工进行介入和支持的服务，包括服务请求，事件处理等等。例如，用户忘记密码需要进行重置，或是提交一个开通邮箱或账户的请求，或是遇到IT服务的问题需要解决（服务器、打印机或网络不能访问等等）。用户可通过服务目录发起工单请求服务，服务团队收到请求，进行工单处理。 下图描述了组件、蓝图、服务和部署之间的逻辑联系。组件包括软件组件和基础架构组件，软件架构师构建应用的拓扑结构图并为服务配置资源和参数，将服务卡片发布到服务目录。业务组成员在服务目录中根据实际需求进行自助申请，服务按照策略和规范自动组合，完成自动化部署交付。 组件 组件是构成蓝图的基本单元。SmartCMP中的组件包含两种类型： 基础设施组件：包括计算组件（例如，虚拟机、容器等），网络组件（例如，负载均衡、安全组、防火墙等），存储组件（例如，磁盘、对象存储等）。这些组件是SmartCMP内置的，在蓝图设计时候可以进行选择。 软件组件：用于应用软件的安装，包括中间件、关系型数据库、非关系型数据库等等。您可以将配置属性标准化，并使用脚本来指定在软件部署的过程中如何安装、配置、卸载或更新组件（您也可以自定义您所需要的其他操作）。软件架构师可以通过软件组件管理界面创建自定义的组件，更新已有组件，或者删除已经下架的组件。在蓝图设计时，软件组件可与基础设施组件一起使用。 蓝图 蓝图是包含计算、存储、网络、软件等资源在内的整体应用的完整规范，用于确定各种资源的的属性与依赖关系、工作流和执行策略。您可以通过可视化画布进行蓝图设计，将一个或多个组件进行组合，从而创建标准化的服务框架。蓝图发布之后，可用于创建服务。 蓝图可以是多种形式，例如，一个蓝图可以包含： 一个网络组件和一个虚拟机组件 一个防火墙组件，或是一个公有云关系型数据库组件 多层次的应用架构，例如：网络负载均衡，Web应用，和数据库 多个云平台组件的混合编排，例如Web应用部署在阿里云，数据库在vSphere私有云；或是Web应用在Kubernetes容器，数据库在OpenStack私有云。 流程 流程定义了自动化过程当中每一步的活动或任务执行的顺序与策略。 SmartCMP中的流程分为以下三种类型。每种类型都包含内置的流程，可以直接使用。这些内置的流程不能修改或删除。您也可以通过可视化的流程设计器，自定义需要的流程。 云资源蓝图服务：定义云资源自动化部署的流程，包括标准云服务部署内置流程。 手工工单服务：定义工单服务每一步的任务和流转方式，包括标准手工工单，标准事件管理等内置流程。 审批流程：用于控制用户申请服务、或针对云资源进行运维操作时，是否需要获得组织中某人或者某些人的批准才能进行。 请注意，在5.1之前版本或从老版本升级上来的SmartCMP中，提供了审批流程配置菜单，用于兼容旧版本中的审批流程。但该功能会在未来关闭，建议您使用流程配置来创建和管理审批流程。 表单 当用户请求服务目录中的服务时，您创建和发布的每个服务都会显示一个表单。在创建或配置每个服务时，您可以使用默认表单；如果您需要修改或添加额外的字段信息供用户在申请时候填写，您可以通过表单设计器，自定义表单。 服务分组 服务分组用于将不同的服务组织到相关类型中，使用户可以更方便地浏览所需的服务。例如：基础设施服务，数据库服务，工单服务等等。您可以根据需要创建新的分组，将需要发布的服务进行归类展示。 服务发布 租户管理员或基础设施管理员可将已经发布的蓝图和流程，根据不同的组织或部门需求进行配置，发布成为服务目录中的服务。一个服务可以发布到某个业务组，这样只有该业务组的成员才能进行申请；也可以发布到所有业务组，共享给所有成员进行申请。 在服务配置的过程中： 针对云资源部署服务，您可以指定部署的完整规范，例如虚拟机配置（所需的虚拟机模板，计算规格大小，磁盘配置等等），租期，操作许可，审批流程，服务流程，自定义表单等等； 针对工单服务，您可以指定每一步任务处理的服务团队，审批流程，服务流程，自定义表单等等。 服务的租期 租期包括租用时间，保留时间以及回收站回收时间： 当租用时间到期之后，服务部署中的所有计算资源将会被关机； 当保留时间到期之后，该服务部署将会被放置到回收站； 在回收站中，您可以还原，或进行手动删除（将从云平台中彻底释放这些资源）。如不进行任何操作，资源将在回收时间到期后，自动删除（将从云平台中彻底释放这些资源）。 服务的审批流程 审批流程可在业务组和服务配置处分别进行设置： 业务组配置的审批流程将对该业务组所有的服务生效； 如果某个服务单独配置了审批流程，该流程将生效，不再使用业务组配置的审批流程；如果服务没有配置，则使用业务组配置的审批流程。 服务部署 用户申请云资源服务之后，经过审批（如果配置了审批流程），SmartCMP将根据服务配置的策略与规范自动化进行部署，完成之后，交付给用户进行使用。 服务部署是指用户所申请服务包含的的所有云资源，例如一台虚拟机，一个数据库，或是一个多层次架构的应用环境。用户可在配置的服务租期内，使用该服务部署的所有资源，并能够根据管理员配置的操作许可，自助进行运维或变更操作。 服务部署和云资源的命名规则 您可以为每个业务组配置命名规则，来规范服务部署及其所包含云资源的名称，包括服务部署名称、云主机显示名称、以及Windows或Linux操作系统主机名（Hostname）。为了保证命名的唯一性，您可以在规则中加入命名后缀。 命名后缀可以是自定义长度的数字序列或者自定义长度的随机字符串。您可以为数字序列指定初始化序列号，例如，您可以创建一个长度为3、初始化序列号为1的命名后缀，如果指定业务组名加上此后缀为云主机名称的命名规则，则针对Dev业务组部署出来的云主机名称将依次为Dev001、Dev002等。 服务部署和云资源的操作许可 操作许可指授权给用户可以针对服务部署或是云资源执行的变更或运维操作。您可以禁用或启用某些操作，以及针对启用的操作设置审批流程。操作许可分为两种类型： 服务部署操作针是指针对服务部署级别的操作，包括延长服务部署的租期，更改服务部署所属的业务组、项目、所有者等等； 云资源操作许针对云主机或其他云资源，包括开关机，远程连接，添加磁盘，迁移等等。 可在业务组和服务配置处分别进行设置操作许可： 针对每个业务组配置的操作许可，将对该业务组所有的服务部署和云资源生效； 每个服务默认继承业务组的操作许可；您也可以单独为该服务配置操作许可，覆盖业务组上的设置。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-07-29 10:57:52 "},"foundationConcepts/05集成与发布/":{"url":"foundationConcepts/05集成与发布/","title":"集成与发布","keywords":"","body":"应用持续发布与部署 SmartCMP的集成与发布功能为企业提供持续集成的敏捷软件开发，以 IT 自动化以及持续集成（CI）、持续部署（CD）为基础，来优化产品开发(DEV)、测试(QA)、系统运维(OPS)等所有环节。软件行业日益清晰地认识到，为了持续、高效、可靠地交付软件产品和服务，开发部门和运维部门必须紧密合作，通过自动化的工具协作和沟通来完成软件的生命周期管理。核心的使用场景包括： 通过设置各阶段和任务来自动化应用软件的打包、环境部署、自动化测试等，配置出适合开发团队特点的持续发布、持续部署的自动化流水线。SmartCMP应用发布流水线能够与 Jenkins, Git, Nexus等持续集成工具无缝协作，实现整个应用部署,应用升级的自动化，完成从开发、测试到生产的持续交付与部署。 基于蓝图，实现每一个应用拓扑蓝图的自动化部署，并让平台根据策略自动化触发流水线、执行发布，测试、制品管理和自动化部署。支持部署任意应用到任意云，打通开发，测试，生产各个环境。 使用经过验证的架构、程序和部署工具，在生产环境自动上线或更新应用，确保跨云部署和变更的一致性，降低部署和运维风险。 部署自动化通过以应用程序为中心的角度集成整个工具链（自动化完成软件开发项目过程中包括持续构建、应用配置、制品归档、资源部署、监控运维等各个环节）、管理并可视化整个流水线的候选版本部署，快速获取正确的制品部署到相应的环境，从而构建了Dev和Ops之间的桥梁。 研发和测试人员通过SmartCMP服务目录自助申请云资源或服务，减少开发和运维之间协作的时间损耗，使团队整体更加高效地协同工作、迭代功能、发布产品。 CI/CD工具链 SmartCMP能够集成丰富的CI/CD工具链，为应用软件提供代码管理、持续构建、制品管理、部署、监控运维等等多种功能，并提供开放的API。所有功能基于全面的集成框架，囊括主流的软件工具：GitLab、GitHub、Jenkins、Maven、Ansible、Puppet、Chef、Nexus、Kafka等等 ，实现开发人员更高效的代码管理，运维人员更低风险的变更应用程序，提升应用程序质量降低部署功能的风险。 流水线 SmartCMP自动化流水线创建自动的、可重复利用、安全合规的应用交付流程，自定义配置构建、部署、测试端到端的流程治理和控制。 流水线实现了自动化发布、跨不同环境和阶段部署、全生命周期部署和发布管理。 无论是流水线的定义，还是流水线的执行，都提供了友好的交互界面，通过简单实践即可掌握流水线的配置，流水线运行过程中也可直观感受流水线的处理过程。 流水线由一系列阶段构成，每个阶段由软件在发布到生产之前必须完成的多个任务和环境组成，描述了为了获得预期结果需要执行的操作。 流水线在包含一个或多个并行或串行任务的连续阶段中构建。 整个流水线的定义方式如下： 新增流水线，绑定一个项目，并可添加全局参数，在后期任务中进行调用 自定义流水线的触发条件，触发器定义何时自动运行流水线，可以手动触发流水线任务，也可以设定策略由触发器自动触发流水线任务，实现灵活的流水线触发条件。触发器类型包括： Jenkins触发；Webhook集成（支持Git，Gitlab等代码仓库改变触发）；手工触发；定时触发 根据业务需要定义阶段和任务。 阶段 阶段是一组将并行或串行的任务组成，当前阶段任务满足规则并执行完成时，被提升到流水线中的下一个阶段。 SmartCMP流水线支持多种阶段和任务的自定义和组装，能够在阶段中添加任意数量的执行任务，通过它们已经可以设计出各种场景适用的开发、部署、运维流水线，同时基于SmartCMP的二次开发能力，可以扩展更多个性化的场景需求。 阶段分为多种类型，包括 代码编译阶段：构建二进制文件。 单元测试阶段：运行所有单元测试并分析代码质量，例如：开发，功能测试，用户验收测试（UAT），负载测试（LT），系统集成测试（SIT）。 打包阶段：构建最终的程序包，虚拟机镜像或Docker镜像。 可以在阶段任务的执行过程中定义输入输出的参数、执行时间，实现在指定条件下启用该阶段。 例如，可定义软件打包、部署测试环境等不同的阶段。每个阶段的任务类型包括：Jenkins Job 任务、部署新应用任务、云资源变更任务、脚本执行任务等等。 流水线执行之后，用户可以查看每个阶段和任务的执行状态，以及输出信息。 任务 每个阶段的任务即软件开发过程中的活动或作业，这些活动可以是获取制品、自动部署，运行单元测试，创建任务、运行自定义工作流或脚本等等。 SmartCMP流水线的任务定义包括： 自定义任务类型：Jenkins Job 任务、部署新应用任务、云资源变更任务、应用更新任务、脚本执行任务、其他定制任务； 流水线的发布者可以定义每个任务的输入、输出参数，在后续的任务中进行调用。 例如，通过一个蓝图部署任务，支持将任意新应用部署到windows、linux、k8s容器等各种丰富的运行环境，即可以自动化触发一个已发布的云资源服务，进行云资源的部署；而云资源任务则可以自动化进行云资源变更、运维操作，进行应用软件的升级、更新。 依托SmartCMP平台的标准运维模块以及底层能力，可以设计各种复杂的运维场景，满足大集群部署及海量运维等需求。 执行历史 通过执行历史可以查看执行状态、执行人、执行时间、每个阶段任务执行的详细信息。下图展现了一个复杂的流水线的执行过程： 制品管理 制品即构建过程的输出物，包括软件包，测试报告，应用配置文件等可在服务器上直接运行或可查看二进制形式的文件，通常称之为二进制软件制品。 制品管理是对软件研发过程中生成的产物的管理， 一般作为最终交付物完成发布和交付。所有的制品包，依赖组件均能够纳入制品库中统一管理。制品库应作为测试及生产部署的唯一可信制品来源。 不同开发语言 所产生的制品的获取、使用、共享方式不同，不同的制品仓库能够管理各自开发语言类型的二进制制品。 SmartCMP将领先的二进制制品管理仓库Nexus嵌入到代码流中。 开发组织通常会为每个项目建立制品管理系统，以实现更加简单、方便地获取制品，并实现在网络上传输大型制品的良好性能。 尽管开发人员使用不同类型的代码开发构建工具、测试人员使用不同类型的测试工具，但是软件制品管理系统指定了仓库类型和制品位置，并处理获取最新和正确制品的所有复杂性，降低创建自动化发布流水线的复杂性，快速地获得正确的制品提高部署效率。 入口:可以添加需要连接的软件制品仓库，为将要使用的软件组件提供部署时的制品来源，定义了软件包或任务调度的对接。流水线中执行归档或镜像推送操作的程序包，会统一存放一份在制品仓库中，支持在入口处接入Nexus、Jenkins等等管理平台。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-11-22 10:36:23 "},"AdminDoc/01快速上手/":{"url":"AdminDoc/01快速上手/","title":"快速上手","keywords":"","body":"管理员快速上手 SmartCMP主要有两种服务场景，其一是云资源蓝图服务场景；其二是工单服务场景。 云资源蓝图服务场景 云资源蓝图服务基于蓝图建模来定义标准的服务框架与组件，提供丰富的开箱即用的软件组件，以可视化的形式编排蓝图，实现自动化部署。 例如：配置一项vSphere单节点虚拟机服务是云资源蓝图服务的典型场景。 管理员经过蓝图建模之后，通过服务配置指定用户可以申请使用的资源、参数，形成基于蓝图的标准服务，发布后用户可以自助申请，自动化交付。 工单服务场景 工单服务分为两种类型： 申请非标准化资源的服务（例如：为了卸除某项服务部署，申请云资源蓝图服务，申请此项云资源服务的操作是工单服务的典型服务场景） 需要IT人工介入的服务（例如：申请重新设置密码的手工工单服务，申请此项手工工单服务也是工单服务的典型服务场景） 支持管理员定义标准工单服务、通过服务配置指定服务流程和服务团队再发布服务、通过服务目录进行服务申请，服务团队接收服务工单，进行工单处理操作。 「Note」配置更多云资源蓝图服务请您参考快速配置云资源蓝图服务，工单服务详细介绍，请您参考手工工单服务管理 管理员初次使用系统发布服务，需要做如下操作以配置系统： 配置云平台入口：如vSphere、OpenStack的管理员登录信息 添加IP池：定义可用的IP地址范围 定义资源池：配置可使用的物理资源，并设置配额，例如CPU、内存、存储、网络等 定义业务组，关联人员、资源池，配置审批流程、部署规范等 定义虚拟机模板：选择云平台和对应的模板或镜像 定义蓝图：定义服务的架构及自动化安装逻辑 配置并发布服务：关联蓝图到业务组及资源池，并配置部署参数，例如选择虚拟机模板等 申请服务：服务目录里申请服务，也可以在「组织架构」-「业务组」中启用业务组的向导式申请功能，直接开始向导式部署 自助运维：在「我的部署」菜单栏中查看服务部署、云主机或云资源的详细信息，并进行自助运维操作 接下来的章节将介绍如何建立自己第一个云资源，发布并申请服务。您可以根据快速配置云资源蓝图服务，配置多种类型的云资源蓝图服务。 登录系统 浏览器输入SmartCMP的IP，例如：http://cmp.smartcmp.online:1688/#/login 输入用户名和密码。 配置云平台入口 云平台入口定义了SmartCMP纳管的公有云、私有云、容器或物理机的云基础设施资源。不同云基础设施账号的形式及获取方式各有不同，管理员可以通过填写对应的基础设施的访问信息完成云平台基础设施的注册。 「Note」请使用租户管理员或基础设施管理员登录SmartCMP平台。公有云的访问信息获取方式，请您参考添加阿里云平台 添加vSphere云平台 进入「基础设施」-「云平台管理」，选择「vSphere」，点击「添加」 输入所需参数(请根据自己的真实环境输入相关参数，示例只给出参考) 参数名称 描述 示例 云名称 vSphere云平台名称 数据中心A--vCenter 用户名 vSphere用户名 administrator\\@vsphere.local 密码 vSphere密码 确认密码 地址 vSphere API URL 192.168.xx.xx 端口 API端口 443 数据中心 数据中心所在地 上海 关联VMware NSX云平台 NSX云平台（需先添加VMware平台） 选择对应的NSX云平台名称 点击「验证」，验证连接vSphere虚拟化平台；若输入参数错误，则提示配置错误；若配置正确，则提示验证连接成功 验证成功后，点击「提交」，vSphere虚拟化平台连接成功 添加OpenStack云平台 进入「基础设施」-「云平台管理」，选择「OpenStack」，点击「添加」 输入所需参数(请根据自己的真实环境输入相关参数) 参数名称 描述 示例 云名称 OpenStack云平台名称 OpenStack 认证URL OpenStack keystone认证URL http://xxx.xxx.xxx.x:500/v2 API版本 选择API版本：版本2 版本3 版本2 租户名称 租户名称 admin 用户名 用户名 admin 密码 密码 确认密码 区域 区域名称 RegionOne 数据中心 数据中心所在地 上海 点击「验证」，验证连接OpenStack虚拟化平台；若输入参数错误，则提示配置错误；若配置正确，则提示验证连接成功 验证连接成功后，点击「提交」, OpenStack云平台入口已保存 添加阿里云平台 您可以根据下面的步骤来添加一个阿里云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「阿里云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 阿里云云平台名称 Aliyun 访问密钥ID 阿里云访问密钥ID 获取方式请参考接入云平台 访问密钥 阿里云访问密钥 获取方式请参考接入云平台 点击「验证」，验证连接成功后，点击「提交」, 阿里云平台入口已保存 添加IP池 管理员可在SmartCMP中配置IP池，管理IP地址段，并可在IP池中查看IP地址使用情况，可占用以及释放被占用的IP地址。 用户可以根据需要对IP池进行添加，选择「基础设施」-「IP地址管理」，点击「添加」，选择IP池（还支持F5 BIG-IP、ACI IP池），进入创建IP池页面 在「概况」页面：输入名称、描述（选填）、CIDR、网关等 点击「IP范围」菜单，IP范围下点击「添加」：在创建IP范围页面输入名称，起始IP和结束IP，点击「提交」，IP范围创建成功。在列表下方可看到IP范围内的IP地址的状态（可用、已占用、预留、冷却中），可进行释放和占用操作。 点击「保存」，IP池创建成功 「Note」IP池的起始ID应大于等于CIDR，IP池的结束IP应大于起始IP 定义资源池 SmartCMP可通过定义资源池来将一个云平台中的资源映射到多个逻辑单元中，并配置到不同的组织架构，从而指定不同的组织和用户使用该云平台中的基础设施资源，包括计算、存储和网络资源等。一个云平台可以定义一个资源池，也可以定义多个资源池。 定义该资源池和业务组的关联关系,资源的共享情况分为三种： 资源池仅分配给唯一的业务组，操作方法：不选择「允许共享给多个业务组」，点击「业务组」选择该业务组 资源池分配给所有的业务组，并且新增的业务组自动关联该资源池，操作方法：选择「允许共享给多个业务组」，点击「业务组」选择全部业务组 资源池共享给多个业务组，操作方法：选择「允许共享给多个业务组」，单价「业务组」选择相应的多个业务组 创建资源池的步骤如下： 「Note」请使用租户管理员或基础设施管理员角色登录SmartCMP平台。 添加vSphere资源池 进入「基础设施」-「资源池管理」，点击「添加」，选择vSphere，填写下列信息： 「基本信息」页面： 基本信息：名称，资源标签（选填），优先级（数值越小，优先级越高）， 云平台资源信息：选择云平台入口（选择刚创建的vSphere云平台），资源入口，文件夹（选填） 「基本信息」页面加载成功后点击「计算资源」： 资源入口信息：仅查看 物理主机信息：仅查看 计算资源：vCPU数量（上限），内存（上限），虚机数量（上限），每台虚拟机允许快照数量（上限） 存储：选择存储及其预留空间 「网络资源」页面： 网络资源：选择某一网络，IP分配方式选择IP池，并在「IP地址管理」栏下选择新建的IP池 分布式虚拟交换机：默认 点击「保存」，保存后在资源池列表出现刚添加成功的vSphere资源池 添加OpenStack资源池 进入「基础设施」-「资源池管理」，点击「添加」，选择OpenStack，填写下列信息： 「基本信息」页面： 基本信息：名称，业务组、是否共享给多个业务组、资源标签（选填），优先级 云平台资源信息：选择云平台入口（选择刚创建的OpenStack云平台）、可用区（选择云平台后出现）、DNS域（选填） 「Note」域名由根域名、顶级域、二级、三级等多级域名构成，每级域名由字母、数字和连字符(-)构成(第一个字符不能是连字符)，不区分大小写，长度不超过63个字符。一个完整域名总长度不超过255个字符，必须以点结尾。配置资源池DNS域前请先配置租户中的DNS域。 业务组关联情况请参考 「基本信息」加载成功后点击「计算资源」： 资源信息：仅查看 计算资源：vCPU数量（上限），内存（上限），存储（上限），虚机数量（上限），浮动IP数量（上限） 「网络资源」 「网络资源」：选择网络及对应的子网、IP分配方式选择IP池，并在「IP池」栏下选择刚创建的IP池 「安全策略组」：选择一个或多个安全策略组 「防火墙」：选择一个或多个防火墙 「路由」：可选 点击「保存」，保存后在资源池列表出现刚添加成功的OpenStack资源池 添加阿里云资源池 您可以根据下面的步骤来添加阿里云资源池: 进入「基础设施」-「资源池管理」，点击「添加」，选择阿里云，填写下列信息： 「基本信息」页面： 基本信息：名称，是否共享给多个业务组、资源标签（选填），优先级（数值越小，优先级越高） 云平台资源信息：选择云平台入口（阿里云云平台）、区域以及可用区（选择区域后出现对应的可用区，可多选）、网络类型（经典网络/专有网络） 「基本信息」加载成功后点击「计算资源」：vCPU数量（上限），内存（上限），虚机数量（上限） 「付费方式」：选择预付费或后付费 预付费：预付费是指您需要先付费才能使用资源。根据计费周期不同，预付费可以分为： 按周付费：计费周期为一周 包年包月：计费周期为月或年 选择预付费后，请选择购买时长，小至一周，大至5年。可勾选自动续费，按周购买自动续费时长为一周，按月购买自动续费时长为1个月，按年购买自动续费时长为1年 后付费：后付费是指您先使用资源后付费的方式。使用这种方式，您可以按需取用资源，随时开启和释放资源，无需提前购买大量资源。 「网络资源」 「安全策略组」：选择一个或多个安全策略组 「虚拟交换机」：若选择专有网络，可选择虚拟交换机 点击「保存」，阿里云资源池创建成功 定义业务组 业务组是租户内的逻辑组织结构，支持创建多级业务组，用于在SmartCMP系统内对应企业的组织架构。业务组内关联该业务组所属的用户以及该业务组可使用的资源池。 业务组是一个逻辑概念，有需要把用户、服务目录和资源配额联系在一起的实体都可以用业务组来对应，比如子公司，不同层级的部门等。 系统默认创建Default业务组以及租户管理员、业务组管理员和业务组普通用户等。可通过以下步骤分配资源池： 「Note」如需修改该业务组的设置，或创建新的业务组，请参考 组织架构中的详细步骤。 点击左侧导航栏「组织架构」-「业务组」，点击业务组名称（Default）进入编辑页面 「概况」页面，保持默认值 「用户」页面，保持默认值。系统默认设置两个用户，分别为业务组管理员和业务组普通用户 「资源池」页面，点击「添加资源池」，选择上节创建的vSphere资源池和OpenStack资源池，点击「确定」 点击「保存」，业务组与资源池关联成功 为业务组申请资源和服务关联审批流程 为业务组成员配置云资源操作许可和服务部署操作许可 定义虚拟机模板 平台支持创建虚拟机模板，一个操作系统可对应多个虚拟机模板，一个虚拟机模板可在多个云平台中使用。虚拟机模板与vSphere平台中的模板或OpenStack平台中的镜像相关联。 在虚拟机模板中可配置SmartCMP两种代理的安装方式和账号信息，这两种代理是监控代理和自动化代理。SmartCMP平台中的一些自动化功能依赖自动化代理， 例如：蓝图带应用部署或添加磁盘，服务配置初始化并挂载磁盘、创建新用户，以及部分虚机运维操作（包括重置密码，执行脚本，应用启动停止，添加、扩展Linux逻辑卷或Windows磁盘等）。 创建虚拟机模板之后，可在服务配置中直接指定。SmartCMP可根据蓝图对象所在的云平台自动识别虚拟机模板。 这里定义两个虚拟机模板：CentOS 7和Windows 2012 R2： 「Note」请使用租户管理员或基础设施管理员角色登录SmartCMP平台。租户管理员可为某用户指定基础设施管理员角色。系统默认创建了3个虚拟机模板：Windows2012 R2、Redhat 7、CentOS7，还需添加相应的云平台信息才可使用。创建虚拟机模板详见下文 添加虚拟机模板 添加Linux虚拟机模板 选择「基础设施」-「虚拟机模板」，进入虚拟机模板列表界面。该页面默认有2个Linux虚拟机模板，分别为Redhat 7和CentOS 7 点击「CentOS 7」，进入虚拟机模板「基本信息」页面，该页面显示操作系统名称、描述、以及系统类型（Linux 或Windows） 点击「虚拟机模板」标签页，进入虚拟机模板列表界面 添加一个vSphere虚拟机模板 点击「添加」，输入模板名称：Linux CentOS 7 on vSphere，选择2.2.1节配置的vSphere云平台并做如下配置： 克隆模式：选择「完全克隆」或「链接克隆」 「Note」完全克隆是和原始虚拟机完全独立的一个拷贝，它不和原始虚拟机共享任何资源，可以脱离原始虚拟机独立使用；链接克隆需要和原始虚拟机共享同一虚拟磁盘文件，不能脱离原始虚拟机独立运行。但采用共享磁盘文件却大大缩短了创建克隆虚拟机的时间，同时还节省了宝贵的物理磁盘空间。 完全克隆 模板，选择一个Linux CentOS 7模板 链接克隆 虚拟机：选择一个Linux CentOS 7的模板；快照模式：默认\"指定一个快照\"，可选择\"申请时候选择\"或\"总是使用最新\"这两种快照模式, 选择\"申请时候选择\"将在服务申请的时候选择虚拟机快照； 快照：若快照模式选择\"指定一个快照\"，将选择一个快照；使用规范：选择「内建」（按需求选择无、内建或自定义规范，规范有助于防止在部署相同设置的虚机时而产生冲突）；模板中已启用SSH：勾选该选项，表示模板中已经启用和配置SSH，可以选择通过SSH的方式安装监控代理和自动化代理；默认SSH端口为22，如果模板中修改了SSH的端口，可输入模板中修改的SSH端口号；用户名、密码：若选择启用SSH，填写具有SSH权限的用户及其密码 监控方式： 无监控：若不安装监控代理，则平台的监控功能不可用 SSH安装监控代理：选择SSH安装的话，会通过SSH的方式访问虚拟机并安装监控代理；设置监控端口，默认是9100 预安装监控代理：预安装是指模板中已经安装了监控代理 云平台监控：从vCenter上直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等 SSH安装：选择SSH安装，会通过SSH的方式访问虚拟机并安装自动化代理 预安装：预安装是指模板中已经安装了自动化代理 管理员用户：输入模板中配置的管理员用户名 管理员密码：输入模板中配置的管理员密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加一个OpenStack虚拟机模板 点击「添加」，输入虚拟机模板名称Linux CentOS 7 on OpenStack，选择2.2.2节配置的OpenStack云平台并做如下配置： 启动源类型：选择从镜像启动、从快照启动、从云硬盘启动、从云硬盘快照启动 从镜像启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照 从快照启动：选择快照名称 从云硬盘启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照；若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘启动\"模式需要在服务配置时选择卷类型和配置卷大小 从云硬盘快照启动：选择云硬盘快照名称，若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘快照启动\"模式需要在服务配置时选择卷类型和配置卷大小 监控方式和自动化代理的方式：与vSphere的Linux模板相同，可配置SSH端口，此外SSH用户支持密钥方式（可在「基础设施」-「密钥对」中新建密钥或导入密钥） 管理员用户名和密码：输入需要设置的操作系统管理员用户名和密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新此时CentOS7的Linux操作系统，关联了2个虚拟机模板。在配置服务的时候，平台会自动选择与该服务相对应的虚拟机模板，无需重复设置。 添加Windows虚拟机模板 选择「基础设施」-「虚拟机模板」，进入虚拟机模板列表界面。该页面默认有1个Windows虚拟机模板，Windows 2012 R2 点击「Windows 2012 R2」，进入虚拟机模板「基本信息」页面 该页面显示操作系统名称、描述、以及系统类型 点击「虚拟机模板」标签页，进入虚拟机模板列表界面 添加一个vSphere虚拟机模板 点击「添加」，输入虚拟机模板名称：Windows 2012 R2 onvSphere，选择vSphere云平台并做如下配置： 克隆模式：选择「完全克隆」（按需求选择完全克隆或链接克隆） 「Note」完全克隆是和原始虚拟机完全独立的一个拷贝，它不和原始虚拟机共享任何资源，可以脱离原始虚拟机独立使用；链接克隆需要和原始虚拟机共享同一虚拟磁盘文件，不能脱离原始虚拟机独立运行。但采用共享磁盘文件却大大缩短了创建克隆虚拟机的时间，同时还节省了宝贵的物理磁盘空间。 完全克隆：模板：选择Windows 2012模板 链接克隆 虚拟机：选择一个Windows 2012的模板； 使用规范：选择「内建」（按需求选择无、内建或自定义规范，规范有助于防止在部署相同设置的虚机时而产生冲突）；模板中已启用WinRM：勾选该选项，表示模板中已经启用和配置WinRM，可以选择通过WinRM的方式安装监控代理和自动化代理 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 WinRM安装监控代理：会通过WinRM的方式访问虚拟机并安装监控代理；设置监控端口，默认是9182 预安装监控代理：指模板中已经安装了监控代理 云平台监控：从vCenter上直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等 WinRM安装：选择WinRM安装，会通过WinRM的方式访问虚拟机并安装自动化代理 预安装：是指模板中已经安装了自动化代理 Windows用户名：输入需要设置的Windows管理员用户名 Windows密码：输入需要设置的Windows管理员密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加一个OpenStack虚拟机模板 点击「添加」，输入虚拟机模板名称：Windows 2012 R2 on OpenStack，选择2.3.2节配置的OpenStack云平台并做如下配置： 启动源类型：选择从镜像启动、从快照启动、从云硬盘启动或从云硬盘快照启动 从镜像启动：选择镜像名称（选择Windows 2012的镜像）和快照模式（不使用快照、申请时候选择、总是使用最新） 从快照启动：选择快照名称（选择Windows 2012的快照） 从云硬盘启动：选择镜像名称（选择Windows 2012的镜像）和快照模式（不使用快照、申请时候选择、总是使用最新） 从云硬盘快照启动：选择云硬盘快照名称（选择Windows 2012的快照） 安装监控和自动化代理的方式与vSphere的Windows模板相同 Windows用户名: 输入需要设置的Windows管理员用户名 验证类型：密钥对、密码两种类型，选择密码 Windows密码：设置用户名对应的密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 定义蓝图 软件架构师可以通过蓝图管理界面以可视化的方式设计虚拟机或应用蓝图。蓝图是对应用的抽象，包含应用的拓扑，工作流以及策略三部分。 通过拖拽式可视化的蓝图建模，软件架构师可以非常高效对复杂多节点应用建模。 普通用户可以在其基础上，通过服务目录申请服务，完成一键申请，快速多次部署。 系统默认内置了蓝图，包括vSphere Linux，vSphere Windows等，可直接使用，进入下一节进行服务配置和发布。 「Note」如需创建新的蓝图，请参考服务建模中的详细步骤。 配置并发布服务 在SmartCMP云管理平台的服务配置界面里可以创建、配置和发布服务。这里将系统默认配置的vSphere Linux蓝图（1个Server+1个Network）与底层资源池相关联，配置模板等部署所需的必要参数。 「Note」请使用业务组管理员或基础设施管理员角色登录SmartCMP平台。 添加vSphere Linux单节点服务 在左边导航栏选择「服务建模」-「服务配置」，点击「添加」：输入服务名称及服务描述（选填），选择系统默认的vSphere Linux蓝图，选择系统默认的Default业务组或全部业务组，点击「提交」 服务配置项创建成功后进入编辑页面，「概况」页面全都选择默认值（可根据需求修改配置） 「Note」配置服务时，很多选项可以勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可修改参数，在服务审批阶段也可修改参数；如果勾选两项「允许修改」和「仅审批时可修改」，用户在服务请求中，不可修改参数，只在服务审批阶段允许修改参数； 进入「组件配置」页面，选择「Server」，进入server节点详细设置页面 「基本信息」：保留默认值（可根据需求修改云主机数量） 计算资源 OS主机名（Hostname）：继承业务组命名规则 （不勾选「允许改变」和「仅审批时可修改」） 云主机名称：继承业务组命名规则 （不勾选「允许改变」和「仅审批时可修改」） 注释：选填（不勾选「允许改变」和「仅审批时可修改」） 资源池配置 资源池选择策略：默认自动选择 模板设置 选择上节配置的vSphere虚拟机模板（Centos 7 --- Linux CentOS 7 on vSphere） 计算规格配置 计算规格模式：自定义 vCPU数量：2（不勾选「允许改变」和「仅审批时可修改」） 内存（GB）：8（不勾选「允许改变」和「仅审批时可修改」） 系统盘配置 置备模式：虚拟机模板中完全克隆时可选 文件夹：选择一个文件夹，虚机会部署在选中的vCenter文件夹里（资源池中配置） 虚拟机存储策略：默认数据存储默认值，（不勾选「允许改变」和「仅审批时可修改」） 存储：虚机会部署在选中的存储里。若不选，则部署在资源池定义的存储里 允许用户添加新磁盘时选择置备模式和存储：不勾选 「网络」 配置IP分配方式。点击配置网络下的「IP分配方式」，选择「IP池」（根据资源池中的「网络资源」配置提供可选范围，若资源池中仅配置IP池的分配方式，则服务配置默认且仅有IP池的分配方式） 「用户」：保持默认 「磁盘」：保持默认 「关系」：保持默认 「操作许可」：保持默认 点击「保存」，返回组件配置页面。选择「Network」进行编辑 进入Network「属性」页面，选择所需网络标签（根据资源池中「网络资源」配置的网络标签可选项进行选择），勾选「管理网络」，点击「保存」，返回组件配置页面 点击「保存并发布」，新的服务变成已发布状态 「Note」发布成功后，使用业务组成员角色登录SmartCMP平台，在「服务目录」中申请虚拟机。 添加OpenStack Linux 单节点服务 在左边导航栏选择「服务建模」-「服务配置」，点击「添加」：输入服务名称及服务描述（选填），选择系统默认的OpenStack Linux蓝图，选择系统默认的Default业务组或全部业务组，点击「提交」 服务配置项创建成功后进入编辑页面，「概况」页面全都选择默认值（可根据需求修改配置） 「Note」配置服务时，很多选项可以勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可以进行修改参数，在服务审批阶段也可以进行修改参数；如果勾选两项项「允许修改」和「仅审批时可修改」，则用户在请求服务时，不可以进行修改参数，只在服务审批阶段允许进行修改参数； 进入「组件配置」页面，选择「Server」，配置云服务器，进入节点详细设置页面 「概况」 保留默认值（可根据需求修改云主机数量） 「云资源属性」 基本信息 OS主机名（Hostname）：继承业务组命名规则 （不勾选「允许改变」和「仅审批时可修改」） 云主机名称：继承业务组命名规则 （不勾选「允许改变」和「仅审批时可修改」） 主机集合：不选择 资源池配置 资源池选择策略：默认自动选择 虚拟机模板 选择上节配置的虚拟机模板Linux CentOS 7 on OpenStack 「网络资源」 默认不配置DNS 「磁盘」：保持默认 「安全策略组」：保持默认 「关系」：保持默认 「操作许可」：保持默认 点击「保存」，返回组件配置页面。选择「Network」进行编辑 进入Network「属性」页面，选择所需网络和子网，不勾选「允许改变」和「仅审批时可修改」，IP分配方式根据所选网络和子网在资源池中的配置决定。不勾选「管理网络」，点击「保存」，返回组件配置页面 点击「保存并发布」，新的服务变成已发布状态 申请服务 服务发布成功后，可在服务目录界面查看并申请已发布的服务。 点击左侧导航栏的一级菜单「服务目录」，选择上节配置的vSphere单节点服务或OpenStack单节点服务，点击进入服务申请界面 在该页面查看该服务的详情信息，如：组织信息，部署信息，申请参数等 填写/修改相关信息，若无直接进入下一步 点击申请，根据该业务组的流程控制（审批模板）获得批准后申请成功。Default业务组无审批流程，申请后直接进入部署 自助运维 服务申请后，可在「我的部署」-「服务部署」查看该部署的进行状态。 若有审批流程，可在「服务请求」-「待审批」进入待审批页面，可查看当前审批流程走向 若无审批流程，可点击服务部署名称进入部署详情页面，可查看该部署的基本信息，服务部署拓扑，以及操作历史 可在操作历史中查看当前部署进程。在「我的部署」-「服务部署」-「操作历史」标签页中，选中操作，可在下方查看当前部署进程。 在基本信息页面：查看服务名称、蓝图、部署时间、到期时间、保留时间、业务组、项目、所有者等信息 在页面上方可进行服务部署的运维操作。 查看服务部署详情和自助运维 服务成功部署后，可在「服务部署」页面查看该服务部署的详细信息以及云主机、应用组件的监控信息。一个服务部署包含一台或多台云主机。 在左侧菜单选择「我的部署」-「服务部署」后，您将会看到服务部署列表，可在「高级搜索」中根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中 ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作 在服务部署列表中，您可以选中一个或者多个服务部署快速进行一些运维操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」「更改项目」「更改业务组」和「伸缩」（示例为vSphere服务部署，不同云平台的运维操作有差异） 「Note」只有在业务组设置或服务配置时配置虚拟机的操作许可，虚拟机在部署生成后才能看到允许的操作列表。Default 业务组默认全部操作启用给业务组管理员，且无审批流程。 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」和「监控」（对云主机和应用组件的监控） 「基本信息」：包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将\"操作失败\"更改为\"运行\" +「服务部署拓扑」：包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等 +「操作历史」：显示该服务部署的操作历史记录 +「监控」：显示对该部署中的云主机和组件应用的监控信息 查看云主机详情和自助运维 同时，可在「云主机」中查看云主机状态和详情来对其进行管理和操作，操作的启用和是否需要审批需要在业务组级别或者服务配置级别进行设置。 在左侧菜单选择「我的部署」-「云主机」，您将会看到云主机的列表，在列表右上角「高级搜索」中可以根据业务组、状态（已启动、遗失、已停止）、所有者、项目、标签进行筛选。点击「展示列」，可以勾选或者不选某些列进行展示 在云主机列表中，您可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」等 您也可以单击某一个云主机进入其详情界面进行管理和操作，包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」标签页和顶部的运维操作列表 「Note」只有当该云主机安装监控和带应用时，部署成功后，在云主机详情页才能看见监控和应用标签页 「基本信息」包括： 虚拟机及其相关主机的基本信息，如：名称、操作系统、已装软件、vCPU、内存、状态、SSH端口、自动化代理、监控方式、监控端口、租用/保留到期时间等 关系：服务器信息、资源池、数据存储、虚拟机存储策略以及网络标签等 物理主机信息 用户和组 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运行状态 IP地址 键值标签 「Note」更多主机相关信息，将根据不同云平台、不同服务配置项决定 「操作历史」包括了该虚拟机进行过的操作历史记录 「快照信息」显示当前的快照信息（快照名称、创建时间等），可对快照进行「刷新」「添加」「恢复」和「删除」操作 「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据） 「Note」只有在虚拟机模板中配置安装监控的虚拟机在部署生成后，才可以在监控中看到数据。 「应用列表」显示当前虚机已安装的应用列表（若该虚机未安装应用，则不显示应用列表菜单） 「运维操作列表」包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开 「Note」只有在业务组设置或服务配置时配置虚拟机的操作许可，虚拟机在部署生成后才能看到允许的操作列表。Default业务组默认业务组管理员启用全部操作，且无审批流程；业务组成员已启用常见操作，且无审批流程。 查看云资源详情 「云资源」中可查看相关云资源状态和详情来对其进行管理和操作。 在左侧菜单选择「我的部署」-「云资源」，您将会看到列表左侧有以下几个类别：存储、容器服务、网络资源、PaaS资源、软件资源。 「存储资源」:云硬盘、对象存储 「容器服务」：部署、守护进程集、有状态副本集、容器、服务、路由、存储卷、配置字典、保密字典 「网络资源」：负载均衡器、负载均衡监听器、负载均衡成员池、负载均衡SNAT池、浮动IP、防火墙、安全组、域名系统DNS 「PaaS资源」：关系型数据库、Web应用 「软件资源」：软件 工单服务 SmartCMP支持租户和系统管理员定义和发布标准的工单服务，支持用户自服务申请与跟踪。接下来的章节将介绍如何建立自己第一个工单，发布并申请服务。 定义服务团队 服务团队是工单服务管理过程中处理工单任务的服务人员集合，支持租户管理员自定义关联用户。 创建服务团队的简要步骤： 点击左侧导航栏「组织架构」-「服务团队」，点击服务团队名称，进入编辑页面 「基本信息」页面，键入名称和描述 「用户」页面，关联和取消关联用户 点击「保存」，服务团队创建成功，与用户关联成功 「Note」如需修改该服务团队的设置，或创建新的服务团队，请参考组织架构中的详细步骤。 配置与发布服务 配置服务的简要步骤： 在左边导航栏选择「服务建模」-「服务配置」，点击「添加」 填写服务名称、服务描述（选填）、选择业务组，服务类型为手工工单服务时，增选一项服务流程，点击「提交」，进入服务配置「概况」页面 在「基本信息」标签页填入下列信息：名称，描述，logo图像，服务组，顺序，流程配置页面指定处理人来处理工单任务，配置处理人的角色类型和具体的处理人 点击保存按钮，服务将被保存不发布，点击保存并发布按钮，服务将被发布到服务目录页面。 「Note」请使用租户管理员角色登录SmartCMP平台。如需修改配置与发布的设置，或创建新的配置与发布，请参考创建和配置服务工单中的详细步骤。如需修改服务流程的配置，或创建新的服务流程配置，请参考服务流程管理。 工单处理和跟踪 工单处理和跟踪的简要步骤： 在左侧导航栏点击「服务请求」-「待处理」，其中显示处理请求的基本信息：请求编号，请求类型，标题，业务组，项目，申请状态，申请时间，完成时间。 选择一个待处理的服务请求，点击「请求编号」链接，跳转到请求详情页面，查看该请求的基本信息，工单信息，处理记录，流程步骤，服务处理信息等。 处理方式定义为两种，直接处理和转派处理。选择直接处理方式，点击直接处理，填上处理结果描述，即可点击提交处理。 点击「服务请求」-「所有请求」，即可查看所有服务请求的详细信息。 「Note」具体的工单处理和跟踪，请您参考处理和跟踪工单 快速配置云资源蓝图服务 本节简述配置以下几个服务所需的步骤以及配置过程的链接，帮助您快速定位内容。 vSphere 单节点虚拟机服务 VMware NSX 服务 vSphere MySQL带监控服务 OpenStack 单节点服务 OpenStack Firewall 服务 OpenStack LoadBalancer withSecurityGroup服务 OpenStack FloatingIP服务 Kubernetes服务 阿里云服务 Azure服务 AWS服务 青云服务 Hyper-V服务 vSphere单节点虚拟机服务 i. 添加vSphere云平台：参照添加vSphere云平台 ii. 添加vSphere 资源池：参照 添加vSphere资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个vSphere虚拟机模板 v. 定义计算规格：参照添加vSphere计算规格 vi. 创建vSphere单节点蓝图：参照创建vSphere单节点蓝图 vii. 配置vSphere单节点服务：参照 配置vSphere单节点服务 viii. 服务申请：参照服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 VMwareNSX服务 i. 添加VMware NSX平台：参照 添加VMware NSX平台 ii. 添加vSphere云平台：参照 添加vSphere云平台 iii. 添加vSphere with NSX资源池：参照 添加vSphere with NSX资源池 iv. 配置虚拟机模板：参照添加一个vSphere虚拟机模板 v. 定义计算规格：参照添加vSphere计算规格 vi. 添加业务组与资源池的关联：参照业务组添加资源池 vii. 创建VMware NSX蓝图：参照 创建VMware NSX蓝图 viii. 配置VMware NSX服务：参照 配置VMware NSX服务 ix. 服务申请：参照 服务目录申请 x. 服务部署运维操作：参照服务部署运维操作 xi. 云主机相关运维操作：参照云主机运维操作 vSphereMySQL带监控服务 i. 添加vSphere云平台：参照 添加vSphere云平台 ii. 添加vSphere 资源池：参照 添加vSphere资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加vSphere虚拟机模板 v. 定义计算规格：参照添加vSphere计算规格 vi. 创建vSphere MySQL带监控蓝图：参照 创建vSphereMySQL带监控蓝图 vii. 配置vSphereMySQL带监控服务：参照配置vSphereMySQL带监控服务 viii. 服务申请：参照 服务目录申请 ix. 服务部署运维操作：参照 服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 OpenStack单节点服务 i. 添加OpenStack云平台：参照 添加OpenStack云平台 ii. 添加OpenStack 资源池：参照 添加OpenStack资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个OpenStack虚拟机模板 v. 定义计算规格：参照添加OpenStack计算规格 vi. 创建OpenStack单节点蓝图：参照创建OpenStack单节点蓝图 vii. 配置OpenStack单节点服务：参照配置OpenStack单节点服务 viii. 服务申请：参照 服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 OpenStackFirewall服务 i. 添加OpenStack云平台：参照 添加OpenStack云平台 ii. 添加OpenStack 资源池：参照 添加OpenStack资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 xi. 配置虚拟机模板：参照添加一个OpenStack虚拟机模板 xii. 定义计算规格：参照添加OpenStack计算规格 iv. 创建OpenStack Firewall蓝图：参照 创建OpenStackFirewall蓝图 v. 配置OpenStack Firewall服务：参照 配置OpenStackFirewall服务 vi. 服务申请：参照 服务目录申请 vii. 服务部署运维操作：参照服务部署运维操作 OpenStackLoadBalancerWithSecurityGroup服务 i. 添加OpenStack云平台：参照添加OpenStack云平台 ii. 添加OpenStack 资源池：参照 添加OpenStack资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个OpenStack虚拟机模板 xiii. 定义计算规格：参照添加OpenStack计算规格 v. 创建OpenStack LoadBalancer with SecuriryGruop蓝图：参照创建OpenStack LoadBalancer SecurityGroup蓝图 vi. 配置OpenStack LoadBalancer with SecuriryGruop服务：参照配置OpenStack LoadBalancer with SecuriryGruop服务 vii. 服务申请：参照 服务目录申请 viii. 服务部署运维操作：参照服务部署运维操作 ix. 云主机相关运维操作：参照云主机运维操作 OpenStackFloatingIP服务 i. 添加OpenStack云平台：参照添加OpenStack云平台 ii. 添加OpenStack 资源池：参照 添加OpenStack资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个OpenStack虚拟机模板 v. 定义计算规格：参照添加OpenStack计算规格 vi. 创建OpenStack FloatingIP蓝图：参照 创建OpenStackFloatingIP蓝图 vii. 配置OpenStack Firewall服务：参照 配置OpenStackFloatingIP服务 viii. 服务申请：参照 服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 OpenStackDNS服务 i. 添加OpenStack云平台：参照 添加OpenStack云平台 ii. 添加OpenStack 资源池：参照 添加OpenStack资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个OpenStack虚拟机模板 v. 定义计算规格：参照添加OpenStack计算规格 vi. 创建OpenStack DNS蓝图：参照创建OpenStackDNS蓝图 vii. 配置OpenStack DNS服务：参照 配置OpenStack DNS服务 viii. 服务申请：参照 服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 Kubernetes服务 i. 添加Kubernetes云平台：参照 添加Kubernetes云平台 ii. 添加Kubernetes 资源池：参照添加Kubernetes资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 创建Kubernetes蓝图：参照 创建Kubernetes蓝图 v. 配置Kubernetes服务：参照 配置Kubernetes服务 vi. 服务申请：参照 服务目录申请 vii. 服务部署运维操作：参照服务部署运维操作 阿里云服务 i. 添加阿里云云平台：参照添加阿里云云平台 ii. 添加阿里云资源池：参照添加阿里云资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板(阿里云虚拟机模板配置与Azure的配置步骤相似)：参照添加一个Azure虚拟机模板 v. 定义计算规格(阿里云计算规格以及云平台规格的定义与Azure相似)：参照添加Azure计算规格 vi. 创建阿里云蓝图：参照创建阿里云蓝图 vii. 配置阿里云服务：参照配置阿里云服务 viii. 服务申请：参照服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 Azure服务 i. 添加Azure云平台：参照添加Azure云平台 ii. 添加Azure资源池：参照添加Azure资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加一个Azure虚拟机模板 v. 定义计算规格：参照添加Azure计算规格 vi. 创建Azure蓝图：参照创建Azure蓝图 vii. 配置Azure服务：参照配置Azure服务 viii. 服务申请：参照服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 AWS服务 i. 添加AWS云平台：参照添加AWS云平台 ii. 添加AWS资源池：参照添加AWS资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 xiv. 配置虚拟机模板(AWS虚拟机模板配置与Azure的配置步骤相似)：参照添加一个Azure虚拟机模板 xv. 定义计算规格(AWS计算规格以及云平台规格的定义与Azure相似)：参照添加Azure计算规格 iv. 创建AWS蓝图：参照创建AWS蓝图 v. 配置AWS服务：参照配置AWS服务 vi. 服务申请：参照服务目录申请 vii. 服务部署运维操作：参照服务部署运维操作 viii. 云主机相关运维操作：参照云主机运维操作 青云服务 i. 添加青云云平台：参照添加青云云平台 ii. 添加青云资源池：参照添加青云资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 xvi. 配置虚拟机模板(青云虚拟机模板配置与Azure的配置步骤相似)：参照添加一个Azure虚拟机模板 xvii. 定义计算规格(青云计算规格以及云平台规格的定义与Azure相似)：参照添加Azure计算规格 iv. 创建青云蓝图：参照创建青云蓝图 v. 配置青云服务：参照配置青云服务 vi. 服务申请：参照服务目录申请 vii. 服务部署运维操作：参照服务部署运维操作 viii. 云主机相关运维操作：参照云主机运维操作 Hyper-V服务 i. 添加Hyper-V云平台：参照添加Hyper-V云平台 ii. 添加Hyper-V资源池：参照添加Hyper-V资源池 iii. 添加业务组与资源池的关联：参照业务组添加资源池 iv. 配置虚拟机模板：参照添加Hyper-V虚拟机模板 v. 定义计算规格(Hyper-V计算规格定义与vSphere相似)：参照添加vSphere计算规格 vi. 创建Hyper-V 蓝图：参照创建Hyper-V蓝图 vii. 配置Hyper-V服务：参照配置Hyper-V服务 viii. 服务申请：参照服务目录申请 ix. 服务部署运维操作：参照服务部署运维操作 x. 云主机相关运维操作：参照云主机运维操作 F5服务 平台支持F5的管理和建模，主要功能点包括： 新建和设计蓝图部署虚拟机和应用软件时，可以协同F5的Virtual Server，Pool以及SNAT Pool网络配置同时自动化部署下发服务。 支持为已经部署好的虚拟机添加F5负载均衡 服务部署完成之后，支持对Virtual Server和SNAT Pool的配置进行运维修改 您可以通过以下步骤部署F5服务： i. 添加F5 BIG-IP云平台：参照添加F5 BIG-IP云平台 ii. 添加IP池：参照添加IP池 iii. 创建F5 BIG-IP资源池：参照创建F5 BIG-IP资源池 iv. 创建F5 BIG-IP资源池与业务组的关联：参照业务组添加资源池 v. 创建F5蓝图：参照创建F5与OpenStack组合蓝图 vi. 配置F5服务：参照配置F5与OpenStack组合蓝图 vii. F5服务部署运维操作：参照 服务部署运维操作 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/02首页/":{"url":"AdminDoc/02首页/","title":"首页","keywords":"","body":"首页 您登录后，左侧是各级菜单，代表不同的功能模块列表。点击最上面的\\ 右侧是功能具体展示和操作区域。右侧区域右上角为快速查找信息功能区，可以直接点击按钮查看相应信息 ，从左至右分别是「欢迎页」「通知」「操作历史」「关于」「帮助中心」「账户信息」。 欢迎页 点击右上角的「欢迎」,可查看欢迎页详细信息，包括： 我的账户：头像、显示名、角色、所属业务组、上次登录时间 待处理任务：待审批的申请数量和待处理的工单数量，点击链接您可进入「待审批」、「待处理」 告警信息（警告、危险） 服务信息：已申请的云资源服务： 审批中的服务数量点击链接您可进入「我的部署」-「服务部署」查看处于审批中状态的部署； 已部署的服务数量点击链接您可进入「我的部署」-「服务部署」查看处于运行、操作进行中、关闭、已失败、已取消状态的部署； 即将到期的服务数量点击链接您可进入「我的部署」-「服务部署」查看两周内即将到期的部署； 即将卸除的服务数量，点击链接您可进入「我的部署」-「服务部署」查看两周内即将被卸除的部署； 工单服务： 审批中数量（即等待审批的手工工单服务请求的数量），点击链接您可进入「服务请求」-「我的请求」，请求类型为手工工单服务，申请状态为审批中的列表； 处理中的服务数量（即正在被处理的手工工单服务请求的数量），点击链接您可进入「服务请求」-「我的请求」，请求类型为手工工单服务，申请状态为处理中的列表； 申请服务：点击链接您可进入「服务目录」申请您需要的服务或资源 资源信息： 虚拟机数量（即已部署的云主机实例数量），点击链接您可进入「我的部署」-「云主机」页面，查看云主机详情； 应用数量（即云资源的软件资源数量），点击链接您可进入「我的部署」-「云资源」-「软件资源」-「软件」查看软件详细信息 其它资源数量（即除去云主机和应用的云资源总数），点击链接您可进入「我的部署」-「云资源」 CPU总数、内存总量、存储总量，点击链接您可进入「仪表盘」-「云资源使用情况」查看CPU、内存、存储的具体使用情况 我的请求：显示最新的五条请求信息，包括请求编号、请求时间，点击请求编号跳转到服务请求详情页面；点击更多进入「我的请求」服务请求列表 告警信息：针对云主机和应用的告警，以及触发危险和警告两个级别的告警总次数，警告次数占比总次数，危险次数占比总次数，根据百分比形成饼图），点击链接您可进入「监控告警」-「已触发警报」查看告警信息详情 导航栏 默认租户管理员拥有查看所有功能的权限。权限不同左侧导航栏显示功能也不同，默认租户管理员可查看所有的菜单，其余角色根据分配的权限不同，可查看区域也不同。 SmartCMP混合云应用管理平台支持多种角色的权限设置，并且为角色分配相关功能权限，系统已有基础角色包括： 最高权限：系统管理员 租户级别：租户管理员、软件架构师、基础设施管理员和租户成员 业务组级别：业务组管理员和业务组成员 项目级别：项目管理员和项目成员 支持自定义角色 下文为你介绍管理员导航栏详情： 服务目录 最终用户可以通过服务目录管理以自服务的方式请求该用户可以使用的服务 服务请求 我的请求：用户申请的服务请求 待审批：待审批的服务请求 已审批：已经审批完成的服务请求 待处理：待处理的服务请求 已处理：处理完成的服务请求 所有请求：默认租户管理员可以查看所有的服务请求 我的部署 服务部署：最终用户请求目录之后，系统会生成对应蓝图的云主机，即将蓝图对应的应用部署出来。最终用户可以在服务部署中进行各种操作 云主机：管理通过服务目录申请，向导式申请部署的云主机，或导入进来的云主机。管理员可监控云主机状态，相关物理主机的信息，进行运维的运维操作直接管理应用或云主机 云资源：展现用户申请成功的各种资源，如存储资源、容器服务、网络资源、PaaS资源、软件资源 资源状态图：显示云主机和容器的健康状态 回收站：所有的服务手工卸除或者到期后自动卸除后，将放置到回收站中进行保留。支持从回收站中进行还原，手工删除（删除后所有资源从云平台中真正删除），或为回收站设置保留时间，到期自动删除（支持设置回收站保留时间为0天，即服务不在回收站中保留） 仪表盘 管理员可在「仪表盘配置」中定义仪表盘，定义好的仪表盘将根据定义的权限分配给不同的角色查看。 系统默认云资源使用情况仪表盘可查看云资源分布、云主机总览、云主机操作系统分布、有告警的云主机、正在进行的操作、即将到期的服务部署、即将卸载的服务部署、CPU/内存/磁盘使用率最高的云主机-Top10、CPU/内存/磁盘使用率最低的云主机-Top10 支持自定义安装仪表盘，具体的操作步骤如下： http访问路径： http///smartcmp-dashboard， 进入管理页面管理配置仪表盘, 用户名sysadmin@mail.com， 密码P@ssw0rd 2.定义仪表盘中各个Widget字段，定义仪表盘中各个Widget的样式，具体配置步骤请参考 ：metabase 的官方文档， https://github.com/metabase/metabase/releases 监控告警 订阅云主机的报警，并定义对报警的响应行为： 告警策略：定义所选的对象类型（如云主机/应用/容器等）触发警报的条件 告警：定义所选告警策略应用到的范围以及触发的通知和操作 已触发警报：显示已触发警报列表 宿主机监控：查看当前系统中，每个平台中的主机运行状况 云平台告警：订阅、编辑、删除、刷新云平台的告警信息 报表与分析 提供各类资源使用的分析报表 数据中心概览：数据中心地理分布图、各数据中心资源使用总览、大屏展示 资源申请趋势 业务组资源占用：在一段时间内，分析不同的业务组对不同类型资源的使用情况 报表：计费报表、云平台总体情况报表以及其他自定义报表 基础设施 云平台管理：如云平台类型、名称、用户名及密码等 资源池管理：如vCPU、内存、虚拟机数量，网络等 虚拟机模板：对各种云平台的模板与镜像的统一管理 计算规格：以CPU、内存为衡量因素定义不同规格的计算资源 IP地址管理：每个虚拟机，每个网卡所能使用的IP范围 密钥对：生成并管理虚机的所需密钥对 命名后缀：对命名规则中数字或字符后缀的管理 物理机管理：对物理主机进行管理 组织架构 业务组：管理员以业务组的形式对基础设施进行配额，以便基础设施管理员对基础设施进行划分 项目：管理员可以将业务组中的用户划分到不同的项目，实现虚拟机在项目成员之间的共享 用户：对用户的增、删、改、查等操作，为用户关联角色，关联业务组 角色：不同用户组的权限定义，也可自定义角色。预定义的角色包括：租户管理员、租户成员、软件架构师、基础设施管理员、业务组管理员、业务组成员、项目管理员、项目成员 服务团队：管理员自定义不同类型的服务团队，支持服务团队关联用户 服务建模 脚本库：自定义想要手工执行的脚本软件组件 软件组件：组件是构成蓝图的基本单元，组件包含两种类型（基础设施组件和软件组件） 蓝图设计：软件架构师可以通过蓝图管理界面设计出基于TOSCA标准的应用蓝图。蓝图是对应用的抽象。蓝图包含应用的拓扑、工作流以及策略三部分 表单配置：在创建或配置服务（包括云资源部署服务和手工工单服务）时，可以选择系统内置的表单（包括IP池创建表单、项目创建表单），如果您需要修改或添加额外的字段信息供用户在申请时填写，可以通过表单设计器，自定义配置表单。 服务配置：IT管理员可以将蓝图发布成服务项，并且将服务项与组织架构、服务目录关联。此外通过服务项还可以实现与第三方系统集成（如审批流程、计费系统等） 流程配置：自定义每一步活动或任务执行的顺序与策略，通过流程设计器自定义流程模板，包括三种类型流程模板：云资源蓝图服务流程、手工工单服务流程、审批流程 服务分组：自定义服务类型容量管理 订阅资源池配额和IP池的报警，并定义对报警的响应行为 资源告警：资源告警监控资源配额的使用情况，达到预设的条件会触发警报 已触发警报：定义警报已触发之后，需要进行的操作计量计费 费用分析：显示各业务组的费用占比，以时间为跨度的费用趋势，可根据时间、云平台、资源类型、业务组、项目和所有者进行筛选查看。 优化建议：展现了云资源的使用情况，以及费用情况，找出使用率较低的资源，并可以直接进行配置调整。 计费规则：为各资源规格（CPU，内存）和资源类别定义计费标准 账单同步：定时同步公有云账单数据资源治理 事件配置：用来定义事件应用到的范围以及触发的通知和操作系统管理 系统配置：LADP、SMTP、SMS配置，资源申请配置 菜单配置：定义多种仪表盘或接入第三方系统，并设置不同的角色查看和自定义扩展菜单的位置。 报表配置：设置报表的启用/禁用状态以及所要赋予的角色 操作审计：记录当前租户下的所有的用户操作，可供查询 通知 点击右上角的「通知」可查看当前未读消息列表，通知包括消息（如等待审批）、告警通知等，可标记列表中的通知为已读，将不再提示。点击列表中的某条通知将进入该通知详情页面。 点击列表下的「查看所有通知」，可进入所有通知列表。「高级搜索」可通过通知创建的起止时间进行快速搜索定位，也可普通查询搜索。可单个或批量删除通知。 操作历史 点击右上角的「操作历史」该列表显示当前正在进行的操作，显示该操作的名称、服务名称，请求用户以及创建时间。可点击某条操作信息进入操作历史详情页面。也可点击「查看全部」进入操作历史列表界面。点击某条操作，列表下方显示该操作历史详情信息。可通过「高级搜索」根据业务组、请求用户、起止时间、状态进行快速筛选搜查，也可采用普通搜索。 帮助文档 点击欢迎页右上角的「帮助中心」问号图标，可直接进入在线文档，您可以在线查阅产品基础概念、管理员手册和用户手册，了解SmartCMP基础概念和功能。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/03基础设施管理/":{"url":"AdminDoc/03基础设施管理/","title":"基础设施","keywords":"","body":"基础设施 SmartCMP统一管理数据中心的计算、存储、网络、应用等各种资源，包括私有云、公有云、混合云、容器云、x86物理机等多种类型。支持快速导入并无缝管理存量虚拟机，使用云平台标准的API进行操作，管理云资源。 由于通过API和各个不同云基础设施进行交互，因此用户的云基础设施账号的形式不一样的（如公有云使用AccessKey， 私用云使用用户名与密码等）。 「Note」不同云基础设施账号的获取方式各有不同，具体请参考：添加云平台。 租户管理员可以通过添加对应的基础设施的访问信息完成基础设施的注册。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/03基础设施管理/云平台管理.html":{"url":"AdminDoc/03基础设施管理/云平台管理.html","title":"云平台管理","keywords":"","body":"云平台管理 系统管理员和租户管理员在「基础设施」-「云平台管理」页面内可以添加vSphere、VMware NSX、OpenStack、PowerVC、Hyper-V、CloudView、EMC SCP、NFS、物理服务器、Kubernetes、Docker、NFS、阿里云、阿里专有云、腾讯云、青云、AWS、Azure等不同厂商的云平台以及F5负载均衡器和ACI网络。云平台创建完成后还可进行编辑和删除。 添加云平台 当接入云平台时，为了保障云主机的安全性，公有云（包括阿里云、腾讯云、AWS）在API调用时均需要验证访问者的身份，以确保访问者具有相关权限。公有云的验证方式通过Access Key来实现。Access Key由云平台颁发给云主机的所有者,它由Access Key ID和Access Key Secret构成对应SmartCMP接入公有云云平台的访问密钥ID和访问密钥。 添加vSphere云平台 您可以根据下面的步骤来添加一个vSphere云平台: 在左边导航选择「基础设施」-「云平台管理」，在左边选择「vSphere」类型 点击「添加」按钮 ，填入下列信息： 参数名称 描述 示例 云名称 vSphere云平台名称 数据中心A--vCenter 用户名 vSphere用户名 administrator\\@vsphere.local 密码 vSphere密码 确认vSphere密码 地址 vCenter的IP地址 192.168.x.x 端口 API端口 443 数据中心 数据中心所在地 上海 关联VMware NSX云平台 NSX云平台（前提需要先添加VMware平台） 选择对应的NSX云平台名称 点击「验证」，验证连接成功后，点击「提交」, vSphere云平台入口已保存 添加VMware NSX平台 您可以根据下面的步骤来添加一个VMware NSX平台: 在左边导航选择「基础设施」-「云平台管理」，在左边选择「VMware NSX」类型 点击「添加」按钮 ，填入下列信息： 参数名称 描述 示例 名称 VMware NSX名称 NSX 地址 VMware NSX地址 192.168.xx.xxx 用户名 用户名称 admin 密码 密码 确认用户密码 点击「验证」，验证连接成功后，点击「提交」, VMware NSX平台入口已保存 「Note」 VMware NSX的使用必须在添加了vSphere云平台的基础上，添加成功vSphere云平台和VMware NSX平台后，需要在vSphere云平台中将NSX相关联。 添加OpenStack云平台 您可以根据下面的步骤来添加一个OpenStack云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「OpenStack」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 OpenStack云平台名称 OpenStack 认证URL OpenStack keystone认证URL http://xxx.xxx.xxx.x:500/v2.00 API版本 选择API版本：版本2 版本3 版本2 租户名称 租户名称 admin 用户名 用户名 admin 密码 密码 确认用户密码 区域 区域名称 RegionOne 数据中心 数据中心所在地 上海 点击「验证」，验证连接成功后，点击「提交」,OpenStack云平台入口已保存。 添加PowerVC云平台 您可以根据下面的步骤来添加一个PowerVC云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「PowerVC」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 PowerVC云平台名称 Power 认证URL PowerVC认证URL http://xxx.xxx.xxx.x:500/v2 忽略SSL证书检查 Disable_ssl_verification 可选项,认证URL（HTTPS时可选） 项目名称 Project name admin 项目域 Project domain name Default 用户名 User name admin 密码 Password 确认密码 用户域 User domain default 区域 Region RegionOne 数据中心 数据中心所在地 上海 点击「验证」，验证连接成功后，点击「提交」, PowerVC云平台入口已保存。 添加Hyper-V云平台 您可以根据下面的步骤来添加一个Hyper-V云平台: 在左边导航选择「基础设施」-「云平台管理」，在左边选择「Hyper-V」类型 点击「添加」按钮 ，填入下表信息： 填写密码，点击「验证」，验证连接成功后，点击「提交」, Hyper-V云平台入口已保存 参数名称 描述 示例 云名称 Hyper-V云平台名称 Hyper-V SCVMM地址 Hyper-V SCVMM地址 http://x.x.x.x:5985/wsman SCVMM名称 Hyper-V SCVMM名称 scvmm01.test.local 虚拟机存储路径 虚拟机存储路径 C:\\ClusterStorage\\Volume1 用户名 Hyper-V 用户名 administrator\\@wintest 密码 Hyper-V 密码 确认密码 添加CloudView云平台 您可以根据下面的步骤来添加一个CloudView云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「CloudView」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 CloudView名称 CloudView 认证URL 认证URL 认证地址 API版本 选择API版本：版本2 版本3 版本2 租户名称 租户名称 Tenant 用户名 用户名 admin 密码 密码 确认用户密码 区域 Region RegionOne 数据中心 数据中心所在地 上海 点击「验证」，验证连接成功后，点击「提交」, CloudView云平台入口已保存 添加物理服务器云平台 您可以根据下面的步骤来添加一个物理服务器云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「物理服务器」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 物理服务器名称 X86物理机 认证URL 认证URL http://x.x.x.x 用户名 用户名 admin 密码 密码 确认用户密码 点击「验证」，验证连接成功后，点击「提交」, 物理服务器云平台入口已保存 添加Kubernetes云平台 您可以根据下面的步骤来添加一个Kubernetes云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「Kubernetes」类型 点击「添加」按钮，在「概况」页面填入下列信息： 名称：输入Kubernetes的云平台名称 认证URL：输入云平台的URL信息 CA证书：在kubectl的配置文件中，在 .kube/config中找到certificate-authority文件 用户证书：在kubectl的配置文件中，在 .kube/config中找到client-certificate文件 用户密钥：在kubectl的配置文件中，在 .kube/config中找到client-key文件 Prometheus 监控地址：若Kubernetes中已安装Prometheus，则可输入Prometheus 监控地址，通过SmartCMP平台查看Kubernetes的监控数据 点击「验证」，验证连接成功后，点击「提交」, Kubernetes云平台入口已保存 「容器镜像源」页面：可添加、编辑、删除容器镜像源 添加容器镜像源：选择类型（VMware Habor、Docker Trusted Registry），填写名称、项目名称（VMware Habor 类型）、URL等相关信息，选填描述，若该镜像属于公有镜像，则无需填写用户名密码；若该镜像属于私有镜像，则需填写用户名密码才能验证成功 编辑容器镜像源：选择一镜像，点击「编辑」，则可做相应修改 删除容器镜像源：选择一镜像，点击「删除」，则可做删除镜像源 添加Docker云平台 您可以根据下面的步骤来添加一个Docker云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「Docker」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 Docker云平台名称 Docker 传输协议 传输协议 http 远程URL 远程URL http://x.x.x.x 端口 端口 2375 点击「验证」，验证连接成功后，点击「提交」, Docker云平台入口已保存 添加NFS云平台 您可以根据下面的步骤来添加一个NFS云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「NFS」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 NFS云平台名称 NFS NFS服务器 NFS服务器 http://x.x.x.x 用户名 用户名 Username 密码 密码 Password 确认密码 确认用户密码 Password 点击「验证」，验证连接成功后，点击「提交」, NFS云平台入口已保存 添加阿里云平台 您可以根据下面的步骤来添加一个阿里云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「阿里云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 阿里云云平台名称 Aliyun 访问密钥ID 阿里云访问密钥ID 获取方式见下文 访问密钥 阿里云访问密钥 获取方式见下文 阿里云AccessKey获取方式 「Note」 获取Access Key Secret：登录您的阿里云管理控制台，点击页面右上角个人信息，展开面板，选择里面的\"accesskeys\"，或者您也可以直接登录访问https://ak-console.aliyun.com，进入AccessKeys管理界面，查看您的AccessKey列表，如果当前列表为空，您也可以创建一个； 「Note」 获取Access Key ID：阿里云账号ID是阿里云分配给每个用户的唯一识别码，不可更改，格式为16位数字，如：102462945332****（为避免与真实用户巧合，后4位数字省略），用户要查看自己的阿里云账号ID，请在登录状态下访问阿里云账号\"安全设置\"，地址：https://account.console.aliyun.com/secure； 在打开的\"安全设置\"页面中，查找自己的账号ID 点击「验证」，验证连接成功后，点击「提交」, 阿里云平台入口已保存 添加阿里专有云平台 您可以根据下面的步骤来添加一个阿里专有云平台（Apsara）： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「阿里专有云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 阿里专有云云平台名称 Aliyun专有云 访问密钥ID 阿里云访问密钥ID 获取方式见下文 访问密钥 阿里云访问密钥 获取方式见下文 点击「验证」，验证连接成功后，点击「提交」, 阿里专有云平台入口已保存 添加腾讯云平台 您可以根据下面的步骤来添加一个腾讯云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「腾讯云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 腾讯云云平台名称 TenantCloud 访问密钥ID 腾讯云访问密钥ID 获取方式见下文 访问密钥 腾讯云访问密钥 获取方式见下文 区域 区域名称 华东地区 类似阿里云Access Key，腾讯云为API服务提供了一套API密钥验证机制，API密钥由腾讯云颁发给云主机的所有者，它由 Secret ID 和 Secret Key 组成。对应SmartCMP接入腾讯云平台的访问密钥ID和访问密钥。 「Note」 获取方式： 登录您的腾讯云控制台，点击左上角\"云产品\"，在弹出的界面中点击\"云API密钥\"，或者您也可以直接登录访问https://console.qcloud.com/capi 进入\"云API密钥\"管理界面，您将看到您的API密钥列表，API密钥由APPID、SecretId及SecretKey组成，如果该列表为空，请点击\"新建密钥\"创建一个； 「Note」 腾讯云账号ID是腾讯云分配给每个用户的唯一识别码，用户要查看自己的腾讯云账号ID，请在登录状态下访问\"账户信息\"，地址：https://console.qcloud.com/developer； 点击「验证」，验证连接成功后，点击「提交」, 腾讯云平台入口已保存 添加青云云平台 支持青云公有和私有两种类型的云平台对接。您可以根据下面的步骤来添加一个青云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「青云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 青云云平台名称 QingCloud 访问密钥ID 青云访问密钥ID 获取方式见下文 访问密钥 青云访问密钥 获取方式见下文 类型 选择私有或公有 私有/公有 API URL 若选择私有，需要提供青云私有云API URL http://x.x.x.x 类似阿里云Access Key，青云公有云为API服务提供了一套API密钥验证机制，通过这个密钥，用户可以将青云中的云资源导入到平台。API密钥由青云颁发给云主机的所有者，它由qy_access_key_id和 qy_secret_access_key组成。 「Note」 登录您的青云QingCloud控制台，点击左侧菜单中的\"API密钥\"，进入API密钥管理页面，或者您也可以直接登录访问https://console.qingcloud.com/access_keys/；点击创建按钮，弹出\"新建API密钥\"窗口，输入名称，如：云服务，点击\"提交\"按钮；在弹出的\"下载密钥\"窗口，点击下载按钮，将密钥文件：access_key.csv下载到本地。请注意，API密钥的下载链接只会出现一次，如果您创建时没有下载，请重新创建一个新的API密钥； 使用记事本打开文件：access_key.csv，可以看到API密钥信息，qy_access_key_id和 qy_secret_access_key 点击「验证」，验证连接成功后，点击「提交」, 青云平台入口已保存 添加AWS平台 您可以根据下面的步骤来添加一个AWS平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「AWS」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 AWS平台名称 AWS平台 访问密钥ID AWS访问密钥ID 获取方式见下文 访问密钥 AWS访问密钥 获取方式见下文 亚马逊AWS访问密钥（即Access Key）是AWS用户在通过API访问云资源时的确认用户身份的凭证，SmartCMP正是通过API来管理AWS云资源，因此用户首先需要获取AWS访问密钥（Access Key）才可以将资源纳入到平台中进行管理，访问密钥（Access Key）由亚马逊AWS颁发给云主机的所有者，它由访问秘钥ID（Access Key ID）和私有访问秘钥（Secret Access Key）构成。 「Note」 登录AWS管理控制台 使用AWS主账号（或者是拥有AdministratorAccess管理策略权限的子账号）登录管理控制台，点击\"安全&身份\"中的\"管理用户访问和加密密钥（Identity& Access Management）\"，进入IAM控制面板； 查看用户列表,进入IAM控制面板后，点击\"用户\"，查看所有用户列表； 「Note」 查看用户安全证书, 要将云资源导入到平台，要确保访问密钥（Access Key）有足够的资源权限，因此请选定一个有相应权限的用户，点击用户名，进入该用户详情页面后，点击\"安全证书\"页签；创建访问密钥 请点击\"创建访问密钥\"，将打开密钥信息窗口。需要注意的是，在AWS控制台中，用户仅有一次查看访问密钥的机会，因此请务必在打创建访问密钥成功后，将密钥信息妥善保存； 图中的访问秘钥ID即导入云主机时用到的的Access Key ID，私有访问秘钥即Secret Access Key（默认不显示，点击\"显示\"链接）； 点击「验证」，验证连接成功后，点击「提交」, AWS平台入口已保存 添加Azure云平台 您可以根据下面的步骤来添加一个Azure云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「Azure」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 Azure云平台名称 Azure 客户机ID Azure客户机地址 获取方式见下文 访问密钥 租户名 获取方式见下文 访问域 用户名 获取方式见下文 订阅ID 凭证之一 获取方式见下文 事实上，微软Azure并没有一个所谓的\"API访问凭证\"的概念，我们需要通过它的\"Active Directory\"中的应用程序Client信息来进行API的访问。而且相较其它云厂商而言，微软Azure的API访问凭证略显复杂，且需要通过多个步骤获取它由订阅（Subscription）ID、客户机ID和访问密钥构成。 获取微软Azure的访问域： 「Note」 在Azure控制台中进入Azure Active Directory，再点击二级菜单\"属性\"；在Active Directory属性页面，我们可以看到\"目录ID\"，该目录ID即为Azure的访问域； 获取订阅ID: 「Note」 您在购买Azure产品之前，必须先创建一个订阅，而后需要在这个订阅下购买云资源，云资源不能跨订阅访问。因此，当您存在多个订阅时，请您确保输入的订阅ID是您需要导入的云资源所属订阅，否则可能会出现无法列出云资源的情况。 登录Azure控制台，在左侧菜单选择\"成本管理+计费\"（菜单顺序是可自定义调整的），在\"Overview\"中，找到您要导入的云资源所属订阅，获取\"订阅ID\"。如果您有多个订阅，都希望通过平台来管理，那么请创建多个云账户分批导入； 获取客户机ID和访问密钥： 「Note」 在[Azure Active Directory]中，点击二级菜单\"[应用注册]\"，将会列出现有的所有应用程序，在应用程序（客户端）ID处即可找到 客户机ID 点击该应用程序进入详情页面，先点击左侧\"[证书和密码]\"按钮，再找到右侧的\"新增客户端密码\"，添加客户端密码，添加成功后，可查看到访问密钥。 点击「验证」，验证连接成功后，点击「提交」，Azure云平台入口已保存 添加F5 BIG-IP云平台 您可以根据下面的步骤来添加一个F5 BIG-IP云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「F5 BIG-IP」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 F5 BIG-IP云平台名称 F5 BIG-IP 认证URL F5 BIG-IP认证URL https://192.168.1.171 用户名 用户名 Admin 密码 密码 确认用户密码 点击「验证」，验证连接成功后，点击「提交」, F5 BIG-IP云平台入口已保存 添加CISCO ACI平台 您可以根据下面的步骤来添加一个CISCO ACI云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「CISCO ACI」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 名称 CISCO ACI平台名称 CISCO ACI平台 认证URL CISCO ACI认证URL http://x.x.x.x:5000/ 租户名称 租户名 Tenant 用户名 用户名 Username 密码 密码 确认用户密码 点击「验证」，验证连接成功后，点击「提交」, CISCO ACI云平台入口已保存 添加金山云平台 您可以根据下面的步骤来添加一个金山云平台： 在左边导航选择「基础设施」-「云平台管理」，在左边选择「金山云」类型 点击「添加」按钮，填入下列信息： 参数名称 描述 示例 云名称 云平台名称 金山云 访问密钥ID 金山云访问密钥ID 获取方式类似阿里云 访问密钥 金山云访问密钥 获取方式类似阿里云 点击「验证」，验证连接成功后，点击「提交」, 金山云平台入口已保存。 查看当前租户已添加的云平台 您可以根据下面的步骤来查看当前租户已添加的云平台： 在左边导航选择「基础设施」-「云平台管理」 在左侧选择不同的云平台，将在右侧看到已添加的云平台信息 可在该页面对云平台做添加、编辑和删除等操作 点击云平台的名称，进入云平台「概况」界面，点击「资源信息」标签页，可查看云平台总体资源使用情况 修改云平台信息 在左边导航选择「基础设施」-「云平台管理」， 在左侧管理菜单选择需要修改的云平台类型，然后在右侧点击云平台名称或选中云平台后点击「编辑」，则出现云平台编辑界面。修改云平台信息后点击「验证」-「提交」即可。 查看云平台资源使用情况 成功添加云平台后，可以通过系统查看云平台的总体资源使用情况。在左边导航选择「基础设施」-「云平台管理」，根据选择的云平台查看资源使用情况。 查看vSphere云平台资源使用情况 在添加vSphere云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前vSphere云平台的整体资源情况： 数据总览：显示该云平台下资源概况，如物理主机数量，群集数量，数据存储数量、标准交换机数量和虚机总数 「数据中心概况」：显示该数据中心下的群集、主机、虚拟机个数以及CPU、内存、存储等的已用量和总量百分比 「群集和主机概况」：显示群集名称，及该群集下的云主机名称、所属数据中心，CPU总数，CPU、内存、存储的已用量和总量百分比 「数据存储概况」：显示数据存储名称、所属数据中心、及存储的已用量、总量和申请总量的百分比 「vSphere资源池概况」：vSphere资源池名称、所属群集、CPU已用量和总量的百分比，内存的已用量和总量的百分比 查看OpenStack云平台资源使用情况 在添加OpenStack云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前OpenStack云平台的整体资源情况：包括可用区名称、资源池总数、已部署虚机、CPU、内存、存储等。 查看PowerVC云平台资源使用情况 在添加PowerVC云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前PowerVC云平台的整体资源情况：包括可用区名称、资源池总数、已部署虚机（已部署/预留总量）、CPU、内存、存储等。 查看Kubernetes云平台资源使用情况 在添加Kubernetes云平台成功之后（需要在Kubernetes中安装prometheus，并在云平台输入prometheus监控地址），点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前Kubernetes云平台的整体资源情况：包括集群内存使用率、集群CPU使用率、集群文件系统使用率等。 查看阿里云云平台资源使用情况 在添加阿里云云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前阿里云云平台的整体资源情况：包括区域名称、配置的资源池总数、已部署虚机（已部署/预留总量）、CPU（已用量/预留总量）和内存（已用量/预留总量）等。 查看腾讯云云平台资源使用情况 在添加腾讯云云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前腾讯云云平台的整体资源情况：包括区域名称、配置的资源池总数、已部署虚机（已部署/预留总量）、CPU（已用量/预留总量）和内存（已用量/预留总量）等。 查看青云云平台资源使用情况 在添加青云云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前青云云平台的整体资源情况：包括区域名称、配置的资源池总数、已部署虚机（已部署/预留总量）、CPU（已用量/预留总量）和内存（已用量/预留总量）等。 查看AWS云平台资源使用情况 在添加AWS云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前AWS云平台的整体资源情况：包括区域名称、配置的资源池总数、已部署虚机（已部署/预留总量）、CPU（已用量/预留总量）和内存（已用量/预留总量）等。 查看Azure云平台资源使用情况 在添加Azure云平台成功之后，点击云平台名称或选中云平台后点击「编辑」，会进入云平台「概况」页面，点击「资源信息」，会显示当前Azure云平台的整体资源情况：包括区域名称、配置的资源池总数、已部署虚机（已部署/预留总量）、CPU（已用量/预留总量）、内存（已用量/预留总量）等。 删除云平台 在左边导航选择「基础设施」，选择二级菜单「云平台管理」。在左侧管理菜单选择需要修改的云平台类型，然后选中云平台，点击「删除」然后确认即可。若仍存在关联到这个云平的资源池，则不能删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/03基础设施管理/资源池管理.html":{"url":"AdminDoc/03基础设施管理/资源池管理.html","title":"资源池管理","keywords":"","body":"资源池管理 基础设施管理员纳管私有云、公有云、混合云、容器、物理机以及主流网络资源，将各类资源进行池化形成资源池。 管理员分配资源池给业务组使用，实现对云平台资源的切分，可以指定资源池使用目标云平台的特定资源，例如：自定义\"开发资源池\"为开发资源池关联存储资源和网络资源等，通过资源池指定能够使用的资源配额，如允许部署的虚拟机总量，允许申请的vCPU总量、内存总量等。 添加资源池 成功添加云平台之后，支持将云平台资源划分成一个或多个资源池，分配相应的资源额度给不同的业务组使用，资源池和业务组的关联关系,资源的共享情况分为三种： 资源池仅分配给唯一的业务组； 资源池分配给所有的业务组，并且新增的业务组自动关联该资源池； 资源池共享给多个业务组。 支持资源池复制，使用场景：当管理员给vCenter配置了多个群集，每个业务组都需要配置这些群集做为资源池，支持管理员快速创建配置相同或类似的资源池。具体操作步骤： 在左边导航选择「基础设施」，选择二级菜单「资源池管理」在资源池的列表中，选择一个资源池，点击 复制 按钮（当选择多个资源池时，复制按钮将不能点击），生成一个新的资源池的创建页面，复制资源的名称自动修改为 \"-1\"（例如，原资源池名字为vSphereDemo，复制出来的为vSphereDemo-1。其他的所有配置与原资源池相同，管理员可以修改原资源池的相关参数，包括所分配的业务组，以及共享模式。 支持资源池启用或者禁用。管理员在新建和编辑资源池的时候，优先级的下方增加选择按钮，启用资源池，默认勾选。资源池不管启用还是禁用，都可以分配给业务组。禁用后，在部署云资源的时候，就不支持选择到这个资源池，但存量的资源不受任何影响。 添加vSphere资源池 您可以根据下面的步骤来添加vSphere资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「vSphere」，会出现创建资源池界面。按照表单逐步填写相关信息，保存即可 在「基本信息」页面需填入以下内容： 名称 资源池名称 允许共享给多个业务组 「Note」 勾选后，如果在下方业务组的选择项中如果选择全部业务组，即配置为全局共享资源池，新增的业务组将自动关联；如果选择多个业务组，则共享给多个业务组,不勾选，在下方业务组选择唯一业务组，则单独分配给唯一选定的业务组。 资源标签 给资源池添加标签以区分不同的使用环境（可选） 优先级 用于帮助指定资源池选择策略，数值越小，优先级越高 云平台入口 选择哪个 vCenter 划分资源池。 资源入口 选择使用 vCenter 下的哪个集群或主机（包含集群和不在集群中的物理主机） 文件夹 选择用于存储的文件夹（可选） 计算资源」页面显示基本资源入口信息，根据资源入口信息内容填入以下内容： vCPU 本资源池最大允许部署多少vCPU数 内存（GB） 本资源池最大允许部署多少(GB)内存 虚机数量 本资源池最大允许部署多少虚拟机 每台虚拟机允许快照数量 每台虚拟机允许快照的最大数量 vSphere资源池 部署出来的虚拟机存放在vSphere哪个资源池 宿主机选择策略 内存有限或存储优先存储 存储 选择虚拟机部署使用的存储以及存储配额（请根据实际情况配置合适大小的资源池，若资源太少则会影响后续部署） 「网络资源」，选择网络及IP分配方式（手工指定、IP池、DHCP）；若选择IP池，则需要在IP地址管理栏下选择对应的IP池。可给网络添加描述，在服务配置选择时，将显示描述信息，方便选择 点击「保存」按钮，vSphere资源池成功创建。 添加vSphere with NSX资源池 添加vSphere带NSX资源池的前提是需要在vSphere云平台中关联VMware NSX。 您可以根据下面的步骤来添加vSphere带NSX资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「vSphere」，会出现创建资源池界面。按照表单逐步填写相关信息，保存即可； 在「基本信息」页面需填入以下内容： 名称 资源池名称 允许共享给多个业务组 勾选后，如果在下方业务组的选择项中如果选择全部业务组，即配置为全局共享资源池，新增的业务组将自动关联；如果选择多个业务组，则共享给多个业务组,不勾选，在下方业务组选择唯一业务组，则单独分配给唯一选定的业务组。 资源标签 给资源池添加标签以区分不同的使用环境（可选） 优先级 用于帮助指定资源池选择策略，数值越小，优先级越高 云平台入口 选择哪个 vCenter 划分资源池。 资源入口 选择使用 vCenter 下的哪个集群或主机（包含集群和不在集群中的物理主机） 文件夹 选择文件夹（可选） VMware NSX传输区域 用于配置NSX逻辑交换机，若不选择，在「网络资源」页面将不显示「NXS逻辑交换机」子页面 「计算资源」页面：同上节的vSphere资源池配置 「网络资源」页面： 网络资源 选择网络以及该网络的IP分配方式，支持手工指定、IP池、DHCP，若选择IP池的分配方式需指定IP池。可给网络添加描述，在服务配置选择时，将显示描述信息，方便选择 分布式虚拟交换机机 选择虚拟交换机 NSX逻辑交换机 选择逻辑交换机以及对应的IP池 NSX逻辑路由器 选择NSX逻辑路由器 NSX服务网关 选择NSX服务网关 NSX安全策略组 选择应用于该资源池的安全策略组 「Note」网络资源和NSX逻辑交换机至少配置一种 点击「保存」按钮，vSphere with NSX资源池成功创建 添加openStack资源池 您可以根据下面的步骤来添加openStack资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「openStack」 在「基本信息」页面需填入以下信息： 名称 资源池名称 允许共享给多个业务组 勾选后，如果在下方业务组的选择项中如果选择全部业务组，即配置为全局共享资源池，新增的业务组将自动关联；如果选择多个业务组，则共享给多个业务组,不勾选，在下方业务组选择唯一业务组，则单独分配给唯一选定的业务组。 资源标签 选择或输入自定义资源标签 优先级 用于帮助指定资源池选择策略，数值越小，优先级越高 云平台入口 选择哪个openStack划分资源池 可用区 选择使用哪个可用区域DNS域 根据「系统管理」-「系统配置」中添加的DNS域，可选择为资源池添加一个或多个DNS域 「Note」 DNS域需要都是租户DNS域名的子域名 在「计算资源」页面显示基本资源信息，根据资源信息内容填入以下内容： vCPU 本资源池最大允许部署多少vCPU数 内存（GB） 本资源池最大允许部署多少(GB)内存 存储（GB） 本资源池最大允许部署多少(GB)存储 虚机数量 本资源池最大允许部署多少虚拟机 浮动IP数量 资源池最大预留浮动IP数量 「Note」支持openStack的浮动IP单独部署，部署完成后可在「我的部署」-「云资源」-「网络资源」-「FloatingIP」中查看。若部署时候创建的FloatingIP数量超过资源池规定的FloatingIP数量时，会部署失败。 在「网络资源」页面中有「网络资源」「安全策略组」「防火墙」三个标签页 「网络资源」：选择网络及对应的子网、IP分配方式（手工指定、IP池、DHCP）；若IP分配方式选择IP池，则需要指定IP池。可给网络添加描述，在服务配置选择时，将显示描述信息，方便选择 「安全策略组」：可选择一个或多个安全策略组,网络资源和安全策略组必须配置 「防火墙」：可查看当前云平台下的防火墙名称、描述、策略、关联路由、状态（运行中、非激活），可选择一个或多个防火墙 在「路由」界面可指定路由（选填）（若需要配置防火墙，则需要在此选择路由） 点击「保存」按钮，openStack资源池成功创建 添加powerVC资源池 您可以根据下面的步骤来添加powerVC资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「powerVC」 在「基本信息」页面需填入以下内容： 名称 资源池名称 资源标签 选择或输入自定义标签 优先级 用于帮助指定资源池选择策略，数值越小，优先级越高 云平台入口 选择哪个openStack划分资源池 可用区 选择使用哪个可用区域 允许共享给多个业务组,业务组 勾选后，如果在下方业务组的选择项中如果选择全部业务组，即配置为全局共享资源池，新增的业务组将自动关联；如果选择多个业务组，则共享给多个业务组,不勾选，在下方业务组选择唯一业务组，则单独分配给唯一选定的业务组。 在「计算资源」页面显示基本资源信息，根据资源信息内容填入以下内容： vCPU 本资源池最大允许部署多少vCPU数 内存（GB） 本资源池最大允许部署多少(GB)内存 存储（GB） 本资源池最大允许部署多少(GB)存储 虚机数量 本资源池最大允许部署多少虚拟机 在「网络资源」页：选择网络及对应的子网、IP分配方式（IP池、DHCP）；若选择IP池，则需要选择IP池。可给网络添加描述，在服务配置选择时，将显示描述信息，方便选择 点击「保存」按钮，powerVC资源池成功创建 添加微软Hyper-V资源池 您可以根据下面的步骤来添加Hyper-V资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「Hyper-V」，会出现创建资源池界面。按照表单逐步填写相关信息，保存即可 在「基本信息」页面需填入以下内容： 名称 资源池名称: HyperV资源池 允许共享给多个业务组 勾选后，如果在下方业务组的选择项中如果选择全部业务组，即配置为全局共享资源池，新增的业务组将自动关联；如果选择多个业务组，则共享给多个业务组 不勾选，在下方业务组选择唯一业务组，则单独分配给唯一选定的业务组。 业务组 选择资源池所属的业务组 资源标签 给资源池添加标签以区分不同的使用环境（可选） 优先级 用于帮助指定资源池选择策略，数值越小，优先级越高 云平台入口 选择创建的Hyper-V云平台。 资源入口 选择使用哪个集群或主机（包含集群和不在集群中的物理主机） 「计算资源」页面显示基本资源入口信息，根据资源入口信息内容填入以下内容： vCPU 本资源池最大允许部署多少vCPU数 内存（GB） 本资源池最大允许部署多少(GB)内存 虚机数量 本资源池最大允许部署多少虚拟机 存储 选择虚拟机部署使用的存储以及存储配额（请根据实际情况配置合适大小的资源池，若资源太少则会影响后续部署） 预留空间 勾选相应的群集共享卷CSV，填写预留空间 「网络资源」，选择网络名称及IP分配方式（手工指定、DHCP）；可给网络添加描述，在服务配置选择时，将显示描述信息，方便选择 点击「保存」按钮，Hyper-V资源池成功创建 添加物理服务器资源池 您可以根据下面的步骤来添加物理服务器资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「物理服务器」 在「基本信息」页需填入资源池名称、资源标签（选填）、云平台入口、优先级等属性 在「物理主机」页选中物理机，将选中的物理机导入x86云平台的资源池 点击「保存」按钮，物理服务器资源池成功创建 添加Kubernetes资源池 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「Kubernetes」 在「基本信息」页填入资源池名称、资源标签（选填）、云平台入口、命名空间以及优先级 在计算资源界面填入POD数量 点击「保存」，Kubernetes资源池创建成功 添加Docker资源池 您可以根据下面的步骤来添加Docker资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「Docker」 在「基本信息」页需填入资源池名称、资源标签（选填）、云平台入口、容器数量上限（选填）和优先级等属性 在「主机列表」页显示主机的相关信息，如名称、操作系统、架构、服务端版本、CPU数量、内存等 点击「保存」，Docker资源池创建成功 添加NFS资源池 您可以根据下面的步骤来添加NFS资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「NFS」 在「基本信息」页面填入资源池名称、资源标签（选填）、 云平台入口、优先级 在「共享文件夹」标签页可添加若干NFS的共享目录 点击「保存」，NFS资源池创建成功 添加阿里云资源池 您可以根据下面的步骤来添加阿里云资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「阿里云」 在「基本信息」页需填写资源池名称，资源标签（选填），云平台入口、网络类型（经典网络和专有网络）和优先级；网络类型为专有网络时，还需要从列表中选择一个专有网络 在「计算资源」填入vCPU数量（上限），内存（上限），虚拟机数量（上限） 在「网络资源」页选择可用的阿里云安全策略组；若网络类型为专有网络时，还需选择虚拟交换机 点击「保存」，阿里云资源池创建成功 添加腾讯云资源池 您可以根据下面的步骤来添加腾讯云资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「腾讯云」 在「基本信息」页需填写资源池名称、资源标签（选填）、云平台入口、优先级 在「计算资源」页填入vCPU数量，内存大小和虚机数量 在「网络资源」页，则可以选择相应的安全组 点击「保存」，腾讯云资源池创建成功 添加青云资源池 您可以根据下面的步骤来添加青云资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「青云」 在「「基本信息」页需填入资源池名称、资源标签（选填）、云平台入口、优先级 在「计算资源」页填入vCPU数量，内存大小和虚机数量 在「防火墙」页面，选择一个防火墙策略 点击「保存」，青云资源池创建成功 添加AWS资源池 您可以根据下面的步骤来添加AWS资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「AWS」 在「基本信息」页需填入资源池名称、资源标签（选填）、优先级、云平台入口、区域、VPC网络 在「计算资源」填入vCPU数量（上限）、内存（上限）、虚拟机数量（上限） 在「网络资源」页，选择子网和安全策略组 点击「保存」，AWS资源池创建成功 添加F5 Big IP资源池 您可以根据下面的步骤来添加F5 BIG-IP资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「F5 BIG-IP」 在「基本信息」页需填入资源池名称、业务组、资源标签（选填）、云平台入口、IP池和允许共享给多个业务组关联业务组与资源池的共享状态，请参考：业务组添加资源池 点击「保存」，F5 BIG-IP资源池创建成功,F5 Big IP资源池需要关联IP池，才可以保存生效。如果当前没有对应的F5 Big IP的IP池，需要先添加相应的IP池来完成资源池的创建，请您参考添加IP池。 添加CISCO ACI资源池 您可以根据下面的步骤来添加CISCO ACI资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「CISCO ACI」 在「基本信息」页需填入资源池名称、资源标签（选填）、云平台入口、优先级 在「网络资源」中选择应用策略 点击「保存」，ACI资源池创建成功 添加Azure资源池 您可以根据下面的步骤来添加Azure资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。点击「添加」按钮，选择「Azure」 在「基本信息」页，包括「基本信息」和「云平台资源信息」两部分。「基本信息」需填写资源池名称，资源标签（选填）和优先级；若勾选「允许共享给多个业务组」，则此资源池可供多个业务组使用。「云平台资源信息」需选择云平台入口、输入订阅ID、选择区域、资源组和虚拟网络 在「计算资源」页，填入vCPU数量（上限），内存（上限），虚拟机数量（上限） 在「网络资源」页，包括「子网」「安全策略组」标签页 在「子网」页，选择子网及IP分配方式（手工指定、IP池、DHCP），通过手工指定和IP池方式可以分配内部专用IP地址。若选择IP池，则需要在IP池管理栏下选择对应的IP池 在「安全策略组」页，选择一个安全策略组 在「存储资源」页，选择一项存储账户 点击「保存」，Azure资源池创建成功 查看当前租户资源池 您可以根据下面的步骤来查看资源池: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」，将显示资源池列表界面。该列表显示当前已添加的资源池基本信息：资源池名称、类型、云平台入口、业务组、优先级、创建者、创建时间、已分配vCPU、已分配内存、已分配存储、已分配虚机数量 点击资源池名称，进入资源池页面 点击「资源使用趋势」菜单，该页面通过图表的形式直观地展示资源池使用情况，包括CPU使用情况、内存使用情况、存储使用情况，以及虚机使用数量。可通过调节时间跨度查看不同时间段的资源使用趋势情况，如1天、7天、15天、30天、90天、6个月、1年等 根据用户角色权限的不同，可进行的操作也不相同： 租户管理员和基础设施管理员可以编辑修改资源池信息； 业务组管理员可以查看资源池配额信息，并可提交扩容申请,操作步骤： 在资源列表界面，点击资源池名称，进入资源池编辑界面 点击左上角的「申请扩容」，填写资源扩容细节：如希望扩容的CPU、内存、存储的细节等 点击「提交」，提示申请扩容成功。等待扩容申请审批回复。可在「服务审批」-「我的申请」中查看申请流程走向 资源池导入虚拟机 您可以根据下面的步骤来添导入虚拟机: 在左边导航选择「基础设施」，选择二级菜单「资源池管理」 点击资源池名称或选中某一资源池点击「编辑」，进入资源池编辑界面 点击「云资源」标签，点击「导入」按钮，导入页面，可根据业务组、项目、所有者、标签进行筛选。也可选择一个集群，选择想要导入的虚拟机。点击「导入」即可 导入的虚拟机可在「我的部署」-「云主机」中查看，可通过云主机列表中状态栏下的图标区分­ 「Note」资源池需要和业务组绑定后才可以进虚拟机导入。 资源池同步策略 您可以在资源池中设置同步策略，定时同步云平台新增的资源。支持的同步对象如下： AWS支持：云主机、块存储、对象存储、安全组 Azure支持：云主机、块存储、对象存储、安全组、负载均衡器、MySQL数据库、SQL数据库、Web应用 vSphere和openStack支持：云主机 进入导航栏「基础设施」-「资源池管理」- 选择资源池 - 「同步策略」标签页，可对同步策略进行添加、编辑、删除、启用和禁用等操作。您可以根据下面的步骤设置资源池同步策略： 点击「添加」，进入同步策略配置界面 选择同步对象类型：点击对象类型即可选中，再次点击则取消选中 输入同步策略名称 选择业务组与资源池的关联情况，请参考：业务组与资源池 若该业务组下有多个项目，选择项目 选择所有者 过滤方式：通过\"标签\"和\"基于名字的正则表达式\"筛选出云平台新增的资源 状态：启用或禁用 执行时间：使用Cron表达式设置同步策略的执行时间 策略管理：启用、禁用；删除、修改同步策略 修改/删除资源池配置 在左边导航选择「基础设施」，选择二级菜单「资源池管理」。 编辑资源池：点击资源池名称或选中某一资源池点击「编辑」，则出现资源编辑界面，根据添加openStack资源池与添加vSphere资源池的参数列表说明修改已存在的资源池，修改完成后，点击「保存」。 删除资源池：选中某一资源池后点击「删除」，确认删除即可。 「Note」资源池如果和业务组进行绑定，删除会失败。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/03基础设施管理/虚拟机模板.html":{"url":"AdminDoc/03基础设施管理/虚拟机模板.html","title":"虚拟机模板","keywords":"","body":"虚拟机模板 虚拟机模板是操作系统的抽象和标准化。平台支持创建虚拟机模板，一个操作系统可对应多个虚拟机模板。 虚拟机模板与云平台中的模板或镜像相关联，例如：vSphere vCenter中的模板、OpenStack平台上的镜像、公有云平台各个区域的操作系统（OS）镜像。 在虚拟机模板中可配置SmartCMP两种代理的安装方式和账号信息，这两种代理是监控代理和自动化代理。 SmartCMP一些自动化功能依赖自动化代理，例如： 蓝图带应用部署或添加磁盘 服务配置初始化并挂载磁盘、创建新用户 部分虚机运维操作（包括重置密码，执行脚本，应用启动停止，添加、扩展Linux逻辑卷或Windows磁盘等）。 创建虚拟机模板后，可在服务配置中直接指定。SmartCMP可根据蓝图对象所在的云平台自动识别虚拟机模板。 「Note」请使用租户管理员或基础设施管理员角色登录SmartCMP平台。租户管理员可为某用户指定基础设施管理员角色。系统默认创建了3个虚拟机模板：Windows2012 R2、Redhat 7、CentOS7，还需添加相应的云平台信息才可使用。下文为您介绍添加虚拟机模板。 添加虚拟机模板 这里定义两个虚拟机模板：Windows 2012 R2和CentOS 7： 添加Linux虚拟机模板 选择「基础设施」-「虚拟机模板」，进入虚拟机模板列表界面。点击「添加」，输入操作系统名称，描述，选择系统类型Linux，点击「提交」 点击「虚拟机模板」标签页，进入虚拟机模板列表界面 添加vSphere虚拟机模板 在虚拟机模板列表界面，点击「添加」，输入虚拟机模板名称，选择一个vSphere云平台并做如下配置： 克隆模式：「完全克隆」或「链接克隆」 「Note」完全克隆是和原始虚拟机完全独立的一个拷贝，它不和原始虚拟机共享任何资源，可以脱离原始虚拟机独立使用；链接克隆需要和原始虚拟机共享同一虚拟磁盘文件，不能脱离原始虚拟机独立运行。但采用共享磁盘文件却大大缩短了创建克隆虚拟机的时间，同时还节省了宝贵的物理磁盘空间。 完全克隆： 模板：选择一个Linux CentOS模板 链接克隆： 虚拟机：选择一个Linux CentOS 7的模板。 快照模式：默认\"指定一个快照\"，可选择\"申请时候选择\"和\"总是使用最新\"这两种快照模式。选择\"申请时候选择\"将在服务申请的时候选择虚拟机快照。 快照：若快照模式选择\"指定一个快照\"，将选择一个快照。 使用规范：选择「内建」（按需求选择无、内建或自定义规范，规范有助于防止在部署相同设置的虚机时产生冲突） 模板中已启用SSH：勾选该选项，表示模板中已经启用和配置SSH，可以选择通过SSH的方式安装监控代理和自动化代理；默认SSH端口为22，如果模板中修改了SSH的端口，可输入模板中修改的SSH端口号 用户名、密码：使用具有SSH权限的用户及其密码 安装监控代理：无监控：若不安装监控代理，则平台的监控功能不可用。SSH安装监控代理：选择SSH安装的话，会通过SSH的方式访问虚拟机并安装监控代理；设置监控端口，默认是9100。预安装监控代理：预安装是指模板中已经安装了监控代理。云平台监控：从VCenter上直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理：不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等。SSH安装：选择SSH安装，会通过SSH的方式访问虚拟机并安装自动化代理。预安装：预安装是指模板中已经安装了自动化代理 管理员用户：输入模板中配置的管理员用户名 管理员密码：输入模板中配置的管理员密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加OpenStack虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择一个OpenStack云平台并做如下配置： 启动源类型：从镜像启动、从快照启动、从云硬盘启动、从云硬盘快照启动 从镜像启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照 从快照启动：选择快照名称 从云硬盘启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照；若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘启动\"模式需要在服务配置时选择卷类型和配置卷大小 从云硬盘快照启动：选择云硬盘快照名称，若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘快照启动\"模式需要在服务配置时选择卷类型和配置卷大小 虚拟机镜像：选择一个CentOS的模板 安装监控和自动化代理的方式与vSphere的Linux模板相同，可配置SSH端口，此外SSH用户支持密钥方式（可在「基础设施」-「密钥对」中新建密钥或导入密钥） 管理员用户名和密码：输入需要设置的操作系统管理员用户名和密码。 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新,此时这个Linux CentOS的操作系统，关联了2个虚拟机模板。在服务配置的时候，平台会自动选择与该服务相对应的虚拟机模板，无需重复设置。 添加Hyper-V虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择HyperV云平台名称，并对虚拟机模板做如下配置： 基本信息：选择「操作系统名称」、描述、和系统类型（按需求选择Linux和Windows，这里选择Linux） 模板：选择一个CentOS的模板 编辑虚拟机模板：输入模板名称、云平台入口、模板中已启用SSH：勾选该选项，表示模板中已经启用和配置SSH（输入模板中配置的SSH端口），可以选择通过SSH方式安装监控代理和自动化代理 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 SSH安装监控代理：选择SSH安装的话，会通过SSH的方式访问虚拟机并安装监控代理；设置监控端口，默认是9100 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等 SSH按照自动化代理：选择SSH安装，会通过SSH的方式访问虚拟机并安装自动化代理 用户名：输入需要设置的用户名，例如: root 密码：输入需要设置的管理员密码,例如：Passw0rd 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加Azure虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择Azure云平台名称，并对虚拟机模板做如下配置： 基本信息：选择「操作系统名称」、描述、和系统类型（按需求选择Linux和Windows，这里选择Linux） 编辑虚拟机模板：输入模板名称、云平台入口、选择区域名称（例如：中国北部）、镜像名称（勾选允许修改时，在服务配置种可以修改镜像） 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 SSH安装监控代理：选择SSH安装的话，会通过SSH的方式访问虚拟机并安装监控代理；设置监控端口，默认是9100 云平台监控：从Azure云平台直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等 SSH按照自动化代理：选择SSH安装，会通过SSH的方式访问虚拟机并安装自动化代理 用户名：输入需要设置的用户名，例如: root 密码：输入需要设置的管理员密码,例如：Passw0rd 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加Windows虚拟机模板 选择「基础设施」-「虚拟机模板」，进入虚拟机模板列表界面。点击「添加」，输入虚拟机模板名称，描述，选择系统类型：Windows，点击「提交」 点击「虚拟机模板」标签页，进入虚拟机模板列表界面 添加一个vSphere虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择一个vSphere云平台并做如下配置： 克隆模式：「完全克隆」「链接克隆」 「Note」完全克隆是和原始虚拟机完全独立的一个拷贝，它不和原始虚拟机共享任何资源。可以脱离原始虚拟机独立使用；链接克隆需要和原始虚拟机共享同一虚拟磁盘文件，不能脱离原始虚拟机独立运行。但采用共享磁盘文件却大大缩短了创建克隆虚拟机的时间，同时还节省了宝贵的物理磁盘空间。 完全克隆： 模板：选择Windows 2012模板 链接克隆 虚拟机：选择一个Windows 2012的模板 快照模式：默认\"指定一个快照\"，可选择\"申请时候选择\"和\"总是使用最新\"这两种快照模式。选择\"申请时候选择\"将在服务申请的时候选择虚拟机快照 快照：若快照模式选择\"指定一个快照\"，将选择一个快照 使用规范：选择「内建」（按需求选择无、内建或自定义规范，规范有助于防止在部署相同设置的虚机时而产生冲突） 模板中已启用WinRM：勾选该选项，表示模板中已经启用和配置WinRM，可以选择通过WinRM的方式安装监控代理和自动化代理 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 WinRM安装监控代理：会通过WinRM的方式访问虚拟机并安装监控代理设置监控端口，默认是9182 预安装监控代理：指模板中已经安装了监控代理 云平台监控：从VCenter上直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等 WinRM安装：选择WinRM安装，会通过WinRM的方式访问虚拟机并安装自动化代理 预安装：指模板中已经安装了自动化代理 Windows用户名：输入需要设置的Windows管理员用户名 Windows密码：输入需要设置的Windows管理员密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加一个OpenStack虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择一个OpenStack云平台并做如下配置： 启动源类型：选择从镜像启动、从快照启动、从云硬盘启动或从云硬盘快照启动 从镜像启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照 从快照启动：选择快照名称 从云硬盘启动：选择镜像名称和快照模式；快照模式默认为\"不使用快照\"，可选择\"申请时候选择\"和\"总是使用最新的\"。若选择\"申请时候选择\"将在服务申请时指定虚拟机快照；若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘启动\"模式需要在服务配置时选择卷类型和配置卷大小 从云硬盘快照启动：选择云硬盘快照名称，若勾选\"终止后删除\"，将在终止主机后删除硬盘。选择\"从云硬盘快照启动\"模式需要在服务配置时选择卷类型和配置卷大小 安装监控和自动化代理的方式与vSphere的Windows模板相同 Windows用户名: 输入需要设置的Windows管理员用户名 验证类型：密钥对、密码两种类型，选择密码 Windows密码：设置用户名对应的密码 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新。 此时这个Windows 2012的操作系统，关联了2个虚拟机模板。在服务配置的时候，平台会自动选择与该服务相对应的虚拟机模板，无需重复设置。 添加一个Hyper-V虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择HyperV云平台名称，并对虚拟机模板做如下配置： 基本信息：选择「操作系统名称」、描述、和系统类型（按需求选择Linux和Windows，这里选择Windows） 模板：选择Windows 2012模板 编辑虚拟机模板：输入模板名称、云平台入口、模板中已启用WinRM：勾选该选项，表示模板中已经启用和配置WinRM，可以选择通过WinRM的方式安装监控代理和自动化代理 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 WinRM安装监控代理：会通过WinRM的方式访问虚拟机并安装监控代理设置监控端口，默认是9182 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等 WinRM安装：选择WinRM安装，会通过WinRM的方式访问虚拟机并安装自动化代理 用户名：输入需要设置的用户名，例如: root 密码：输入需要设置的管理员密码,例如：Passw0rd 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 添加一个Azure虚拟机模板 在虚拟机模板页面，点击「添加」，输入虚拟机模板名称，选择Azure云平台名称，并对虚拟机模板做如下配置： 基本信息：选择「操作系统名称」、描述、和系统类型（按需求选择Linux和Windows，这里选择Windows） 编辑虚拟机模板：输入模板名称、Azure的云平台入口、选择区域名称（例如：中国北部）、镜像名称（勾选允许修改时，在服务配置种可以修改镜像） 监控方式： 无监控：不安装监控代理，则平台的监控功能不可用 WinRM安装监控代理：会通过WinRM的方式访问虚拟机并安装监控代理设置监控端口，默认是9182 云平台监控：从Azure上直接读取虚机的监控数据，不需要安装监控代理 安装自动化代理： 不安装：若不安装自动化代理，则平台的一些自动化功能将无法使用，例如蓝图带应用部署或添加磁盘，某些虚拟机的操作如重置密码，执行脚本等等 WinRM安装：选择WinRM安装，会通过WinRM的方式访问虚拟机并安装自动化代理 用户名：输入需要设置的用户名，例如: root 密码：输入需要设置的管理员密码,例如：Passw0rd 点击「提交」，提示虚拟机模板已创建。点击「保存」，提示虚拟机模板已更新 查看当前虚拟机模板 您可以根据下面的步骤来查看虚拟机模板： 「Note」请使用租户管理员或基础设施管理员角色登录SmartCMP平台。 在左边导航选择「基础设施」，选择二级菜单「虚拟机模板」，则显示当前的虚拟机模板列表。可在列表中查看描述信息以及该虚拟机模板对应的操作系统类型 点击虚拟机模板的名称可进入基本信息页面，可查看操作系统名称、描述、系统类型 点击虚拟机模板，进入虚拟机模板管理界面。可新增、编辑和删除虚拟机模板 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/03基础设施管理/计算规格.html":{"url":"AdminDoc/03基础设施管理/计算规格.html","title":"计算规格","keywords":"","body":"计算规格 计算规格定义了虚拟机的CPU和内存的配置规范（如：2核CPU，4G内存）并能够设置云平台规格，配置服务时根据云平台自动选择。 进入菜单「基础设施」-「计算规格」，可管理计算规格。在服务配置节点详细设置处可对计算节点做规格的配置。 添加计算规格 不同类型云平台的计算规格的配置方式有所不同，区别如下: vSphere、Hyper-V只需定义计算规格，不需要配置云平台规格，下文以vSphere为例 OpenStack需要定义计算规格和云平台规格 Azure、AWS、阿里云需要定义计算规格和云平台规格（针对每个公有云区域需要定义一个云平台规格），下文以Azure为例 「Note」下文在添加计算规格处分三种类型举例说明。 进入菜单「基础设施」-「计算规格」，可管理计算规格。平台默认四种计算规格微型（1核1GB）、小型（2核4GB）、中型（4核8GB）、大型（8核16GB），您也可以根据需要自定义计算规格类型。 添加vSphere计算规格 进入菜单「基础设施」-「计算规格」，进入新增规格基本信息页面： 新增计算规格 基本信息 规格名称 vSphere计算规格 CPU 2 CPU单位 核 内存 4 内存单位 GB 点击「保存」，就可以添加一个vSphere新的计算规格。 添加OpenStack计算规格 点击列表上方的「添加」按钮，会跳转到新增计算规格页面，输入如下规格信息： 新增OpenStack计算规格 基本信息 规格名称 OpenStack计算规格 CPU 2 CPU单位 核 内存 4 内存单位 GB 点击「保存」，就可以添加一个新的OpenStack计算规格。 点击「云平台规格」点击列表上方的「添加」按钮，会跳转到新增云平台规格页面，输入如下云规格信息： 添加OpenStack云平台规格 基本信息 云平台类型 OpenStack 云平台 OpenStack 规格 选择：CPU:1,内存(GB)2, 根磁盘(GB)100 设置为缺省规格 每个区域的云平台缺省规格只能有一个 点击「提交」，就可以添加一个新的云平台规格。 在OpenStack模板服务配置节点详细设置处可对计算节点做规格的配置。如您想查看详情请参考： 添加Azure计算规格 点击列表上方的「添加」按钮，会跳转到新增Azure计算规格基本信息页面，输入如下规格信息： 新增Azure计算规格 基本信息 规格名称 Azure计算规格 CPU 2 CPU单位 核 内存 4 内存单位 GB 点击「保存」，就可以添加一个新的Azure计算规格。 点击「云平台规格」点击列表上方的「添加」按钮，会跳转到新增云平台规格页面，输入如下云规格信息： 添加Azure云平台规格 基本信息 云平台类型 Azure 云平台 Azure 区域名称 云平台对应的区域，例如:华南1（深圳） 规格 选择：CPU:1，内存:2GB，磁盘数量:1 设置为缺省规格 每个区域的云平台缺省规格只能有一个 点击「提交」，就可以添加一个新的Azure云平台规格。 在Azure模板服务配置节点详细设置处可对计算节点做规格的配置。如您想查看详情请参考： 查看计算规格 进入计算规格页面，可以看到规格列表，表格中会列出当前已有的所有的计算规格。 显示规格名称、CPU、CPU单位、内存、内存单位、创建时间。 编辑计算规格 在列表中，点击规格名称，可对点击的计算规格进行编辑。 删除计算规格 在列表中也可以选中一个计算规格，点击「删除」按钮将选中的计算规格删除。如果该计算规格正在使用中将会提示不可删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/03基础设施管理/IP地址管理.html":{"url":"AdminDoc/03基础设施管理/IP地址管理.html","title":"IP地址管理","keywords":"","body":"IP地址管理 本章节介绍如何创建并使用IP池，目前IP池支持vSphere云平台、OpenStack、Azure、PowerVC、 X86、F5 Big IP云平台、虚拟内网IP地址和Cisco ACI。 IP树展示 IP地址管理增加目录结构，目录包含多级，每级目录包含名称、描述、网段（包含掩码） ； 租户管理员和IAAS管理员可以创建, 更新和删除IP池目录, 拥有对IP池目录的创建、更新、删除、查看权限\\ 租户内其他人只对IP池目录可以查看, 拥有对IP池目录查看权限。 下面为您介绍添加IP树的具体步骤： 点击「基础设施」-「IP地址管理」，点击在添加文件夹页面，输入名称、描述、CIDR、网关。 点击提交，即可创建IP树形结构。 点击二次编辑名称、描述、网关等相关信息，点击即可删除IP信息。 添加IP池 点击「基础设施」-「IP地址管理」，显示IP池列表，显示IP池的名称、描述、类别、状态、创建者、已使用IP地址、创建时间。 IP池 点击「添加」，选择「IP池」，进入创建IP池页面 在「概况」标签页，填入下列信息： 基本信息：名称、描述（选填）、CIDR、网关 DNS/WINS信息 在「IP范围」标签页：创建IP范围，点击「添加」，输入名称，起始IP和结束IP，点击「提交」。 添加成功后，在IP地址列表中，将显示添加的IP地址及其状态，如可用、已占用。可对IP地址进行手动占用或释放 点击「保存」，IP池创建成功 F5 BIG-IP IP池 对于F5 BIG-IP IP池，点击「添加」，选择「IP池（F5 BIG-IP）」，进入创建IP池页面 在「概况」标签页，需填入下列信息： 名称描述 IP范围：点击「添加」，输入名称，起始IP和结束IP，点击「提交」 添加成功后，在IP地址列表界面，将显示添加的IP地址及其状态，如可用、已占用。可对IP地址进行手动占用或释放 点击「保存」，IP池（F5 BIG-IP）创建成功 ACI IP池 对于Cisco ACI IP池，点击「添加」，选择「IP池（ACI）」，进入创建IP池页面 在「概况」标签页，需填入/选择下列信息： 基本信息：云平台入口、BridgeDomain、Subnet、名称、描述、CIDR（自动填写，不支持自定义编辑）、网关 DNS/WIN信息 在「IP范围」标签页：创建IP范围，输入名称，起始IP和结束IP，点击「提交」。添加成功后，在IP地址列表界面，将显示添加的IP地址及其状态，如可用、已占用。可对IP地址进行手动占用或释放 点击「保存」，IP池（Cisco ACI IP）创建成功 IP池列表 点击「基础设施」-「IP地址管理」，显示IP池列表。在这个页面中用户可以查看当前系统中配置好的IP池以及IP池的基本信息。 编辑/删除IP池 在IP地址列表界面，选中一个IP池，点击「编辑」，进入IP池编辑界面。点击「删除」，确认删除点击「是」，即可删除IP池。 管理IP地址 在IP地址列表界面，点击IP池名称，对IP地址进行管理，主要功能点： 可查看IP用量趋势，手动释放 支持IP地址冲突检测 支持IP地址冷却期设置 IP释放后保留一段时间，冷却期过后再重新放入IP池中进行分配 支持IP地址使用情况的详细日志信息查询 您可以参考如下操作步骤管理IP地址： 选择「IP范围」标签页，可看见IP池中所有管理的IP地址的详情：IP地址 、使用IP 的资源、状态（可用、已占用、不可用、冷却中、预留、预分配）、更新时间、操作人。 支持对已占用、冷却中的IP地址进行释放操作，对可用的IP地址进行占用。 「Note」IP管理支持IP池冷却期并支持自定义设置冷却期的时长，IP地址被释放后，IP地址会进入冷却期，在冷却期结束之后IP地址才会被重新分配。 点击「IP地址」将显示该IP的状态更新和冲突检测的操作日志。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/03基础设施管理/密钥对.html":{"url":"AdminDoc/03基础设施管理/密钥对.html","title":"密钥对","keywords":"","body":"密钥对 密钥对是用户访问创建的虚拟机，安装代理等过程的登录凭证。基础设施管理员、租户管理员和sysadmin可以通过密钥对界面对密钥对进行管理，包括创建、导入、下载和删除。 基础设施管理员和租户管理员只能看见自己创建和导入的密钥对，sysadmin能看见该租户下所有的密钥对。 新建密钥 基础设施管理员、租户管理员和sysadmin可以新建密钥。 左侧导航栏选择「基础设施」-「密钥对」，点击「新建密钥」。输入密钥名称（只能是数字或字母），选择算法（RSA）以及长度，目前支持1024、2048和4096三个长度的密钥生成。点击「提交」，将在密钥对列表界面看到生成的密钥对。 导入密钥 可导入私钥和公钥在系统中保存以便随后使用（例如已经在虚拟机镜像中配置好对应的公钥）。点击「导入密钥」，输入密钥名称，填入私钥或/和公钥，点击「导入」，导入时，私钥或公钥必填一项。导入成功后，将在列表界面看到导入的密钥。 下载私钥 若公钥存在私钥（新建密钥公私密钥都存在）在列表中选择某密钥对，「下载私钥」按钮将变为可用，点击下载即可下载公钥所对应的私钥。 使用密钥对 OpenStack虚拟机模板中，若选择密钥对的验证类型，将选择系统中已存在的密钥对（新建生成或导入的），这里将只能选择公钥，私钥会被过滤。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/03基础设施管理/命名规则.html":{"url":"AdminDoc/03基础设施管理/命名规则.html","title":"命名规则","keywords":"","body":"命名规则 命名后缀是业务组中，服务部署名命名规则、云主机名命名规则、Windows主机名命名规则以及Linux主机名命名规则中后缀的组成部分。租户管理员创建的命名后缀可共享给所有业务组使用，业务组管理员只能创建本业务组使用的命名后缀。 查看当前命名后缀：在左边导航选择「基础设施」，选择二级菜单「命名后缀」，则显示当前的命名后缀。显示后缀名称、类型（数字或随机字符串）、长度、初始化序列、业务组等 添加命名后缀 点击「添加」，输入命名后缀名称、选择业务组、类型。业务组可选全部业务组，类型可以选择数字或者随机字符串 数字：填写长度或初始化序号 随机字符串：输入长度 点击「保存」，命名后缀添加成功 编辑命名后缀 选择某命名后缀，点击「编辑」，进行编辑后，点击「保存」。或可直接点击名称进入编辑页面。 删除命名后缀 选择某命名后缀，点击「删除」，可以删除尚未使用的命名后缀。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/03基础设施管理/物理主机管理.html":{"url":"AdminDoc/03基础设施管理/物理主机管理.html","title":"物理主机管理","keywords":"","body":"物理主机管理 您可以在左边导航选择「基础设施」，选择二级菜单「物理主机信息」，可以添加物理主机信息，对在云平台和暂时不在云平台上的物理机进行管理。 添加/编辑物理主机 进入点击「基础设施」-「物理主机信息」，点击「添加」按钮，选择平台（目前支持OpenStack、vSphere、物理服务器、PowerVC），输入物理主机相关信息： 基本信息：物理机名、IP地址、云平台、平台类型，点击「保存」，物理主机添加成功 物理机信息：填写物理机的相关信息，如制造商、型号、MAC地址等，全部均选填 对OpenStack和vSphere，如果所填的IP地址和实际云平台中的某台主机IP地址匹配，则会自动抓取物理主机资源信息，在下次编辑物理主机时在基本信息标签页可见。 SmartCMP会每天自动同步vSphere和OpenStack云平台下的所有物理主机信息到列表 查看物理主机信息 物理主机添加成功后，可在物理主机列表界面查看所有已添加的物理主机信息，点击名字可进入基本信息页面，通过输入的信息获取到该物理主机的资源信息、存储信息以及网络信息等。 删除物理主机信息 在物理主机列表页面，选择某物理主机，点击菜单栏中的「删除」，确认后将删除该物理主机信息。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/04组织架构管理/":{"url":"AdminDoc/04组织架构管理/","title":"组织架构","keywords":"","body":"组织架构 业务组是租户内的逻辑组织结构，支持创建多级业务组，用于在SmartCMP系统内对应企业的组织架构。业务组内关联该业务组所属的用户以及该业务组可使用的资源池。业务组是一个逻辑概念，有需要把用户、服务目录和资源配额联系在一起的实体都可以用业务组来对应，比如子公司，不同层级的部门等。系统默认创建Default业务组以及租户管理员、业务组管理员和业务组普通用户等。 业务组可以创建一个或多个项目。项目内的用户成员只能来源于项目所在业务组的成员，可互相访问项目成员创建的虚拟机。 租户提供资源的逻辑隔离，与管理边界分割。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/04组织架构管理/业务组.html":{"url":"AdminDoc/04组织架构管理/业务组.html","title":"业务组","keywords":"","body":"业务组 添加业务组 在左边导航选择「组织架构」-「业务组」，点击「添加」 输入业务组名称，选择上级业务组，输入业务组描述，点击「提交」，业务组添加成功，转至编辑业务组页面 概况 「概况」标签页：业务组主色调：选择某一颜色作为该业务组的主色调，该业务组发布的服务在服务目录中将显示设置的主色调颜色。若未设置，将由系统随机选择。服务部署租用时间范围：设置服务部署租用时间范围，最小值和最大值，最大值最小值任意留空则对应区间无限制。 服务租用时间到期后云主机将被自动关机。服务部署保留时间范围：设置服务部署保留时间范围，最小值和最大值，最大值最小值任意留空则对应区间无限制。 「Note」 服务部署保留时间到期后云主机将被放到回收站，支持管理员到回收站删除云主机，将资源释放；同时也支持还原操作，具体的操作，请参考，回收站章节。 此处设定的服务部署租用/保留时间范围将限制服务配置和申请服务时候用户能够选择的租期范围。最大可延期次数：允许用户延长租用到期时间的次数。服务到期后允许启动：勾选表示在服务部署到期之后，允许用户在延长租期之前启动该服务继续试用。云主机CPU、内存（GB）最大值。可启用向导式申请，快速申请服务。 用户 「用户」页面：关联用户，点击「关联用户」，勾选列表中的用户，点击「确定」，关联该用户到业务组。关联成功后，将在用户页面显示已关联用户，点击登录名将跳转至该用户界面。 移除用户：若该业务组中已有用户，在列表中选择某用户，点击「移除用户」，取消该用户和业务组的关联，该用户将不能查看、使用该业务组的资源。 关联角色：选择列表界面中的某用户，点击「关联角色」，勾选「业务组管理员」，点击「提交」，给该用户业务组管理员的角色。 资源池 「资源池」页面资源池与业务组进行关联，使得业务组内的用户可以申请这些资源。 添加资源池：点击「添加资源池」，勾选列表中的资源池，点击「确定」，关联该资源池和业务组的关系。 移除资源池：选择列表中的某资源池，点击「移除资源池」，「确定」后移除该资源池和业务组的关系。若有未卸除部署在该资源池上，将不能移除 规范 「规范」标签页：命名规范包括， 服务部署名命名规则：可设置业务组服务部署命名规则，在业务组成员申请服务时，根据规则自动生成服务部署名称。已有字段：业务组名、项目名、所有者名、时间戳（yyyyMMddHHmmss）、服务配置名、项目简称、业务组简称 云主机名命名规则：在SmartCMP或vCenter/OpenStack管理界面中的虚拟机显示名称。已有字段：IP地址、业务组名、项目名、所有者名、部署名、虚机蓝图节点名、OS主机名、项目简称、业务组简称 Windows主机名命名规则：Windows虚拟机hostname。已有字段：业务组名、项目名、所有者名、部署名、虚机蓝图节点名、项目简称、业务组简称 Linux主机名命名规则：Linux虚拟机hostname。已有字段：业务组名、项目名、所有者名、部署名、虚机蓝图节点名、项目简称、业务组简称 「Note」 虚拟机主机名不支持特殊符号，否则部署虚机可能失败Windows主机名命名规则所产生的Windows主机名超过15个字符将自动截取(15-后缀名长度)的字段,命名规则中有后缀部分，可以选择「基础设施」中已有的「命名后缀」组成。 公网IP名称命名规则：业务组名、项目名、所有者名、项目简称、业务组简称、云主机名。 申请规范：配置业务组在服务目录申请资源的规范，申请云主机CPU和内存最大值，留空表示无限制 资源配额 支持业务组的资源配额以满足控制部门级别资源配额的需求。业务组的配额与资源池的配额是独立的，当业务组配额较少，即使资源池还有额度，业务组成员在服务目录不能申请新的资源。注意：资源池可以配置比业务组更大的额度。 具体能够设置以下资源的额度：CPU、内存、存储、虚机数量，注意：首先要启用“是否启用资源配额”。 默认不启用：资源配额界面禁止输入，同时不计算已使用的资源数量 选择启用：上述资源可以设置配额，都是非必填项，只能输入大于等于零的整数，留空表示无限制，支持查看已使用配额（剩余最小是0，不会出现负数；如果某个配额是无限制，剩余也一直是无限制，使用率一直是0%）当新服务部署占用资源，或者Day2修改配置变更资源使用情况，或者更改业务组，相应的资源使用情况会产生变更。 「Note」如果之前一段时间业务组没有启用配额，但业务组有资源占用，则该业务组在启用配额之后，需要能显示已经使用的资源。子业务组的配额暂时独立，即不受父业务组的限制，可以单独配置。 预算配额 管理员可以为此业务组和/或个人配置每个月的预算，留空为无限制。当这个月的花费超过预算时，用户将不能申请新的云资源。 支持根据配置的策略对资源和资源申请进行控制。您可以实时在此页面查看，业务组云资源的使用率、资源用量和剩余数量。 具体操作步骤： 选择计时单位年或月，选择按月表示在每月1号清零已有，恢复初始值；选择按年表示在下一年的起始日清零已有，恢复初始值。 业务组配额管理，填写总预算，设定百分比，当业务组整体费用超过配置的总预算百分比，触发后续通知，系统将自动发送通知给业务组管理员。 用户配额管理：设置个人预算，设定百分比，个人预算使用到达阈值时，触发后续通知，将发送通知给用户。 预算策略：选择“预算用完后不能申请新的资源”，当业务组预算使用完时，业务组关联的所有用户将不能申请新的需要付费的资源。选择“预算用完后付费资源将自动关机” 例如：配置vsphere计费规则，部署vsphere云主机，配置业务组计费和个人预算，配置“预算用完后云主机关机策略”，当个人预算使用完时，属于个人的云主机将关机，关机后将根据业务组的保留时间进行保留；保留时间到期后，资源将被放入回收站。 个人预算续费：当用户费用使用完成之后，提交续费工单，管理员可进入进行配额修改，可在\"用户\"标签页针对每个用户进行修改。具体操作步骤：选择「用户」-「预算配置」标签页面，修改用户的个人预算。 「流程控制」页面：选择审批以及具体的审批模板或无审批 「云资源操作许可」及「服务部署许可」：参照在业务组中添加云资源操作许可及在业务组中添加服务部署操作许可 点击「保存」，业务组添加成功 查看当前业务组 在左边导航选择「组织架构」-「业务组」，可查看当前所有业务组。显示该业务组的名称、上级业务组、创建者以及创建时间等，可添加、编辑和删除业务组。 修改业务组配置 在左边导航选择「组织架构」-「业务组」，选择一个业务组，点击「编辑」按钮，输入需要修改的内容点击「保存」。 添加级连业务组 在添加业务组的UI中，您可以选择一个上级业务组，从而使得您的当前业务组加入到上级业务组中，实现一个级连的机构。(能且只能添加一个上级业务组)级连业务组可以实现组织机构的层级关系，您可以通过级连业务组对应到任意公司的任意的组织结构。 级连业务组拥有如下的特点： 子业务组所关联的用户，必须是父业务组的关联用户 每级业务组所关联的资源池相互独立 每级业务组所关联的服务目录相互独立 每级业务组所关联的部署和虚机相互独立 删除业务组 您可以根据下面的步骤来删除业务组: 在左边导航选择「组织架构」-「业务组」，选择一个业务组，点击「删除」按钮。 确认删除操作，点击「是」删除业务组 「Note」 删除业务组会删除该业务组下的脚本库、命名后缀、密钥对等，并将所有用户从该业务组中移除。删除业务组前请确保该业务组下的所有服务部署已经卸除成功，并移除业务组下所有资源池、删除所有发布与未发布的服务。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/04组织架构管理/项目.html":{"url":"AdminDoc/04组织架构管理/项目.html","title":"项目","keywords":"","body":"项目 添加项目 在左边导航栏选择「组织架构」-「项目」，点击「添加」 输入项目名称，选择所属业务组，点击「确定」 「用户」页面： 关联用户：点击「关联用户」，勾选用户，点击「确定」，关联该用户到项目。关联成功后，将在项目页面显示已关联用户，点击登录名将跳转至用户界面 移除用户：若该项目中已有用户，在列表中选择某用户，点击「移除用户」，取消该用户和项目的关联 关联角色：选中某个用户，点击「关联角色」，选择项目管理员，点击「提交」，给该用户项目管理员的角色 点击「保存」，项目创建成功 编辑/删除项目 您可以根据下面的步骤来编辑项目:在左边导航选择「组织架构」-「项目」，在列表中选择一个项目，点击「编辑」按钮，或点击项目名称，进入项目详情页面，输入需要修改的内容点击「保存」。 您可以根据下面的步骤来删除项目: 在左边导航选择「组织架构」-「项目」，选择一个项目，点击「删除」按钮，确认删除操作，点击「是」删除项目，项目删除成功。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/04组织架构管理/用户.html":{"url":"AdminDoc/04组织架构管理/用户.html","title":"用户","keywords":"","body":"用户 在左边导航选择「组织架构」-「用户」，该页面显示当前租户下的所有用户，显示用户登录名、用户姓名、用户邮箱、登录方式、业务组、组织单位、用户状态、创建时间、到期时间等。可对用户进行添加、编辑、重置密码和删除等操作。可通过搜索进行快速定位。 添加用户 在左边导航选择「组织架构」-「用户」，点击「添加」，选择登录类型：本地/根据系统配置，进入创建用户基本信息界面（若系统配置配置了LDAP登录方式，也将可选） 「基本信息」界面：输入用户姓名、登录名、邮箱和密码等必填项，手机号码、QQ号、联系人姓名、联系人名称、到期时间（指定到期时间自动禁用）等选填 「角色」界面：默认用户为租户成员，系统默认有软件架构师、基础设施管理员、租户管理员等角色，您也可自定义角色，为该角色分配相应的权限，具体参照角色章节。勾选某角色后，会显示该角色所对应的实体对象和权限范围 「关联业务组」页面：勾选业务组，将该业务组与用户关联（创建业务组详见添加业务组 点击「保存」，用户创建成功 编辑用户 在左侧导航栏点击「组织架构」-「用户」，选择一个用户，点击「编辑」按钮，输入需要修改的内容，点击「保存」。 重置密码 在左侧导航栏点击「组织架构」-「用户」，选择一个用户，点击「重置密码」按钮，输入新密码、确认密码，点击「提交」。用户再次登录时需要输入新密码。 删除用户 在左侧导航栏点击「组织架构」-「用户」，选择一个用户，点击「删除」按钮，弹出删除提示框点击「是」，提示删除用户成功。 禁用/启用用户 在左侧导航栏点击「组织架构」-「用户」，选择一个用户，点击「禁用」按钮，弹出提示框点击「是」，提示用户禁用成功。 用户被禁用后，不能登录系统，登录系统时在登录页提示「用户已禁用」。 用户被禁用后，可以被启用，在左侧导航栏点击「组织架构」-「用户」，选择一个被禁用用户，点击「启用」按钮，启用后可以重新登录。 导入AD用户 左侧导航栏点击「组织架构」-「用户」，点击「添加」，出现选择LDAP用户页面。 左侧可选择OU，在右侧可选择将用户批量添加至相应的业务组中，点击「导入」，添加LDAP用户完成。也可以按照关键字进行过滤。 「Note」支持AD账号自动同步 LDAP登录类型 进入菜单「系统管理」-「系统配置」，在系统配置中，用户可以配置当前租户的登录类型。当前租户可以支持的登录类型有： 本地登录、LDAP/Microsoft Active Directory 选择本地登录，SmartCMP将使用本地数据库来对登录用户进行身份认证 选择LDAP/Microsoft Active Directory， SmartCMP将使用OpenLDAP或Miscrosoft AD 对登录用户进行身份认证 如果选择LDAP/Microsoft Active Directory，将出现LDAP的配置界面 目录服务器地址: OpenLDAP或Miscrosoft AD 的主机地址（可输入多个域控地址，以逗号分隔） 目录服务端口: 如果是OpenLDAP, 请使用389端口；如果是Miscrosoft AD， 请使用3268端口 域名：请使用LDAP的语法输入域名，例如，您的域名是\"cloudchef.io\", 这里的域名应该是\"dc=cloudchef, dc=io\" 管理员用户名:请使用 \"账号\\@域名\"的方式，例如: \"administrator\\@cloudchef.io\" 管理员密码：请输入您的管理员密码 目录搜索属性：这是根据您的LDAP的服务器的定制。我们提供了默认的搜索属性： 对于MicroSoft AD，我们默认使用sAMAccountName和 userPrincipalName 来搜索匹配您的账号信息 对于OpenLDAP，我们默认使用cn或uid来搜索匹配您的账号信息，如果您的服务器有额外的配置，请在这里输入您使用的搜索属性 若勾选「允许本地同时登录」，则本地用户和LDAP用户可以同时登录 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/04组织架构管理/角色.html":{"url":"AdminDoc/04组织架构管理/角色.html","title":"角色","keywords":"","body":"角色 SmartCMP混合云应用管理平台支持多种角色的权限设置，系统已有基础角色包括： 最高权限：系统管理员 租户级别：租户管理员、软件架构师、基础设施管理员和租户成员 业务组级别：业务组管理员和业务组成员 项目级别：项目管理员和项目成员 如图示展现角色之间的逻辑关系： 系统管理员和租户管理员可以在「组织架构」-「角色」页面内添加、删除、编辑角色权限。角色管理完成后，系统管理员可以在「组织架构」-「用户」页面内管理用户，并根据需要为用户分配相应的角色。 在左侧菜单栏中点击「组织架构」-「角色」。角色列表界面，可以查看当前租户的所有角色信息，显示角色的名称、角色范围、描述等。可添加、编辑、删除角色，并管理权限。 创建自定义角色 在左侧菜单栏中点击「组织架构」-「角色」，点击「添加」，进入创建角色界面中。输入角色名称、描述信息，选择相应的角色权限范围，给相应的实体对象赋予不同的权限。点击「保存」生成新的角色，点击「返回」放弃创建角色。 角色的权限范围支持租户级别。 「Note」对某一个实体对象只有读取权限，则看不到左侧菜单栏相应的菜单项。 编辑自定义角色 在角色列表界面中，选中一个自定义角色，点击列表上面的「编辑」，即可打开编辑自定义角色界面。 系统默认的角色不能编辑，自定义角色可以编辑，编辑完成后点击「保存」；点击「返回」，将不进行任何修改。 删除自定义角色 在角色列表界面中，选中一个自定义角色，点击列表上面的「删除」，弹出提示窗口，点击「是」即可删除该自定义角色。 系统默认的角色不能删除。 「Note」假如该角色仍然被其他用户所关联，则不允许删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/04组织架构管理/服务团队.html":{"url":"AdminDoc/04组织架构管理/服务团队.html","title":"服务团队","keywords":"","body":"服务团队 服务团队是工单服务管理过程中处理工单任务的服务人员集合，支持租户管理员指定一个或多个用户成为服务团队的成员。当用户通过服务目录申请需要人工介入的手工工单服务之后，根据预先配置的服务流程，相应的服务团队将接到工单进行处理。 服务团队中的指定人员收到工单请求之后，可以进行转派，也可以进行线下处理，任务完成之后更新工单状态，系统将自动通知用户，同时用户可以主动实时关注处理进程。 服务团队涉及到的功能点具体表现： 租户管理员可以创建、编辑、删除多种类型的服务团队 租户管理员可以自定义关联的用户和解除关联的用户 用户申请工单之后，相应的服务团队将接到工单进行处理 支持处理工单任务的人员之间相互指派工单任务，协同处理工单任务，也可以进行线下处理，处理完成之后更新工单状态，工单进入已处理状态。 添加服务团队 在左边导航选择「组织架构」-「服务团队」，点击「添加」，创建团队名称和描述，填写完成点击提交，进入基本信息界面。 「基本信息」界面：输入团队名称必填项，选填团队描述。 点击用户进入「用户」页面：自定义关联用户和移除关联用户。点击关联用户，勾选相应的用户，点击保存即可关联成功。 点击「保存」，服务团队成功 查看服务团队 在左边导航选择「组织架构」-「服务团队」，该页面显示当前租户下的所有服务团队，显示团队名称、描述、创建者、创建时间等。 可对服务团队进行添加、编辑、删除等操作。 可通过搜索进行快速定位。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/05服务建模/":{"url":"AdminDoc/05服务建模/","title":"服务建模","keywords":"","body":"服务模型 在SmartCMP中，一切服务基于蓝图建模来定义标准的服务框架与组件，SmartCMP提供丰富的开箱即用的软件组件，以可视化的形式编排蓝图，提供自定义表单，为任意服务定义参数和字段，灵活的为各项服务配置资源满足用户多样的需求；同时提供内置的流程设计器，让用户能够以可视化拖拉拽的方式设计服务流程和审批流程，帮助用户准确和快速的完成流程策略设计。 管理员将服务分组通过服务目录发布企业或组织需要的IT产品和服务，提供给用户自助申请。服务建模为各项服务配置资源、参数、自动化的工作流程和审批策略，实现自动化部署。 下图描述了如何组合组件、构建蓝图、服务配置、服务分组和发布的全过程。软件架构师组合软件组件和基础架构组件构建云服务的蓝图，管理员为服务配置资源和参数，IT支持管理员定义流程并指定服务团队，将服务分组并发布到服务目录。业务组成员在服务目录中根据实际需求进行自助申请。 「Note」服务申请的具体操作，请您参考：云服务管理 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/05服务建模/组件库.html":{"url":"AdminDoc/05服务建模/组件库.html","title":"组件库","keywords":"","body":"组件库 SmartCMP云管平台的云组件拥有“将任意资源”提供服务化的核心能力，无论是软件、基础设施还是容器资源，不同类型的云资源都可以组件化。组件的定义采用面向对象的设计方法，使用统一的数据结构进行建模，并将配置属性标准化。不仅内置丰富的组件资源和常用的操作，还拥有高度可扩展的能力，根据用户需求灵活自定义添加组件资源和配置运维操作。 SmartCMP内建了大量常用的组件，同时，软件架构师也可以根据需要创建可重用的软件组件，并使用操作脚本准确指定在部署操作过程，支持随时重新编写这些操作脚本并实时发布，同步更新已安装的软件组件。通过定义属性并将属性作为参数传递给操作脚本，以便在不同的环境中部署软件组件，而无需修改脚本。支持使用Linux Shell，Python，Ansible，PowerShell，Ruby等语言来自定义软件组件，并且自定义软件组件的生命周期操作（包含创建，配置，启动，停止，删除、备份、巡检等等），系统内置创建，配置和启动操作，在移除的时候调用停止和删除操作，并且支持灵活自定义操作，实现软件和应用的全生命周期管理。 SmartCMP中的组件由属性和接口构成,软件组件由脚本、属性、元数据、生命周期管理四项共同组成，灵活的软件组件，可以关联主流制品库。具体概念如下： 脚本：生命周期的每个阶段都通过脚本来进行控制，得益于强大的底层类库，SmartCMP支持包括Shell,Powershell,Ruby,Python等语言，可以快速将应用的部署整合在云管平台内； 属性：不同应用系统对资源的需求和容量的控制都会有自定义要求，属性项可以按照不同系统的部署要求传递自定义参数。软件架构师可以通过设置自定义属性，将应用组件需要您填写的配置参数暴露在申请界面上，SmartCMP云管理平台会自动化调用相关参数执行应用的安装配置； 操作：SmartCMP云管理平台可以对应用系统的创建、配置、启动、停止、删除等过程进行完整的生命周期管理。通过脚本对应，完成从安装部署到到期卸载的所有软件配置工作。 软件组件与主流制品库关联，支持对接Jfrog Artifactory, Nexus制品库，实现软件版本的更新。 组件也是构成蓝图的基本单元，SmartCMP自定义的软件组件，可以可视化的放置到SmartCMP的蓝图 软件架构师可以通过组件管理界面管理组件。在左边导航选择「服务建模」-「软件组件」，右侧浏览区域出现所有组件列表。通过拖拽的方式组合组件，形成蓝图部署服务的编排。 丰富的组件库 开箱即用的组件资源。SmartCMP云管平台内置大量常用的组件资源，包括IaaS（不同云平台的云主机、网络、存储等等）、PaaS（服务器、数据库、RDS等等）、容器（Kubernetes、Docker）、软件(MySQL、Oracle、Nginx等等)、代理（监控代理、自动化代理），不同类型资源在统一的界面进行创建和管理，采用树形结构的分组目录，支持自定义组件分组，支持二次编辑、快速复制、导入、导出组件。 树形展示,支持组件的分组目录，支持树形结构，可以在创建组件和组件列表搜索树形展示。在组件列表页的树形图可以增删改，已存在组件目录不能删除。 树形结构是一个逻辑的文件夹的概念，与组件的资源类型没有绑定的关系。 树形结构允许用户调整，比如有的用户一级是云平台，二级是该云平台下的计算、存储、网络组件；而有的用户一级是计算、网络、存储等，二级是各个云平台。具体内容： Iaas 用于描述所有的Iaas的组件, 每个组件有自己的云平台类型,Iaas下的二级节点主要包括: 计算, 网络, 存储, 对象存储, 负载均衡, 安全组, 文件系统等 默认增加如下子类 云主机 存储 OSS: 对象存储 Disk: 块存储 NAS Network: 网络 Subnet：子网 Router：路由 SecurityGroup：安全组 防火墙 负载均衡 (F5 的Pool 和SNATPool放这) 负载均衡监听器 浮动IP 域名 网关 Paas 用于描述所有的Pass的组件, 每个组件有自己的云平台类型,Paas下的二级节点主要包括云平台提供的服务能力, 默认增加如下子目录 Web APP MQ Cache:缓存 RDS NoSQL BigData：大数据服务 Container，用于描述所有的容器平台的组件 Docker Kubernetes 软件组件 用于描述所有的Software的组件, 每个组件有自己的云平台类型, 软件分为两种类型, 一种是二进制安装的软件, 运行在机器里面, 一种是容器镜像软软件, 运行在容器里面 容器镜像组件可以通过类型进行区分， 增加一个属性resource.software，来标记这个软件运行在机器里面还是容器里面。 默认增加如下子目录 Web APP MQ Cache:缓存 RDS NoSQL BigData：大数据服务 代理，表示所有的代理组件, 包括自动化组件, 监控组件等, 用于后续的代理管理 包括监控代理和自动化代理 「Note」 监控组件:若需要使用云平台监控查看云服务器指标数据并且产生告警，需在云服务器上正确安装监控组件，云服务器指标数据采集依赖于监控组件。 编辑组件，选中组件列表中某组件可以进入编辑组件视图。编辑组件和创建组件类似，为了保证已使用该组件创建的蓝图不会因为组件的更新而无法使用，在编辑时，组件每个子视图中都有一些项目不允许改动。编辑组件的过程中随时点击「返回」按钮放弃编辑组件。 导入组件，您可以根据以下步骤进行导入组件操作： 在左边导航选择「服务建模」-「软件组件」 点击「导入」按钮 点击「浏览」，选择本地组件（ZIP格式），点击「提交」 组件导入成功 导出组件，您可以根据以下步骤进行导出组件操作： 在左边导航选择「服务建模」-「软件组件」 选择组件列表中的某一组件，菜单栏上的「导出」按钮将变得可用，点击「导出」 组件导出成功 复制组件，您可以根据以下步骤进行复制组件操作： 在左边导航选择「服务建模」-「软件组件」 选择组件列表中的某一组件，菜单栏上的「复制」按钮将变得可用，点击「复制」 进入复制组件的编辑页面，可更改基本信息、属性、脚本列表以及节点接口信息。组件名字需要修改，组件不允许重名 删除组件，您可以根据下面的步骤来删除组件： 在组件列表视图中，选中待删除组件 在列表工具栏中点击「删除」按钮后，在确认对话框中确认后，组件会被删除 创建组件 SmartCMP云管平台支持用户根据需求创建可重用的组件，将任意资源组件化以及将配置组件的过程标准化，包括定义资源类型，定义版本，定义属性，定义组件的操作等等，并且所有的配置界面都开放给用户自定义。 例如：DBA在创建数据库集群时，需要部署Oracle数据库，DBA可根据需求在组件库添加Oracle组件，配置组件，包括配置组件基本信息、属性、脚本、操作（指定数据库的创建、启动、停止、重启、删除等等操作），具体描述如下，软件架构师可以根据下面的步骤来创建组件： 在组件列表的工具栏点击「添加」按钮进入创建组件视图 创建组件视图包含「基本信息」「属性」「脚本列表」「操作」「历史版本」「制品」 组件基本信息 在「基本信息」视图，您可以提供组件名称、描述、组件版本、组件类型（类型来源组件分组，例如Container、PaaS、IaaS、Agent、Software等等）云平台信息和上传图标，还可添加该组件的说明信息. 勾选制品之后，可以通过「制品」标签页选择二进制软件制品仓库，进行软件版本的配置。具体步骤，参考关联主流制品库 勾选实例化，勾选后该组件可通过“蓝图设计”进行编排。软件架构师可以通过组件管理界面管理组件。在左边导航选择「服务建模」-「软件组件」，右侧浏览区域出现所有组件列表。添加的软件组件，勾选实例化之后会出现在组件列表里以供选择组合组件，形成蓝图部署服务的编排。 「Note」 组件的设计，采用面向对象思想设计的结构，面向对象具有封装、继承和多态三大特性。继承可以使得子类别具有父类别的各种属性和方法，而不需要再次编写相同的代码。在令子类别继承父类别的同时，可以重新定义某些属性，并重写某些方法，即覆盖父类别的原有属性和方法，使其获得与父类别不同的功能。当选择组件类型Software，则创建的组件具有父类软件组件的各种属性，也可以通过自定义属性，使其获得与父类不同的功能。需要注意的是自定义添加的属性键值和父组件中的属性键值不能相同，否则将覆盖父组件中的属性定义。 组件属性 在「属性」视图，您可以添加组件的属性，添加完成后可将其作为参数传递给操作脚本。 「Note」面向对象思想设计 多态指同一个操作，由于传入的参数不同产生差异化效果。例如：当创建组件Oracle时，不同应用系统对Oracle的部署需求和参数控制都会有特定的需求和自定义要求。“属性”可以按照不同系统的部署要求，通过设置自定义属性，将应用组件需要填写的配置参数暴露在界面配置上，传递自定义参数。当自动化部署Oracle时，SmartCMP云管理平台会自动化调用相关参数执行应用的安装配置，达到不同数据集群对Oracle部署的不同要求。 属性由主键、类型、默认值、备选项和描述组成。可在备选项中添加可选值，使得您在申请服务的时候，只能从默认值和备选项中定义的值中进行选择。可以创建要求使用字符、浮点数、密码、布尔或整数值的软件属性，支持设置校验规则，输入正则表达式则输入的属性参数必须接受表达式的校验。（ 整数类型 : 对零以及正整数或负整数使用整数属性类型。布尔类型: 使用布尔属性类型在“值”下拉菜单中提供 True 和 False 这两个选项。） 脚本列表 在「脚本列表」视图，您可以通过创建新文件添加脚本文件。这些脚本文件应该和组件接口中的某个操作关联，或者被其它的脚本文件引用。同时，您可以添加文本文件，这些文本文件一般用来提供组件的配置信息。多次点击创建新文件可以添加多个文件，输入文件名、文件类型后点击操作-编辑内容，可以在右面编写文件内容。 操作 在「操作」视图，您可以将「脚本列表」视图中添加的脚本文件关联到组件的对应操作上，每个操作动作下实现-请选择下拉列表中选择这个操作对应的脚本文件。内置的操作有配置、创建、删除、启动、停止等等。 「Note」操作可继承。（以刷新操作为例，系统提前配置完成，组件刷新操作所使用的实现方式、脚本、任务和刷新必须的参数。）内置的操作可应用于平台上的任意资源。因此，在创建组件Oracle时，将自动继承内置的“启动、停止、重启、删除、刷新”操作。封装指隐藏复杂操作的实现细节，仅对外提供公共的访问方式。平台将复杂的操作内置，开箱即用，降低差异性和理解难度。例如：“调整虚机配置”操作(调整虚拟机的计算规格和云平台规格)，同一个“调整虚机配置”操作当云平台类型不同时，SmartCMP云管平台隐藏资源操作的流转细节，只暴露公共的访问接口。例如：“调整虚机配置”操作应用在Hyper -V平台的虚拟机和OpenStack平台的虚拟机上，具体的技术实现方式不同，但是用户配置界面，显示相同内容，配置简单，易用性强。 同时，您也可以在这里添加更多的组件操作，并且进行相应的脚本文件关联。添加组件操作点击操作右侧的添加按钮。所有必填项都添加好了之后，点击保存按钮生成新的组件，在组件列表上可以看到新添加的组件。添加组件的过程中随时点击「返回」按钮放弃添加组件。 生命周期操作 描述 示例 创建 创建软件 创建 Tomcat 服务，为“创建”生命周期操作编写的脚本将在首次安装软件时运行。 配置 配置软件 配置Tomcat，设置 JAVA_OPTS 和 CATALINA_OPTS。配置脚本会在安装操作完成后运行。 启动 启动软件 使用 Tomcat 服务器中的启动命令启动 Tomcat 服务。启动脚本会在配置操作完成后运行。 停止 停止软件 使用 Tomcat 服务器中的停止命令停止 Tomcat 服务。停止脚本会在启动操作完成后运行。 删除 删除软件 在应用程序中执行特定操作，然后再销毁部署。删除脚本会在销毁软件组件后运行。 配置操作 内置大量常用操作的同时，支持自定义组件的操作，配置界面开放给用户，包括自定义操作的实现方式（支持Python、Shell、Ansible、Terraform、任务）、脚本（脚本来自于自定义的脚本文件）、过滤条件（自定义过滤条件，当满足过滤条件时，操作才生效，例如：当磁盘为挂载状态时，才能做分离操作；虚拟机是关机状态才能做关机操作）、操作分组（与云主机运维操作分组相同）以及执行的具体参数配置（超时时间和最大重试次数）。 例如：自定义备份操作。如下图，自定义操作基本信息，在脚本列表自定义“备份脚本backup.sh”，在配置操作时，选择脚本backup.sh，将脚本与操作绑定，并选择操作方式为“Shell”。 软件组件的表单配置：在软件组件中能够给\"创建\"操作和其他自定义操作配置参数和表单。配置参数表单的时候, 也能够直接显示表单的预览，以满足多样的需求。 版本管理 当您更新组件时，每次更新的版本将会被记录下来，支持回退到历史版本，具体操作步骤如下： 组件列表的工具栏点击「任意组件」按钮进入软件组件视图 在「历史版本」视图，您可以看到所有的历史版本，当您做出修改时，平台会默认记录您的历史版本信息包括：版本号、版本描述、创建人和创建时间 您可以勾选相应的版本v1，点击「恢复版本」一键从版本v2回退到历史版本v1，点击「保存并同步」则同步组件信息。 同时也支持一键删除任意历史版本，勾选要删除的版本，点击「删除」确认删除即删除成功。 关联主流制品库 支持软件组件与主流制品库关联，支持对接Jfrog Artifactory, Nexus制品库匹配包管理平台，实现软件版本的更新 包管理工具的版本支持latest标记, 表示使用最新版本。 在「制品」视图，您可以选择 入口、仓库（Jfrog Artifactory、Nexus）、组、名称、版本（默认选择latest代表最新版本） 点击保存按钮，即可将组件与包管理平台进行关联。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/05服务建模/蓝图设计.html":{"url":"AdminDoc/05服务建模/蓝图设计.html","title":"蓝图设计","keywords":"","body":"蓝图设计 软件架构师可以通过蓝图管理界面以可视化的方式设计出基于TOSCA标准的应用蓝图。蓝图是对应用的抽象。蓝图包含应用的拓扑、工作流以及策略三部分。蓝图是系统核心的概念，整个系统都是围绕着蓝图管理。 蓝图 您可以根据下面的步骤来查看当前租户的蓝图: 在左边导航栏选择「服务建模」-「蓝图设计」，出现蓝图列表。有添加、复制、发布、取消发布、导入、导出和删除操作，发布和取消发布操作根据蓝图状态动态可用，若蓝图处于已发布状态，在取消发布操作可用。发布操作同理 蓝图列表可以按照名称、状态、创建时间排序。可以按照蓝图名称进行搜索 内建蓝图 目前SmartCMP内建了典型的vSphere、OpenStack、Kubernetes蓝图以方便您使用，您可以在创建服务配置时直接使用这些内建的蓝图。在左边导航栏选择「服务建模」-「蓝图设计」，出现蓝图列表，创建者为系统的蓝图为系统内建蓝图。 可视化编辑器概览 点击蓝图名称或添加新蓝图将进入可视化编辑器。 可视化编辑器包括以下几个部分： 组件列表面板： 组件列表包含SmartCMP支持的云基础架构的各个组件，以及您自定的组件。在SmartCMP组件视图中出现的所有组件都在「自定义组件」面板中。您可以选中任意一个组件，然后将它拖放到画布中 画布：可视化蓝图的核心部分，您可以将组件拖放到画布上，不同的组件之间可以在画布上建立连接以定义组件之间的关系 基本信息面板：包括蓝图的名称，描述和图标信息。您可以对其进行更改 输入面板：管理蓝图里的所有输入项 输出面板：管理蓝图里的所有输出 选中组件的组件信息面板：包含选定组件的基本信息、参数等 组件的添加与设置 组件被拖放到画布上后，组件就被添加到蓝图中，在组件选中后，在组件信息面板里就可以编辑组件。编辑可以在以下子视图中进行： 基本信息：可以在基本信息里看到组件的类型，同时可以对组件的名称进行编辑 参数：组件的参数列表，包括组件自身的参数和从父节点继承的参数，可以在这里对参数进行设置 功能：组件的功能列表，表示组件可以提供的功能，一旦有其它的组件需要功能列表里的功能作为前提条件，那么就可以建立其它组件到该组件的连接以提供该功能给其它组件 前提条件：组件需要的潜在功能列表，一旦列表里的功能被完全或者部分满足，该组件就可以运行工作，您在这里建立和其它组件的连接关系，以满足自身的需求 连接：组件的所有连接列表，一旦前提条件里的某个组件需要的功能被满足，对应的连接就会出现在这里，您可以在这里对这一连接进行编辑和删除操作 组件的删除 组件被拖放到画布上后，若要删除组件，在组件上单击鼠标右键，在弹出的上下文菜单中可以删除组件。 云平台组件及连接说明 vSphere 云平台组件连接说明 Network 与Server连接时将Server的Network节点与Network组件的link节点相连 Disk 挂盘时需将Disk组件拖拽到Server内 Lswitch NSX逻辑交换机可在完全脱离底层硬件的虚拟环境中再现交换功能（单播、多播和广播）。 将Lswitch与Server/WindowsServer节点相连 DLR NSX逻辑(分布式)路由器，使用时将DLR与Lswitch相连 SecurityGroup NSX安全组，使用时将SecurityGroup与Server/WindowsServer节点相连 LoadBalancer 将VirtualServer内置于LoadBalancer内，使用时将LoadBalancer的edge节点与Edge相连 VirtualServer 将VirtualServer内置于LoadBalancer内，使用时将VirtualServer的Server节点与Sever相连 OpenStack 云平台组件连接说明 Network 与Server连接时将Server的Network节点与Network组件的link节点相连 Router 路由，使用时将Router的Network节点与Network组件的route节点相连 FloatingIP 浮动IP:使用时与Server组件的floatingIP节点相连接 Volume 使用时将Volume组件拖拽到Server内 SecurityGroup 安全组，使用时将Server组件的Security_Group节点与SecurityGroup相连 LoadBalancer 负载均衡，使用时将Listener内置于LoadBalancer，通过Listener与Server相连 Firewall 防火墙，单独部署 Listener 负载均衡监听器，使用时将Listener内置于LoadBalancer，将Listener的Server节点与Server相连。LoadBalancer中可内置多个Listener, Listener可与多个Server相连 DNS 域名系统，单独部署 PowerVC 云平台组件连接说明 Network 与Server连接时将Server的Network节点与Network组件的link节点相连 Volume 使用时将Volume组件拖拽到Server内 物理服务器 Server Network Kubernetes 云平台组件连接说明 Deployment 为POD和ReplicaSet 提供了一个声明式定义方法，方便管理应用Container 容器，使用时将Containier组件拖拽到Deployment内 Nginx- Container 容器，使用时将Nginx-Containier组件拖拽到Deployment内，使用时其config_Map连接到ConfigMap Service Service 定义了这样一种抽象：一个 Pod 的逻辑分组，一种可以访问它们的策略 — 通常称为微服务。使用时将该组件的Deployment节点连接至Deployment组件 Ingress 给 service 提供集群外部访问的 URL、负载均衡、SSL 终止、HTTP 路由等。使用时将该组件的Service节点连接至Service组件 PersistentVolumeClaim 请求存储资源。使用时将Container的pvc节点连接至该组件 ConfigMap 用于保存配置数据的键值对，可用于保存单个属性或保存配置文件。使用时将Nginx-Container的ConfigMap节点连接至该组件 Secret 解决密码、token、密钥等敏感数据的配置问题。使用时将Container的Secret节点连接至该组件 ServiceEndpoint 使用时将Container的service_endpoint节点和ServiceEndpoint的container节点相连，然后将ServiceEndpoint 的software_component节点与软件组件相连 DaemonSet 保证在每个Node上都运行一个容器副本，常用来部署一些集群的日志、监控或者其他系统管理应用。使用时将Container内置于DaemonSet中 StatefulSet 为了解决状态服务的问题，使用时将Container内置于StatefulSet中 Docker Container Docker容器，可在组件参数中填入镜像名称，与其他组件相连时将组件的Dependency节点与容器的feature相连 阿里云 云平台组件连接说明 SecurityGroup 使用时将Instance组件的dependency节点与SecurityGroup相连 Disk 需将Disk组件拖拽到Instance内 LoadBalancer 使用时将Instance组件的dependency节点与LoadBalancer相连 阿里专有云 SecurityGroup 使用时将Instance组件的dependency节点与SecurityGroup相连 Disk 需将Disk组件拖拽到Instance内 LoadBalancer 使用时将Instance组件的dependency节点与LoadBalancer相连 腾讯云 SecurityGroup 使用时将Instance组件的Security_group节点与SecurityGroup组件的Security节点连接 青云 SecurityGroup 使用时将Instance组件的Security_group节点与SecurityGroup组件的Security节点连接 Volume 请求存储资源。 物理服务器 Server Network Disk 磁盘 Network 网络 AWS 云平台组件连接说明 Instance 使用时将Instance组件的Security_Group节点与SecurityGroup相连 WindowsInstance 使用时将WindowsInstance组件的Security_Group节点与SecurityGroup相连 Volume 请求存储资源。无节点 RDS 数据库实例是在云中运行的独立数据库环境。无节点。 S3Bucket 存储组件 SecurityGroup 使用时将Instance组件的Security_Group节点与SecurityGroup相连 Azure 云平台组件连接说明 Instance 将Instance的virtualNetwork节点和VirtualNetwork的Link节点相连 WindowsInstance 将WindowsInstance的virtualNetwork节点和VirtualNetwork的Link节点相连 LoadBalancer 使用时，将LoadBalancerRule内置于LoadBalancer中，通过LoadBalancerRule与Instance相连 LoadBalancerRule 使用时将LoadBalancerRule内置于LoadBalancer中，将LoadBalancerRule的instance节点与Instance的loadBalancer_rule相连 AvailabilitySet 可用性集，将Instance的availability_set节点和AvailabilitySet的instance节点相连 BlobContainer 块存储 Disk 磁盘 SecurityGroup 使用时将Instance组件的Security_group节点与SecurityGroup组件的Security节点连接 F5 云平台组件 连接说明 BIG-IP LoadBalancer 负载均衡，使用时将该组件的Application节点连接至Server SNATPool 负载均衡，使用时将该组件的dependency节点连接至Server Pool 负载均衡，使用时将该组件的pool节点连接至Server VirtualServer 负载均衡，使用时将该组件的virtualserver节点连接至Server ACI EPG 软件组件 「软件组件」中自定义的软件 Exporter 「软件组件」中自定义的Exporter 抽象云组件 抽象云组件是SmartCMP设计的一个通用的方案, 能通过通用或者扩展的方式接入任何一个云平台的计算, 存储和网络. 为了提升这个方案的通用性, 提取每个云平台通用的属性, 这些属性包括Linux/Windows Server, Network/Subnet, Disk，这些属性对应下面这些云组件 SecurityGroup ObectStorage LoadBalancer Volume Network WindowCompute Compute 连接的建立 在组件信息面板-前提条件，添加连接。 在蓝图中添加。画布上的所有组件和连接构成了蓝图。当一个组件被拖放到蓝图中后，组件的左边框和右边框上就会创建组件的「连接点」。在左边框上的连接点对应于组件的功能列表，在右边框上的连接点对应于组件的前提条件列表。因此，您可以用鼠标选择右边框上的「前提条件」连接点，这个时候，系统就会给出蓝图中所有潜在的可连接的「功能」连接点，您可以选择其中的某一个进行连接。 连接的编辑 参见 组件的添加和设置 连接的删除 在组件信息面板中删除：任何类型的组件连接均可以在这里删除。在「组件信息面板」「连接」中选定连接，点击删除。 在蓝图中删除：选中某一个连接，单击鼠标右键，在弹出的上下文菜单里可以删除选中的连接。绝大部分的连接都可以这样删除。 「Note」：虚机和网络组件，虚机和存储组件的连接是例外，不可以通过这种方式删除。 创建蓝图 创建vSphere单节点蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择vSphere栏目下的Server和Network组件，分别将他们拖拽到右边的画布区域中 定义网络：点击Server右边的network节点拖拽到Network的link节点上，建立server和network的网络连接 点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的vSphere蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，vSphere虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建VMware NSX 蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择vSphere栏目下的Server、Lswitch、DLR、SecurityGroup组件，分别将他们拖拽到右边的画布区域中 点击Server右边的lswitch节点拖拽到Lswitch的节点上（显示绿色），建立server与Lswitch的连接 点击DLR右边的lswitch节点拖拽到Lswitch的节点上，建立DLR与Lswitch的连接 点击SecurityGroup右边的Server_WindowsServer节点拖拽到Server的节点上，建立SecurityGroup与Server的连接 点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 点击「保存并发布」，发布蓝图，提示蓝图发布成功 创建vSphere MySQL带监控蓝图 创建应用软件部署和带应用监控的蓝图，以部署一台vSphere上的虚拟机、并安装MySQL以及MySQL监控为例: 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择vSphere栏目下的Server和Network组件，分别将他们拖拽到右边的画布区域中 定义网络：点击Server右边的network节点拖拽到Network的link节点上 添加组件：从左边的组件列表中选择软件组件栏目下的MySQL和MySQLExporter组件，拖动至server节点框内，选择连接的名称，点击「完成」 添加依赖关系：点击MySQLExporter右侧的节点拖拽到MySQL左侧的feature节点上，添加MySQLExporter与MySQL的依赖关系 验证蓝图：点击左上角「验证」，验证蓝图的合法性 保存并发布：点击左上角的「保存并发布」，发布蓝图 根据下章6.4服务配置步骤，选择刚发布的蓝图，发布服务目录 服务目录申请，经业务组流程（审批）后部署，部署成功后可查看MySQL组件的监控信息 创建OpenStack单节点蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择OpenStack栏目下的Server和Network组件，分别将他们拖拽到右边的画布区域中 定义网络：点击Server右边的network节点拖拽到Network的link节点上 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的OpenStack蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，Openstack虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建OpenStack Firewall蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Openstack栏目下的Firewall组件，将它拖拽到右边的画布区域中 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的OpenStack Firewall蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，Openstack Firewall虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建OpenStack LoadBalancer with SecurityGroup蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Openstack栏目下的Server、Network将它们拖拽到右边的画布区域中，点击Server右边的network节点拖拽到Network的link节点上，建立Server节点和Network的连接 从左边组件列表Openstack栏目下，选择LoadBalancer组件到右边的画布区域，再将Openstack栏目下Listener拖动至LoadBalancer节点框内，点击「完成」，建立负载均衡监听器（Listener）和负载均衡器（LoadBalancer）的内置关系 点击Listener右边的server节点拖拽至Server的server节点上，建立Listener和Server节点的关联关系 从左边组件列表Openstack栏目下，拖动SecurityGroup组件到右边的画布区域，点击Server组件右边的security_group节点到SecurityGroup左边的security节点上，建立Server与SecurityGroup的连接关系 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的OpenStack LoadBalancer with SecurityGroup蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，OpenStack LoadBalancer with SecurityGroup虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建OpenStack FloatingIP蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Openstack栏目下的FloatingIP，拖拽到右边的画布区域中 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的OpenStack FloatingIP蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，OpenStack FloatingIP虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建OpenStack DNS蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Openstack栏目下的DNS，拖拽到右边的画布区域中 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的OpenStack DNS蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，OpenStack DNS虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建Kubernetes蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Kubernetes栏目下的Service和Deployment组件拖拽到右边的画布区域中 拖拽Service组件上的Deployment节点至Deployment组件，建立Service与Deployment的依赖关系 添加Container组件：从左边的组件列表中选择Kubernetes栏目下的Container组件，拖动至Deployment节点框内，选择连接的名称，点击「完成」，建立Container与Deployment的依赖关系 添加PersistentVolumeClaim组件：从左边的组件列表中选择Kubernetes栏目下PersistentVolumeClaim组件，拖动至右边的画布区域。拖拽Container组件的pvc节点至PersistentVolumeClaim，建立Container与PersistentVolumeClaim的依赖关系 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图验证成功后点击左上角「保存」，保存成功后点击「返回」 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的Kubernetes蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，Kubernetes蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建阿里云蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择阿里云栏目下的Instance和SecurityGroup组件拖拽到右边的画布区域中 拖拽Instance组件上的Dependency节点至SecurityGroup组件的feature节点，建立Instance与SecurityGroup的依赖关系 「Note」若需在服务配置时新建安全组，则在SecurityGroup的参数下，去掉勾选\"使用已有资源\" 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图验证成功后点击左上角「保存」，保存成功后点击「返回」 保存蓝图：验证成功后点击左上角「保存」保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的阿里云蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，阿里云蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建Azure蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Azure栏目下的VirtualNetwork和Instance组件拖拽到右边的画布区域中，拖拽Instance组件上的virtualNetwork节点至VirtualNetwork组件的link节点，建立Instance与VirtualNetwork的依赖关系 再选择Azure栏目下的AvailabilitySet、 SecurityGroup、BlobContainer组件拖拽到右边的画布区域中，拖拽Instance组件上的availability_set节点至AvailabilitySet组件的instance节点，拖拽Instance组件上的security_group节点至SecurityGroup组件的security节点，建立Instance与Availability、SecurityGroup的依赖关系 再选择Azure栏目下的LoadBalancer组件拖拽到右边的画布区域中，再将LoadBalancerRule拖动至LoadBalancer节点框内，点击「完成」，建立负载均衡规则（LoadBalancerRule）和负载均衡器（LoadBalancer）的内置关系 拖拽LoadBalancerRule组件上的instance节点至Instance组件的loadbalancer_rule节点，建立Instance与LoadBalancerRule的依赖关系 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图验证成功后点击左上角「保存」，保存成功后点击「返回」 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的阿里云蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，阿里云蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建AWS蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择AWS栏目下的Instance和SecurityGroup组件拖拽到右边的画布区域中，拖拽Instance组件上的security_group节点至SecurityGroup组件的security_group节点，建立Instance与SecurityGroup的依赖关系 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图验证成功后点击左上角「保存」，保存成功后点击「返回」 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的AWS蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，AWS蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建青云蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择青云栏目下的WindowsInstance和SecurityGroup组件拖拽到右边的画布区域中，拖拽WindowsInstance组件上的security_group节点至SecurityGroup组件的security节点，建立WindowsInstance与SecurityGroup的依赖关系 验证蓝图：点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图验证成功后点击左上角「保存」，保存成功后点击「返回」 保存蓝图：验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的青云蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，青云蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建Hyper-V蓝图 选择「服务建模」-「蓝图设计」，点击「添加」 输入Hyper-V蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择Hyper-V栏目下的WindowsInstance和NetworkAdapter组件，分别将他们拖拽到右边的画布区域中 定义网络：点击WindowsInstance右边的network节点,将其拖拽到NetworkAdapter的link节点上，建立WindowsInstance和NetworkAdapter的网络连接 点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的Hyper-V蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，vSphere虚拟机蓝图创建成功 也可在验证成功后，直接点击「保存并发布」，发布蓝图 创建F5与OpenStack组合蓝图 平台支持部署虚拟机和应用软件时，连同F5的Virtual Server、Pool以及SNAT Pool等网络配置同时自动化部署下发，以下内容以OpenStack组件与F5组件结合为例向您介绍。 您可以根据以下步骤创建OpenStack虚拟机、OpenStack应用软件和F5组件结合的蓝图： 选择「服务建模」-「蓝图设计」，点击「添加」 输入蓝图名称及描述，点击「确定」，进入可视化蓝图编辑页面 从左边的组件列表中选择OpenStack栏目下的Server和Network组件，分别将他们拖拽到右边的画布区域中 定义网络：点击Server右边的network节点拖拽到Network的link节点上，建立Server和Network的网络连接 然后再从左边的组件列表中选择F5栏目下的Pool、VirtualServer和SNATPool组件，分别将他们拖拽到右边的画布区域中 点击Pool右边的application节点与Server左边的server节点相连接，点击VirtualServer右边的pool节点与Pool左边的virtualserver节点相连接，点击VirtualServer右边的snatpool与SNATPool左边的virtualserver节点相连接，如下图展示 点击左上角「验证」，验证蓝图，提示这是一个合法的蓝图 验证成功后点击左上角「保存」，保存成功后点击「返回」，将回到蓝图列表界面 发布蓝图：在蓝图列表里选择刚编辑的蓝图，点击「发布」，然后点击「是」 蓝图发布成功，状态变为已发布，蓝图创建成功,也可在验证成功后，直接点击「保存并发布」，发布蓝图 修改蓝图 您可以根据下面的步骤来修改蓝图: 在左边导航选择「服务建模」-「蓝图设计」 点击蓝图名称，则进入蓝图编辑界面，根据需要修改蓝图，点击「保存」 复制蓝图 您可以根据下面的步骤来删除蓝图: 在左边导航选择「服务建模」-「蓝图设计」 选择蓝图列表中的某一蓝图后，菜单栏中的「复制」按钮将变得可用，点击「复制」，更改蓝图名称，点击「提交」，蓝图复制成功 导入蓝图 您可以根据下面的步骤来导入蓝图: 在左边导航选择「服务建模」-「蓝图设计」 点击「导入」按钮 填写蓝图名称，蓝图描述（选填），点击「浏览」，选择本地蓝图，点击「提交」 蓝图导入成功 蓝图导入成功时，蓝图中的组件被同步更新，如果组件类型已经在CMP中存在，则直接更新组件，组件版本增加1，您可以在「软件组件」-「历史版本」中查看组件版本详情；如果组件类型不存在，则直接新建对应的组件。 导出蓝图 您可以根据下面的步骤来导出蓝图: 在左边导航选择「服务建模」-「蓝图设计」 选择蓝图列表中的某一蓝图后，菜单栏中的「导出」按钮将变得可用，点击「导出」 Zip格式的蓝图导出成功 删除蓝图 您可以根据下面的步骤来删除蓝图: 在左边导航选择「服务建模」-「蓝图设计」 选中蓝图点击「删除」按钮，确认后蓝图删除成功 蓝图发布 您可以根据下面的步骤来发布服务: 在左边导航选择「服务建模」-「蓝图设计」 选择列表里状态为\"未发布\"蓝图，点击操作按钮选「发布」，确认发布后，蓝图发布成功，列表中蓝图状态为\"已发布\" 取消蓝图发布 您可以根据下面的步骤来取消已经发布的蓝图： 在左边导航选择「服务建模」-「蓝图设计」 选择列表里状态为\"已发布\"蓝图，点击操作按钮选「取消发布」，蓝图取消发布成功，列表中蓝图状态为 \"未发布\" Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/05服务建模/流程配置.html":{"url":"AdminDoc/05服务建模/流程配置.html","title":"流程配置","keywords":"","body":"流程应用场景 在云资源的自助化申请、审批、自动化部署、运维操作和手工工单处理过程中，流程定义了这些任务处理过程或服务配置过程的方法和策略。 系统默认提供标准流程，同时支持管理员通过流程设计器定义灵活的各项服务所需的流程，对云主机的申请、运维操作、回收进行控制，对手工工单服务的处理、关闭进行管控。 平台主要有三种类型的流程：审批、手工工单服务和云资源蓝图服务流程。 审批流程管理 支持租户管理员通过流程设计器自定义审批流程模板，自定义的具体配置包括审批的层级结构，审批员的指定，审批规则，以及可以执行的操作。 主要功能点 支持定义任意多级审批。 支持在流程设计器中图形化的设计审批的全过程。 支持定义按用户或角色进行审批。 支持定义审批时是否可以更改申请的配置。 支持在业务组和服务目录层面定义需要审批和通知的环节。 支持审批员批量操作审批 支持设置每一级审批员可以修改的字段 SmartCMP配置审批流程有两种方法： 一是业务组管理员或租户管理员在业务组配置中添加审批流程A 二是业务组管理员或租户管理员在服务配置中添加审批流程B 当同时使用两种配置方法，审批流程发生冲突，服务配置中审批流程B优先于业务组配置中的审批流程A 在业务组中添加审批流程 可为业务组添加审批流程，配置成功后，业务组成员申请服务部署时，将需要通过审批模板中的流程进行控制。 「组织架构」-「业务组」，点击业务组名称进入业务组详情页面 在「审批流程」标签页，选择 审批模板，点击「保存」 保存后，业务组成员申请服务时会进入审批流程 在服务配置中添加审批流程 在「服务目录」申请服务成功后，如果服务提前配置了审批流程，则服务将进入审批队列，获得审批模板中相关成员的审批意见。审批通过才能执行部署操作。 示例：选择一个服务如\"vSphere单节点服务\"，在服务配置中为该服务添加审批流程 「服务建模」-「服务配置」，选择服务配置列表中的 \"vSphere单节点服务\" 点击服务名称，进入编辑服务页面，在「审批配置」页面中，选择审批流程（服务配置过程，审批流程的内容只能查看和选择任意一个流程，不能编辑和删除。）点击「保存」。保存后，申请该服务需要按照该模板的审批流程通过后才能部署。 服务申请者点击左侧导航栏「服务目录」，选择\"vSphere单节点服务\"，点击进入服务申请页面 填写申请单：包括业务组（卡片共享给全部业务组时需要填写）、服务部署名称（若业务组未设置服务部署命名规则时需填写），部署数量，项目，所有者，部署原因、虚拟机模板等，填写完成后点击「申请」 查看申请状态：进入「服务请求」-「待审批」，申请状态为「待审批」状态 审批：审批模板中指定的审批人登入系统后进入「服务请求」-「待审批」，选择待审批的项目「Note」可选中多个待处理的审批，批量进行操作。 输入审批意见，点击「批准」，弹出确认提示框，点击「是」 查看已审批通过的项目：进入「服务请求」-「已审批」，项目的状态是「审批通过」 申请者登入系统后进入「我的申请」里查看申请的蓝图部署状态变更为「审批通过」 「服务部署」里，项目已经开始部署。部署成功后，在「服务部署」中，选择该服务，可对服务进行被允许的运维操作。 自定义并行审批流程 在左侧导航栏点击「服务建模」-「流程配置」，点击添加名称（并行审批流程）、描述、类别（审批流程）等信息之后，使用流程设计器设计和定义您需要启用的审批流程。 选中并行审批流程，进入「流程设计器」以图形化的方式自定义具体策略： 为您介绍流程设计器的使用方法：左边圆圈代表开始的节点，右边圆圈代表结束节点，并行审批流程设定两个平行审批环节（审批A环节、审批B环节），某申请通过A环节并且通过B环节则审批通过申请成功，两个环节任意一个环节不通过则申请失败。如图所示： 审批人 审批人可以选择角色或用户。例如租户管理员、业务组管理员等，也可以指定某个用户作为审批人。 审批流程中内置角色使用：如果希望审批能够从申请者所在的最底层组织架构开始审批，然后再是资源所在的业务组，为满足这样的审批流程，我们需要在审批流程中添加额外的审批角色。管理员编辑审批流程时，审批人选择「角色」，列出内置审批用角色分别是： 「一级业务组管理员」：定义为用户所在的最底层业务组的管理员 「二级业务组管理员」：定义为用户所在的上一层业务组的管理员 例如：审批流程中添加两级审批流程，第一级角色选择\"一级业务组管理员\"，第二级角色选择\"二级业务组管理员\"。审批时可以从申请者资源所在业务组的最底层组织架构开始审批。 审批人选择动态用户，指定“动态用户”${FORM.approver}，为服务自定义表单，在表单配置处绑定approver字段，实现您可以指定任意一个用户作为审批人的需求。 审批人选择基于访问权限，则当这个流程用于部署或云资源操作审批时，只有对该资源有读取权限的用户才能收到审批请求。 审批更改（允许或不允许审批员进行修改）高级配置（可配置审批员可以修改的具体字段，例如CPU、内存等） 审批规则分为两种：第一种是固定值即满足设定数目的审批者则可通过该层级审批，如若有一人拒绝通过则审批失败。第二种为百分比即满足设定的百分比的成员通过此项审批则为通过，若有一人拒绝则审批失败。 对于具体的操作分为审批操作和执行操作： 审批操作是赋予该层级审批人审批的权限，即可以批准、拒绝或退回该申请。执行操作则没有审批权限，不能拒绝或退回，只是作为该层审批的审阅者查看申请内容并确认审批完成。此外，还可以对该层审批者定义是否具备修改申请的权限，如需，请勾选允许修改申请。 内置的审批流程 系统内置租户管理员审批流程、业务组管理员审批流程、审批模板流程，方便用户直接选择所需要的审批流程。 内置的审批流程不可修改和删除，只支持查看和使用，用户自定义添加的审批流程支持修改和删除 「租户管理员审批」：定义为用户所在的租户系统内的管理员 「业务组管理员审批」：定义为用户所在的业务组的管理员 「审批模板流程」：内置的云服务部署审批流程 云资源操作许可 云资源相关操作的权限设置有两种方法。一是在业务组---云资源操作许可中设置；二是在服务配置中进行设置。 服务配置中的云资源操作许可将继承业务组配置，可在此范围内进行更改操作项启用与否和审批流程，业务组中未启用的操作将不能在服务配置处进行启用。 具体操作方法： 「组织架构」-「业务组」，选择「云资源操作许可」标签页，该标签页将列出业务组所有启用的云资源操作。 配置完成，申请服务部署成功后，可在「我的部署」-「云主机」中，进入云主机详情页面，对虚机做相应的运维操作。 在业务组中添加云资源操作许可 可在业务组层面添加云资源的操作许可。 「组织架构」-「业务组」，选择「云资源操作许可」标签页 点击「添加」，出现「添加操作许可」页面 页面左侧第一列为云资源（包括虚机、云硬盘、容器服务、网络资源等）操作列表，第二列为角色列表，第三列为启用状况列表，最右侧一列为审批模板列表 在虚机操作列表中勾选某项操作，如启用，停止，挂起等。在角色列表中选择能进行这项操作的角色，在启用状况列表中可勾选不启用（不能进行该项虚机操作），启用（能进行该项虚机操作）或启用且审批（能进行该项虚机操作且需要在审批模板列表中选择一个审批模板） 「审批模板」选择默认模板（业务组管理员审批模板或租户管理员审批模板） 点击「保存」 「Note」添加操作许可时可一次性选择多个操作、多个角色，设置相同的启用和审批规则。保存之后可对每一条添加的设置进行修改或删除，或继续添加新的操作许可规则设置。 在服务配置中添加云资源操作许可 点击左侧导航栏「服务建模」-「服务配置」，点击服务部署名称或选择某服务，点击「编辑」，进入服务部署「基本信息」页面 点击「组件配置」标签页，点击Server或WindowsServer节点进入节点详细设置界面 点击「操作许可」标签页，在此可配置云资源中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的启用规则和审批流程 「Note」云资源操作许可列表由业务组云资源操作许可继承而来，不勾选「继承业务组配置」可在此范围内删减许可。 若勾选「继承业务组配置」，则与在业务组中的云资源操作配置相同，具体配置请参照上文在业务组中添加云资源操作许可 若不勾选「继承业务组配置」，在每项操作后进行编辑，选择启用状况以及审批模板后点击「保存」 服务部署操作许可 服务部署操作许可规定了对该服务部署成功后，可进行的运维操作以及针对该操作的审批流程。 在「我的部署」-「服务部署」页面，选择一个服务部署，列表页面顶部将显示该服务部署可进行的操作。 在业务组中添加服务部署操作许可 「组织架构」-「业务组」，点击业务组名称，进入概况页面，选择「服务部署操作许可」标签页 点击「添加」，出现「添加操作许可」页面 页面左侧第一列为操作列表，第二列为角色列表，第三列为启用状况列表，最右侧一列为审批模板列表 在操作列表中勾选某项操作，如更改所有者，启动服务部署，停止服务部署等。在角色列表中选择能进行这项操作的角色，在启用状况列表中可勾选不启用（不能进行该项操作），启用（能进行该项操作）或启用且审批（能进行该项操作且需要在审批模板列表中选择一个审批模板） 点击「保存」，成功为业务组添加服务部署操作许可 在服务配置中添加服务部署操作许可 服务部署操作许可规定了对该服务部署成功后可启用服务部署管理中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的启用规则和审批流程。 点击左侧导航栏「服务建模」-「服务配置」，点击服务部署名称，进入服务部署「基本信息」页面 点击「服务部署操作许可」标签页，在此可配置服务部署中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的启用规则和审批流程 「Note」服务部署操作许可列表由业务组服务部署操作许可继承而来，不勾选「继承业务组配置」可在此范围内删减许可。 若勾选「继承业务组配置」，则与在业务组中的服务部署操作配置相同 若不勾选「继承业务组配置」，在每项操作后进行编辑，选择启用状况，最后点击「保存」 手工工单服务流程管理 手工工单服务流程定义工单任务具体的处理步骤、服务团队、服务人员和流转方式。 内置的手工工单服务流程 平台内置的手工工单服务流程包括标准手工工单，标准事件管理流程、自动化服务流程，同时支持租户管理员自定义服务流程。 内置的手工工单流程不可修改和删除，只支持查看和使用，用户自定义添加的手工工单服务流程支持修改和删除 标准事件流程 Incident Report，用来解决出现的IT资源相关的问题，例如服务器down了，网络IP地址冲突等等。流程类型属于手工工单服务。 具体流程如图： 标准事件流程主要环节包括：一线处理支持、二线处理支持、关闭服务。 一线和二线的任务处理环节可以指定不同团队。一线处理支持收到事件之后，可以进行的操作如下： 直接处理，问题解决完成之后，填写问题或故障的原因或解决办法的说明 转派给其它服务团队 升级：升级到二线进行处理，并且填写升级说明 二线支持处理收到事件之后，可以进行的操作如下： 直接处理，问题解决完成之后，可以填写问题的原因和解决方法的说明 转派给其它团队 邮件通知用户问题已经解决，当发起手工工单服务申请的用户收到问题解决的邮件之后，如果用户满意此次手工工单服务选择进行服务关闭则工单状态改变为「已处理」；如果用户选择将工单重新处理，则返回给上一级的处理人。（在邮件通知用户的上一步中谁处理的就返回给谁，二线处理的返回给二线，一线的返回给一线），工单状态改变为「处理中」 云资源蓝图服务流程 内置的标准云服务部署流程 定义云资源自动化部署的流程，属于系统内置的云资源蓝图服务流程。 流程配置 为满足不同服务项的服务流程要求，平台内置多种服务流程和自定义添加服务流程。系统管理员和租户管理员可以进入「配置管理」-「服务流程配置」页面，进行添加、查看、流程设计、启用、禁用、编辑和删除流程模板的操作，下文为您介绍具体操作步骤。 「Note」内置的服务流程不支持编辑、流程设计、启用、禁用、删除操作，具体的内置流程详细信息请参考：流程应用场景 自定义添加流程 在左侧导航栏点击「服务建模」-「流程配置」，点击「添加」按钮 进入新增流程页面，输入自定义流程的基本信息：流程名称、描述、类别（云资源蓝图服务、手工工单服务和审批流程三种类型），保存名称、类别等信息之后可使用流程设计器设计和定义您需要启用的流程。 为您介绍创建基础流程图的方法：左边圆圈代表开始的节点，右边圆圈代表结束节点，工单任务处理流程之后可以自定义任务一、自定义任务二、或其余的自定义任务。如图所示： 点击保存按钮，自定义服务流程创建成功。 编辑、删除服务流程 在左侧导航栏点击「服务建模」-「流程配置」选中一个流程，点击「编辑」-「流程设计」直接进入服务流程设计器的UI，显示process的流程，以可视化的方式更改设计流程图。 「Note」选中的流程必须是自定义添加的流程，系统内置的流程不支持流程设计 在左侧导航栏点击「服务建模」-「服务流程管理」，选择一个服务流程，点击「删除」按钮，弹出删除提示框点击「是」，提示删除服务流程成功。 「Note」当流程定义正在某一个服务配置中使用时，删除服务流程失败 启用、禁用服务流程 在左侧导航栏点击「服务建模」-「服务流程管理」，选择一个服务流程，点击「启用」按钮，即可启用该服务流程。 在左侧导航栏点击「服务建模」-「服务流程管理」，选择一个服务流程，点击「禁用」按钮，即可禁止使用该服务流程。 「Note」系统默认的流程主要有两种：标准云服务部署和标准手工工单。这两种内置流程默认启用，不可以禁用、修改或者删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/05服务建模/表单配置.html":{"url":"AdminDoc/05服务建模/表单配置.html","title":"表单配置","keywords":"","body":"表单配置 在创建或配置服务时，可以选择系统内置的表单（IP池创建表单、项目创建表单使用户可自动化创建IP池、项目等配置），如果您需要修改或添加额外的字段信息供用户在申请时填写，可以通过表单设计器，自定义配置表单，例如：申请新项目、申请邮箱账户、申请资源池、添加环境管理员。 系统内置表单： 创建IP池，定义了用户申请创建一个新的IP池时需要输入的信息。 创建项目，定义了用户申请创建一个新的项目时需要输入的信息。 上传附件，上传所需要的材料提供审批的时候使用。文件大小不能超过500KB。 资源池扩容，定义了用户申请资源池扩容时需要输入的信息。 下面为您介绍新增表单的具体操作步骤。 表单配置的字段完成之后，您可以在服务目录申请服务时自定义填写。 添加表单 在左侧导航选择「服务建模」-「表单配置」，在表单配置列表界面点击添加，输入表单基本信息（表单名称和表单描述）；在表单内容处输入Schema的JSON配置，在UI上需要支持JSON的语法高亮；在表单预览处可查看自定义的表单内容。例如：添加环境管理员，定义字段信息，表单预览查看字段 环境管理员的来源和职责：环境管理员从测试人员中进行指定；测试人员与“测试业务组”进行关联。环境管理员只拥有查看和操作“与本人关联虚拟机”的权限（即当为vSphere服务配置环境管理员时，环境管理员会与该服务部署的虚拟机进行关联） 通过环境管理员的设置，实现对服务部署的扩展，更好的控制服务部署和操作虚拟机 在服务配置时，为服务绑定 环境管理员表单 在服务申请时，指定环境管理员、选择环境类型（后台结合企业业务需求提前配置）、系统属性和应用属性。 「Note」 支持灵活扩展，支持您根据业务需求，配置更多满足您需求的字段信息。 编辑、删除表单 在左侧导航选择「服务建模」-「表单配置」，在表单配置列表界面点击编辑，即可修改表单基本信息（表单名称和表单描述）；在表单内容处修改Schema的JSON配置；在表单预览处可查看自定义的表单内容。 在左侧导航选择「服务建模」-「表单配置」，在表单配置列表界面点击删除，即可删除表单。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/05服务建模/服务分组.html":{"url":"AdminDoc/05服务建模/服务分组.html","title":"服务分组","keywords":"","body":"服务分组 支持服务卡片的分类。可自定义不同服务卡片的类别，在服务配置中将相关的服务关联到不同的类别，在服务目录中分类展示，其中内置的服务分组有三种类型：工单服务，数据库和基础设施。 添加服务分组 在左侧导航栏点击「服务建模」-「服务分组」，点击「添加」按钮，输入服务名称和服务描述，点击「保存」，即可添加成功。 编辑、删除服务分组 在左侧导航栏点击「服务建模」-「服务分组」，选择一个服务分组，点击「编辑」按钮，输入需要修改的内容，点击「保存」。 在左侧导航栏点击「服务建模」-「服务分组」，选择一个服务分组，点击「删除」按钮，提示删除服务分组成功。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/05服务建模/服务配置.html":{"url":"AdminDoc/05服务建模/服务配置.html","title":"服务配置","keywords":"","body":"服务配置 SmartCMP云管平台从组件的定义,到应用的可视化拓扑建模,并将服务配置标准化，再到基于蓝图和配置的自动化部署,最终生成一个符合TOSCA规范的云资源蓝图服务。支持管理员将设计好的蓝图发布为服务，在服务配置处配置基本信息、构成蓝图的组件详细参数、输入与输出、可以将服务与企业内部的流程（例如：审批流程）集成之后发布到服务目录。服务项主要功能有： 服务与一个、多个或全部蓝图关联，服务与业务组关联，选定服务类型（云资源蓝图服务、手工工单服务、执行任务服务等等） 服务与服务策略关系，如服务时间、租期、服务流程等 服务访问权限设置，配置部署操作许可，指定操作权限 服务与流程集成，如审批流程、云服务部署流程等等 具体操作步骤如下文：在左边导航选择「服务建模」-「服务配置」，出现服务列表,列表中显示服务名称、描述、蓝图设计、业务组、状态、服务部署数量、创建时间等，可对服务配置做如下操作：添加、编辑、取消发布、删除等。 「Note」服务发布完成之后，可以通过服务目录进行服务申请，具体操作方法参考：服务目录申请 添加服务配置 您可以根据下面步骤添加服务配置： 在左边导航栏选择「服务建模」-「服务配置」，点击「添加」 填写服务名称、服务描述（选填）、选择业务组，服务类型，当选择服务类型为云资源蓝图服务时，增选蓝图设计，选择关联一个、多个、或全部蓝图，当选择手工工单服务是，增选流程选择，点击「提交」 接下来为您介绍云资源蓝图服务配置的具体步骤，手工工单服务配置具体步骤请参考：手工工单服务配置 「Note」服务配置的服务描述支持Markdown语法书写规则，从而在服务申请时候展示不同服务描述的展示格式 基本信息 在「基本信息」标签页填入下列信息：服务项名称、服务项描述、 服务项logo选择，发布后将在服务目录处显示、业务组名称 （服务配置可设置在某个业务组，或共享给所有业务组；当共享给所有业务组时，有些设置无法在服务配置时指定，将在用户申请服务时，指定某个业务组后，根据选中业务组上的资源而决定），状态(只读)服务项状态（已发布：将服务项发布到服务目录；未发布：服务项未发布状态；已过期：服务项已过期） 服务部署租用时间（日） 服务部署租用时间到后，部署里的所有云主机会停机。可配置的租用时间在业务组配置的区间范围内设置，勾选「允许修改」和「仅审批时可修改」。 服务部署保留时间（日） 保留时间，保留时间到后，部署会被卸除。可配置的保留时间在业务组配置的区间范围内设置，勾选「允许修改」和「仅审批时可修改」。 启用关联规则 支持将vSphere虚拟机强制分散到不同的物理机或聚合到同一台物理机上。允许申请时添加软件 勾选后，服务发布成功后，服务申请时将允许该服务在申请时候添加软件 点击「输入与输出」：可添加输入输出参数，服务部署成功后，可在详情页面进行查看相关输出数据。输入：点击添加，填写名称（必填）、描述、默认值等输入信息。 输出：点击添加，填写名称（必填）、描述、表达式（必填）等输出信息。表达式可选择已有，也可根据需求自行输入。 点击「审批配置」标签页，选择审批流程（内置的默认审批流程或自定义的审批流程，例如：平行审批流程）、查看审批流程图、审批流程步骤 点击「流程配置」标签页，选择服务流程（内置的标准云服务部署流程或自定义的服务流程），查看服务流程图、服务流程步骤 点击「表单配置」标签页，选择表单、进行表单预览 点击「部署操作许可」视图：在此可启用服务部署管理中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的规则和审批流程。默认继承业务组配置，可增删，可对操作列表进行角色筛选 组件配置 点击「组件配置」标签页，可看到配置服务中的蓝图拓扑和所有组件： 组件配置列表中有三种类型的组件，分别为：计算组件、软件组件、网络组件。计算组件：一般指服务器或计算节点，如Server、WindowsServer、InstanceD等， 软件组件：一般是放在服务器或者计算节点上的应用，例如：Apache、MySQL、Tomcat等， 网络组件：一般指服务器的网络配置，如network 组件配置： 计算组件配置：可以通过选择有启用监控的虚拟机模板来给当前节点或服务器添加监控 软件组件：可以添加相应的监控点来启用监控，软件组件所在的节点必须启用监控，软件组件的监控才会生效。当带监控的服务器或节点和软件组件部署成功后，可以在部署详情页面的监控标签页查看当前部署的监控数据信息。对应的节点云主机详情页面也会有节点的监控标签页以供用户监控当前节点的数据。同时，如果当前节点中安装了带监控点的软件组件，则可以通过添加监控点来查看软件组件的监控数据 软件组件节点详细设置，与制品库相关联的设置，选择组、软件组件名称、版本。 云资源配置：服务配置中，配置云主机节点的云资源配置，需要注意资源池选择策略，平台主要提供以下几种策略： 手工指定：手工指定资源池，若资源池选择策略选择“手工指定”，支持使用资源标签，缩小选择范围，将出现“资源池”选择项，在下拉框中选择资源池，指定资源池，可选择勾选「允许修改」和「仅审批时可修改」。 自动选择剩余容量最大的：平台自动按照策略选择当前可选择的资源池，资源使用量最小，剩余容量最大的。 自动选择费用最低的：平台支持设置资源计费规则，按照策略选择当前可选择的资源池，费用最低 花费最少的。 平均分配：服务部署的时, 资源是平均分配到不同的资源池, （平均分配的前提是选择的资源池有足够的资源。） 「Note」资源标签来源于管理员在「系统管理」-「资源标签」中配置完成，具体配置参考，请参考：资源标签 根据标签选择匹配该标签的资源池，实现将应用部署到特定的资源池。 配置vSphere单节点服务 在左侧导航点击「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择创建的vSphere单节点蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到vSphere服务拓扑图以及服所有组件：Server、Network Server：点击Server名称，进入节点详细设置，共有「基本信息」「服务器配置」「网络」「用户」「磁盘」「关系」「操作许可」等标签页 「基本信息」页面： 基本信息 展示server的类型、类别和名称等基本信息 云主机数量 选择部署的云主机数量 「Note」勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可以进行修改参数云主机数量，在服务审批阶段也可以进行修改参数云主机数量；如果勾选两项项「允许修改」和「仅审批时可修改」，则用户在请求服务时，不可以进行修改参数云主机数量，只在服务审批阶段允许进行修改参数云主机数量； 「服务器配置」页面： 计算资源 OS主机名（Hostname） 没有定义时默认继承业务组命名规则，勾选「允许修改」和「仅审批时可修改」。这里存在两种情况： 如果勾选一项「允许修改」，则用户在请求服务时，可修改参数，在服务审批阶段也可修改参数； 如果勾选两项「允许修改」和「仅审批时可修改」，用户在服务请求中，不可修改参数，只在服务审批阶段允许修改参数； 云主机名称 没有定义时默认继承业务组命名规则，勾选「允许修改」和「仅审批时可修改」。 注释 选填，勾选「允许修改」和「仅审批时可修改」。 AD域（Windows服务）:AD域 勾选后，填写AD域名和用户姓名、密码。该服务部署后的虚机将加进AD域里 模板设置 操作系统名称 选择Linux/Windows操作系统 虚拟机模板 选择该操作系统下的vSphere虚拟机模板 计算规格配置 计算规格模式 计算规格模式定义了云主机CPU和内存的配置方式。“自定义”允许直接输入数字，“固定规格”将按照管理员配置的计算规格进行选择 vCPU数量 若计算规格模式选择自定义，输入vCPU数量，勾选「允许修改」和「仅审批时可修改」。 内存（GB） 若计算规格模式选择自定义，输入内存，勾选「允许修改」和「仅审批时可修改」。 计算规格 若计算规格模式选择固定规格，选择规格，勾选「允许修改」和「仅审批时可修改」。 在「系统管理」-「计算规格」中配置相关的计算规格 系统盘配置 置备模式 （选择完全克隆的虚拟机模板才会出现该选项,即选择虚拟机虚拟磁盘的磁盘格式）支持三种置备模式：精简置备、厚置备延迟置零、厚置备置零。 「Note」 厚置备延迟置零格式,以默认的厚格式创建虚拟磁盘。创建虚拟磁盘时分配虚拟磁盘所需的空间。创建时不会擦除物理设备上保留的数据，但是从虚拟机首次执行写入操作时会按需要将其置零。 「Note」 厚置备置零,是一种厚虚拟磁盘类型，支持诸如 Fault Tolerance 等群集功能。在创建时为虚拟磁盘分配所需的空间。与常规格式相反，创建虚拟磁盘后，会将物理设备上保留的数据置零。创建这种格式的磁盘所需的时间可能会比创建其他类型的磁盘所需的时间更长。 「Note」 精简置备格式,可节省存储空间。最初，精简置备的磁盘只使用该磁盘最初所需要的数据存储空间。如果以后精简磁盘需要更多空间，则它可以增长到为其分配的最大容量。 文件夹 虚机会部署在选中的vCenter文件夹里，支持申请时改变需要在「资源池」—「云平台资源信息」中选择文件夹 数据存储策略 （选择完全克隆的虚拟机模板才会出现该选项）默认选择数据存储默认值，下拉可选择VMware vCenter中配置好的存储策略，支持勾选「允许修改」和「仅审批时可修改」。 存储 虚机会部署在选中的存储里，存储会根据选择的存储策略判定兼容性，以及显示该存储的空余空间、总空间以及占比。若不选，则部署在资源池定义的存储里允许用户添加新磁盘时选择置备模式和存储 选择是否允许，若不允许，新磁盘的置备模式和存储的选择将与系统盘保持一致 「网络」页面配置访问域（选填）和DNS服务器（选填）；IP分配方式根据资源池中的配置指定，可在Network节点中选择不同的网络标签 「用户」视图（Linux服务）：可以添加Linux用户和用户组，一个用户可以有多个用户组，一个用户组可以有多个用户，虚拟机部署成功后，将会有对应的用户和组被创建，用户可以选择是否设置为sudoer。注意：只有安装了代理（部署时安装），才出现用户标签页面 「磁盘」视图：可以配置Linux虚拟机逻辑卷。除了直接创建硬盘分区外，还可以选择创建逻辑卷 要创建逻辑卷（LV），需要先创建卷组（VG），然后往卷组中添加物理卷（PV）作为卷组底层资源，然后才能创建逻辑卷，一个卷组上创建的逻辑卷的总大小需不大于该卷组的资源总大小。物理卷可以勾选swap选项以创建swap分区 添加/更改磁盘（物理卷PV）：存储为空的时候，图标变为绿色，表示部署时允许添加磁盘。添加的磁盘需要填写大小和置备模式（目前为必选项），挂载点、卷组、数据存储名选填 「关系」视图：可选择可以关联的虚拟机 「操作许可」视图：为某服务项添加云资源操作许可] 「Network」组件：点击network名称，进入节点详细设置，共有「基本信息」「属性」两个标签页 「基本信息」页面：可查看Network组件类型、类别、名称 「属性」页面：可选择网络标签以及管理网络，网络标签支持勾选「允许修改」和「仅审批时可修改」。 「服务部署操作许可」视图：在此可启用服务部署管理中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的规则和审批流程。默认继承业务组配置，可增删，可对操作列表进行角色筛选 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，vSphere虚拟机服务配置并发布成功 配置VMware NSX服务 配置带NSX云平台的vSphere服务，配置服务前操作： 确保该业务组已添加vSphere云平台和VMware NSX云平台，并在vSphere云平台处添加与VMware NSX云平台的关联关系 在vSphere资源池中，关联VMware NSX的传输区域（将影响「NSX逻辑交换机」的显示） 关联成功后，在「资源池」- vSphere资源池 -「网络资源」中看到「NSX逻辑交换机」「NSX逻辑路由器」「安全策略组」三个额外标签页 配置「NSX逻辑交换机」，选择交换机并分配资源池（网络资源与NSX逻辑交换机至少配置一种） 配置「NSX逻辑路由器」，选择DLR加入该资源池 配置「安全策略组」，勾选已有的安全策略组 点击「保存」，VMware NSX资源池配置成功 开始配置VMware NSX虚拟机服务： 「服务建模」-「服务配置」-「添加」，填写服务名称，选择在VMware NSX蓝图，选择业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 点击「组件配置」，可看到VMware NSX蓝图拓扑图和所有组件：Lswitch、Server、SecurityGroup、DLR，「Server」组件：配置同6.3.3.1 vSphere服务一样，「Lswitch」组件，点击Lswitch名称，进入「节点详细设置」页面：共有「基本信息」「属性」两个标签页 基本信息」页面：查看Lswitch的基本信息，如类型、类别和名称 属性」页面： 属性（不勾选使用已有网络） IP分配方式 支持IP池和手工指定，若选择IP池，需指定IP池 复制模式 选择单播。支持单播、多播和混合三种方式 管理网络 勾选是否管理网络 属性（勾选使用已有网络） 网络标签 从已有的网络中选择，勾选「允许修改」和「仅审批时可修改」。（需要在vSphere with NSX资源池中，选择NSX逻辑交换机） IP分配方式 支持IP池、DHCP、手工指定三种方式 管理网络 勾选是否管理网络 「DLR」组件，点击DLR名称，进入「节点详细设置」页面：共有「基本信息」「属性」两个标签页 「基本信息」页面：查看DLR的基本信息，如类型、类别和名称 「属性」页面：选择一个已有的逻辑路由器（DLR）（在资源池中选择NSX逻辑路由器）；可增加接口配置 「SecurityGroup」组件，点击SecurityGroup名称，进入「节点详细设置」页面：共有「基本信息」「属性」两个标签页 「基本信息」页面：查看SecurityGroup的基本信息，如类型、类别和名称 「属性」页面： 属性（不勾选使用已有安全组） 名称 新建安全组，填写安全组的名称，勾选「允许修改」和「仅审批时可修改」。 描述 填写安全组相关描述信息（选填） 属性（勾选使用已有安全组） 安全组 从已有的安全组中选择一个，需要在资源池「安全策略组」中选择一个或多个安全策略用于该资源池 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，VMware NSX服务配置并发布成功 配置vSphere MySQL带监控服务 在左侧导航点击「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择创建的vSphereMySQL带监控蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到vSphere服务拓扑图以及服所有组件：Server、Network 「Server」： 配置同vSphere服务一样（需选择带自动化代理的虚拟机模板） 「Network」：配置同vSphere服务一样 「MySQL」: 点击MySQL名称，进入节点详细设置，共有「基本信息」「属性」「关系」等标签页 「基本信息」页面：展示MySQL的类型、类别和名称等基本信息 「属性」页面：展示MySQL主键相关信息，来源于「服务建模」-「软件组件」中的配置 「关系」页面：展示Server与MySQLExporter之间的关系 「MySQLExporter」: 点击MySQLExporter名称，进入节点详细设置，共有「基本信息」「属性」「关系」等标签页 「基本信息」页面：展示MySQLExporter的类型、类别和名称等基本信息 「属性」页面：展示MySQLExporter主键相关信息，来源于「服务建模」-「软件组件」中的配置，若未填写package_url，需填写地址 「关系」页面：展示Server与MySQLExporter之间的关系 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，vSphere MySQL带监控服务配置并发布成功 配置OpenStack单节点服务 在左侧导航点击「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择创建的OpenStack单节点蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到OpenStack 单节点服务拓扑图以及服所有组件：Server、Network Server：点击Server名称，进入节点详细设置，共有「基本信息」「属性」「网络资源」「用户」「磁盘」「安全策略组」「关系」「操作许可」等标签页 「基本信息」页面： 基本信息 展示server的类型、类别和名称等基本信息 资源池选择策略 自动选择：平台自动按照策略选择资源池 基于资源标签选择：若该服务所使用的蓝图中已有资源便签，默认继承该资源标签，根据标签去选择业务组中匹配该标签的资源池（前提是资源池已设置资源标签），实现将资源部署到特定的资源池中。也可在服务配置选择其他资源标签；勾选「允许修改」和「仅审批时可修改」。 手工指定：可选择为该服务手工指定资源池，若 资源池选择策略选择“手工指定”后，将出现资源池选择项，指定资源池，允许资源池申请时改变 「Note」若该服务共享给全部业务组，则资源池无法指定，默认强制勾选「允许修改」和「仅审批时可修改」。；若该服务指定给某一业务组，则选择该业务组下的资源池 云主机数量 选择部署的云主机数量，勾选「允许修改」和「仅审批时可修改」。 「属性」页面： OS主机名 没有定义时默认继承业务组命名规则，勾选「允许修改」和「仅审批时可修改」。 云主机名称 没有定义时默认继承业务组命名规则，勾选「允许修改」和「仅审批时可修改」。 操作系统名称 选择Linux操作系统 虚拟机模板 选择Linux操作系统下的OpenStack虚拟机模板 卷类型 若选择从云硬盘启动或从云硬盘快照启动的虚拟机模板，则会出现该选项，选择OpenStack云平台上已存在的卷类型，也可选择\"未设置卷类型\" 卷大小 若选择从云硬盘启动或从云硬盘快照启动的虚拟机模板，则会出现该选项，卷大小需大于等于镜像要求的磁盘大小，选填 主机集合 虚机会部署到选择的主机中 虚拟机规格 选择部署的虚拟机CPU和内存规格，支持勾选「允许修改」和「仅审批时可修改」。 「网络资源」页面可配置DNS：DNS名称、DNS域、DNS类型（仅支持A类型）、DNS服务器（勾选「允许修改」和「仅审批时可修改」。 「用户」视图（Linux服务）：可以添加Linux用户和用户组，一个用户可以有多个用户组，一个用户组可以有多个用户，虚拟机部署成功后，将会有对应的用户和组被创建，用户可以选择是否设置为sudoer。注意：只有安装了代理（部署时安装），才出现用户标签页面 「磁盘」页面：可以配置Linux虚拟机逻辑卷。除了直接创建硬盘分区外，还可以选择创建逻辑卷（如果需要配置逻辑卷管理（LVM），请确保在虚拟机模板中安装自动化代理） 要创建逻辑卷（LV），需要先创建卷组（VG），然后往卷组中添加物理卷（PV）作为卷组底层资源，然后才能创建逻辑卷，一个卷组上创建的逻辑卷的总大小需不大于该卷组的资源总大小。物理卷可以勾选swap选项以创建swap分区 添加/更改磁盘（物理卷PV）：存储为空的时候，点击，表示部署时允许添加磁盘。添加的磁盘需要填写大小和置备模式（目前为必选项），挂载点、卷组、数据存储名选填 「安全策略组」页面：可选择虚拟机的安全策略组 「关系」页面：可选择可以关联的虚拟机 「操作许可」页面： 为某服务项添加云资源操作许可 「Network」组件：点击network名称，进入节点详细设置，共有「基本信息」「属性」两个标签页 「基本信息」页面：可查看Network组件类型、类别、名称 「属性」页面：可选择网络、子网、IP分配方式（根据网络和子网的选择，读取资源池中的配置）以及管理网络，网络和子网勾选「允许修改」和「仅审批时可修改」。 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，OpenStack 单节点服务配置并发布成功 配置OpenStack Firewall服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择 OpenStack Firewall蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到OpenStack Firewall服务拓扑图以及Firewall组件 「基本信息」页面：可查看Firewall组件类型、类别、名称； 「属性」页面： 名称 防火墙名称（勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可修改参数，在服务审批阶段也可修改参数；如果勾选两项「允许修改」和「仅审批时可修改」，用户在服务请求中，不可修改参数，只在服务审批阶段允许修改参数；） 描述 选填 管理员状态 启用、禁用，默认启用 路由 只允许用户在申请时候选择，需要在配置OpenStack资源池时添加路由勾选“使用已有策略” 选择已有策略，勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可修改参数，在服务审批阶段也可修改参数；如果勾选两项「允许修改」和「仅审批时可修改」，用户在服务请求中，不可修改参数，只在服务审批阶段允许修改参数；不勾选“使用已有策略” 新建策略，填写策略名称（必填），策略描述（选填），选择是否“共享的”和“已审计”。 若勾选“共享的”，在对Firewall做运维操作「更新防火墙策略」时，只能选择已共享的策略及其策略下的规则； 若未勾选“共享的”，在对Firewall做运维操作「更新防火墙策略」时，可选择“共享的”和“未共享的“策略及其策略下的规则 资源池选择策略 支持资源池选择策略 资源池 当一个业务组关联多个OpenStack资源池时，支持选择具体使用哪个资源池的资源 属性（勾选使用已有防火墙） 防火墙 从已有防火墙中选择一个，勾选「允许修改」和「仅审批时可修改」。这里存在两种情况：如果勾选一项「允许修改」，则用户在请求服务时，可修改参数，在服务审批阶段也可修改参数；如果勾选两项「允许修改」和「仅审批时可修改」，用户在服务请求中，不可修改参数，只在服务审批阶段允许修改参数； 资源池选择策略 支持资源池选择策略 资源池 当一个业务组关联多个OpenStack资源池时，支持选择具体使用哪个资源池的资源 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，OpenStack Firewall虚拟机服务配置并发布成功 配置OpenStack LoadBalancer with SecuriryGruop服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择OpenStack LoadBalancer with SecurityGroup蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到OpenStack LoadBalancer with SecuriryGruop服务拓扑图以及所有组件：Server、Network 、LoadBalancer、Listener、SecurityGroup Server：Server节点的配置参照 配置OpenStack单节点服务 Network：Network节点的配置参照配置OpenStack单节点服务 LoadBalancer：点击LoadBalancer名称，进入节点详细设置，共有「基本信息」和「属性」两个标签页 「基本信息」：显示类型、类别、名称等基本信息 「属性」页面 属性（不勾选使用已有资源） 服务提供商 选择LoadBalancer的服务提供商（Provider），支持F5和HA 名称 填写名称（必填），勾选「允许修改」和「仅审批时可修改」。 描述 选填 DNS名称 仅支持请求服务时填写，如需指定DNS请勾选允许申请时更改,若勾选允许申请时修改，DNS服务器将必填，DNS类型为A DNS域 选填，勾选「允许修改」和「仅审批时可修改」。 DNS服务器 选填，勾选「允许修改」和「仅审批时可修改」。 DNS类型 选填，勾选「允许修改」和「仅审批时可修改」。 属性（勾选使用已有资源） 服务提供商 选择LoadBalancer的服务提供商（Provider），支持F5和HA 名称 填写名称（必填），勾选「允许修改」和「仅审批时可修改」。 DNS名称 仅支持请求服务时填写，如需指定DNS请勾选允许申请时更改若勾选允许申请时修改，DNS服务器将必填，DNS类型为A DNS域 选填，勾选「允许修改」和「仅审批时可修改」。 DNS服务器 选填，勾选「允许修改」和「仅审批时可修改」。 DNS类型 选填，勾选「允许修改」和「仅审批时可修改」。 Listener：点击Listener名称，进入节点详细设置，共有「基本信息」「属性」「成员」「策略和规则」四个标签页 「基本信息」：显示类型、类别、名称等基本信息 「属性」页面 属性（不勾选使用已有资源） 名称 填写名称（必填），勾选「允许修改」和「仅审批时可修改」。 描述 选填 协议 选择协议（选填），支持HTTP、TCP、UDP，勾选「允许修改」和「仅审批时可修改」。 端口 填写端口号（必填），如80，勾选「允许修改」和「仅审批时可修改」。 流量分发算法 选择一个算法（选填），勾选「允许修改」和「仅审批时可修改」。 属性（勾选使用已有资源） 名称 填写名称（必填），勾选「允许修改」和「仅审批时可修改」。 「成员」页面：内部成员和外部成员，内部成员列出当前蓝图中所有和该Listener节点相关联的server/windowsServer；外部成员，可添加外部成员，填写IP地址（必填）、子网（必填）、端口（必填）、权重等 「健康监控」页面： 监控类型：支持多种监控类型，如HTTP、HTTPS、TCP等，勾选「允许修改」和「仅审批时可修改」。 时间间隔（秒）：必须大于等于1，勾选「允许修改」和「仅审批时可修改」。 最大重试次数：1~10，勾选「允许修改」和「仅审批时可修改」。 超时（秒）：超时（秒）必须小于等于时间间隔（秒），勾选「允许修改」和「仅审批时可修改」。 HTTP方法：若监控类型选择HTTP，将选择HTTP方法。如GET、POST等，勾选「允许修改」和「仅审批时可修改」。 期望的状态码：若监控类型选择HTTP，将填写期望的状态码 URL路径: 若监控类型选择HTTP，将填写URL路径，勾选「允许修改」和「仅审批时可修改」。 「策略和规则」页面：可新建应用于该Listener的策略和规则，勾选「允许修改」和「仅审批时可修改」。；添加策略，填写名称，选择操作，描述（选填），权重，重定向URL SecurityGroup：点击SecurityGroup名称，进入节点详细设置，共有「基本信息」和「属性」两个标签页 「基本信息」：显示类型、类别、名称等基本信息 「属性」页面：默认\"使用已有安全组\"，选择一个安全组 「Note」OpenStack资源池中，在「网络资源」-「安全策略组」中需要选择一个安全策略组后，才能在SecurityGroup「属性」页面选择一个已有的安全组 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，OpenStack LoadBalancer with SecuriryGruop虚拟机服务配置并发布成功 配置OpenStack FloatingIP服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择OpenStack FloatingIP蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到OpenStack FloatingIP服务拓扑图及组件FloatingIP FloatingIP：点击LoadBalancer名称，进入节点详细设置，共有「基本信息」和「属性」两个标签页 「基本信息」：显示类型、类别、名称等基本信息 「属性」页面 属性（不勾选使用已有资源） 网络 选择FloatingIP的网络，勾选「允许修改」和「仅审批时可修改」。 子网 选择FloatingIP网络对应的子网，勾选「允许修改」和「仅审批时可修改」。 IP分配方式 选择IP分配方式，支持IP池、DHCP、手工指定，若选择手工指定，则需在服务申请时指定IP地址 IP池 若选择IP池的分配方式，选择IP池 DNS名称 仅支持请求服务时填写，如需指定DNS请勾选允许申请时更改 DNS域 选填，勾选「允许修改」和「仅审批时可修改」。 DNS服务器 选填，勾选「允许修改」和「仅审批时可修改」。 DNS类型 选填，勾选「允许修改」和「仅审批时可修改」。 属性（勾选使用已有资源） 浮动IP 选择FloatingIP的网络，勾选「允许修改」和「仅审批时可修改」。 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，OpenStack FloatingIP虚拟机服务配置并发布成功 配置OpenStack DNS服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择OpenStack DNS蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到OpenStack DNS服务拓扑图及组件DNS DNS：点击DNS名称，进入节点详细设置，共有「基本信息」和「属性」两个标签页 「基本信息」：显示类型、类别、名称等基本信息 「属性」页面 DNS类型 支持A、CNAME、MX、TXT 4种类型 • A记录：WEB服务器的IP指向，用来指定主机名（或域名）对应的IP地址记录 • CNAME记录：别名解析 • MX记录：邮件交换记录 • TXT记录：某个主机名或域名的说明 MX优先级 如果DNS类型选择MX，将出现「MX优先级」这个菜单 DNS名称 输入DNS的名称，默认强制允许申请时更改 DNS域 选择DNS域，在系统配置中添加的DNS域 DNS服务器 根据所在业务组的OpenStack云平台服务器中配置的DNS服务器选择 DNS参数 若DNS类型选择的A：填写IP地址，支持多条，用逗号分隔； 若DNS类型选择的CNAME：输入域名，例test.example.com 若DNS类型选择的MX：输入域名，例test.example.com 若DNS类型选择的TXT：输入一段描述 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，OpenStack DNS虚拟机服务配置并发布成功 配置Kubernetes服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到Kubernetes服务拓扑图以及服务配置中的所有组件，根据kubernetes蓝图，一共有4个组件，分别是Deployment、Service、Container、PersistentVolumeClaim Deployment：点击Deployment名称，进入「基本信息」页面，点击「属性」，可选择副本数量，默认为1，点击「保存」 Container：点击Container名称，进入基本信息页面，点击「属性」标签页： Container 镜像源 选择已添加的镜像源，可在kubernetes云平台中添加的Habor、Docker Trusted Registry镜像源，勾选「允许修改」和「仅审批时可修改」。 镜像名称 若已选镜像源，则自动过滤该镜像源下的镜像；若未选择镜像源，可输入名称自动创建，勾选「允许修改」和「仅审批时可修改」。 镜像标签 选择需要的镜像标签，勾选「允许修改」和「仅审批时可修改」。 资源规格 - CPU 输入请求的CPU大小和最大限制的CPU大小，请求的CPU不能大于最大限制，支持申请时改变 资源规格 - 内存 输入请求的内存大小和最大限制的内存大小，请求的内存不能大于最大限制，支持申请时改变 容器开放端口 例如8080 环境变量 例如参数/JRE_Home的值为/usr Service：点击Service名称，进入基本信息页面，点击「属性」，可配置端口映射，填写下列的信息： 服务端口 服务对外开放的端口，例如8080 所依赖的Deployment节点 选择该Service依赖的一个Deployment节点 所依赖的Container节点 选择Deployment中的容器节点 容器开放端口 选择容器中配置的开放端口 主机端口 选择Node的开放端口，默认范围30000-32767 协议 TCP或者UDP PersistentVolumeClaim：点击PersistentVolumeClaim名称，进入基本信息页面，点击「属性」： 挂载点 例如/opt/share 访问模式 支持ReadWriteOnce，ReadOnlyMany，ReadWriteMany 存储类 Standard 空间限额（Gi） 输入空间大小 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，Kubernetes虚拟机服务配置并发布成功 配置阿里云服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择创建的阿里云蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到阿里云服务拓扑图以及服务配置中的所有组件：Instance、SecurityGroup Instance：点击Instance名称，进入节点详细设置，共有「基本信息」「网络」「属性」「存储」「安全策略组」「负载均衡」「操作许可」等标签页 「基本信息」页面： 基本信息 展示Instance的类型、类别和名称等基本信息. 资源池选择策略:1. 自动选择：平台自动按照策略选择资源池 2. 基于资源标签选择：若该服务所使用的蓝图中已有资源便签，默认继承该资源标签，根据标签去选择业务组中匹配该标签的资源池（前提是资源池已设置资源标签），实现将资源部署到特定的资源池中。也可在服务配置选择其他资源标签；勾选「允许修改」和「仅审批时可修改」。，勾选后可在申请时选择 3. 手工指定：可选择为该服务手工指定资源池，若 资源池选择策略选择“手工指定”后，将出现资源池选择项，指定资源池，允许资源池申请时改变 「Note」若该服务共享给全部业务组，则资源池无法指定，默认强制勾选「允许修改」和「仅审批时可修改」。；若该服务指定给某一业务组，则选择该业务组下的资源池 云主机数量 选择部署的云主机数量，勾选「允许修改」和「仅审批时可修改」。 「网络」页面： 可用区 选择网络的可用区。更改可用区可能会导致虚拟交换机、虚拟机规格、磁盘种类等值的相应改变 网络类型 根据资源池中配置的网络类型显示 专有网络 若选择专有网络，需选择专有网络 虚拟交换机 若选择专有网络，需选择虚拟交换机 分配公网IP地址 选中此项，用于安装软件组件或运行脚本 「属性」页面 付费方式 选择预付费或后付费 虚拟机镜像 选择阿里云上的虚拟机镜像 虚拟机规格 选择虚拟机规格 监控方式 选择监控方式，无监控或SSH安装监控代理 安装自动化代理 不安装或SSH安装 应用蓝图自动化部署，服务配置初始化并挂载磁盘，以及某些虚拟机操作（如重置密码、添加新逻辑卷等）将使用此代理；如果未安装，这些功能将受影响。安装自动化代理前提条件：网络类型必须是专有网络（VPC） 用户名 root用户 密码 请输入模板的密码以便在此云主机上安装软件 购买资源时长单位（预付费） 月或周 购买单位时长（预付费） 若购买资源时长单位选择“月”，则可选择1~9，12、24、36、48、60等时长,若购买资源时长单位选择“周”，则可选择1~4周 是否自动续费（预付费） 若勾选自动续费，则根据购买资源时长单位延长相应的周或月 「存储」页面：支持添加或编辑磁盘信息，添加磁盘需填写描述（选填）、选择磁盘种类、填写大小（GB），选择快照 「安全策略组」页面：默认安全策略组且不可编辑 「负载均衡」页面：无 「操作许可」页面：默认继承业务组 「SecurityGroup 」组件：点击SecurityGroup 名称，进入节点详细设置，共有「基本信息」「属性」两个标签页 「基本信息」页面：可查看SecurityGroup 组件类型、类别、名称 「属性」页面： 使用已有安全组，选择一个已有安全组（资源池中配置的安全组）, 若需要新建安全组，需在「服务建模」-「蓝图设计」- 阿里云蓝图 SecurityGroup 参数选项，取消勾选\"使用已有资源\"，即可在此新建安全组,安全组名称 填写新建的安全组的名称。管理安全组规则 点击“添加规则”，新建安全组规则 网卡类型：选择私网或公网 规则方向：选择入口或出口 授权策略：选择允许或拒绝 协议类型：选择全部或http、udp、icmp、gre 端口范围：取值范围为1~65535；例如“1/200”、“80/80” 授权类型：地址段访问 授权对象：请谨慎设置授权对象，根据授权策略的不同，0.0.0.0/0代表允许或拒绝所有IP的访问（可点击“教我设置”） 优先级：设置规则优先级 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，阿里云服务配置并发布成功 配置Azure服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择创建的Azure蓝图），业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到Azure服务拓扑图以及服务配置中的所有组件：Instance、VirtualNetwork、AvailabilitySet、SecurityGroup、LoadBalancer、LoadBalancerRule、BlobContainer Instance：点击Instance名称，进入节点详细设置，共有「基本信息」「云资源配置」「网络」「操作许可」等标签页 「基本信息」页面：显示类型、类别、名称等基本信息。可设置部署的云主机数量，勾选「允许修改」和「仅审批时可修改」 「云资源配置」：包括「云主机配置」、「资源池配置」、「虚拟机模板配置」、「资源规格配置」四部分 云主机配置 云主机名称，默认继承业务组命名规则，勾选「允许修改」和「仅审批时可修改」 资源池配置 + 资源池选择策略：目前支持 “手工指定”一个资源池，勾选「允许修改」和「仅审批时可修改」 诊断存储账户：选择一个存储账户 磁盘类型：选择一种磁盘类型，如HDD、SSD 虚拟机模板配置 操作系统名称：选择Windows或Linux操作系统 虚拟机模板：选择windows或Linux操作系统下的Azure虚拟机模板 资源规格配置 + 资源规格：选择一种系统创建的资源规格 云平台规格：从该资源规格下的Azure云平台资源规格中选择一种 「网络」页面：显示虚拟网络名称、子网、IP分配方式等信息。可勾选「使用公共IP」 「操作许可」页面默认继承业务组配置 VirtualNetwork：点击VirtualNetwork名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息。 「属性」页面：可选择子网，勾选「允许修改」和「仅审批时可修改」 AvailabilitySet：点击Availability名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息。 「属性」页面：默认勾选「使用已有资源」。可选择可用性集，勾选「允许修改」和「仅审批时可修改」 SecurityGroup：点击SecurityGroup名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息。 「属性」页面：默认勾选「使用已有安全组」。可选择安全组，勾选「允许修改」和「仅审批时可修改」选择安全组后，列出详细的入站、出站安全规则。 LoadBalancer：点击LoadBalancer名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息。 「属性」页面：默认勾选「使用已有资源」。可选择负载均衡器，勾选「允许修改」和「仅审批时可修改」 LoadBalancerRule：点击LoadBalancerRule名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息。 「属性」页面：输入负载均衡规则名称、选择前端IP地址和通信协议（TCP/UDP）、输入端口和后端端口。上述项目均勾选「允许修改」和「仅审批时可修改」。。 BlobContainer：点击BlobContainer名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型、类别、名称等信息 「属性」页面：基于\"资源池选择策略（手工指定/自动选择/基于资源标签选择）\"选择资源池，勾选「允许修改」和「仅审批时可修改」。。输入BlobContainer名称，勾选「允许修改」和「仅审批时可修改」。。选择一个存储账户，并选择公共访问级别（仅匿名读取访问Blob/匿名读取访问容器和Blob） 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，Azure服务配置并发布成功 配置AWS服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择AWS蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到AWS服务拓扑图以及服务配置中的所有组件：Instance、SecurityGroup Instance：点击Instance名称，进入节点详细设置，共有「基本信息」「云资源配置」「操作许可」等标签页 「基本信息」页面： 基本信息 展示Instance的类型、名称等基本信息 云主机数量 默认云主机数量为1，可更改或选择\"勾选「允许修改」和「仅审批时可修改」。\" 「云资源配置」页面： 云主机配置 云主机名称 没有定义时默认继承业务组命名规则，支持勾选「允许修改」和「仅审批时可修改」。 资源池配置 资源池选择策略 + 手工指定：手工指定资源池 「Note」若该服务共享给全部业务组，则资源池无法指定，默认强制勾选「允许修改」和「仅审批时可修改」。；若该服务指定给某一业务组，则选择该业务组下的资源池 资源池 选择资源池，将根据蓝图类型进行过滤 可用区 选择可用区，将根据所选资源池中可用区进行过滤 子网 选择子网，将根据所选资源池中配置的子网进行过滤 虚拟机模板配置 操作系统 选择Linux操作系统 虚拟机模板 选择该操作系统下的青云虚拟机模板 计算规格配置 资源规格 选择在「基础设施」-「计算规格」中自定义的规格 云平台规格 选择在「基础设施」-「计算规格」中自定义的云平台规格，将根据所选的资源规格进行过滤 公网配置 分配公网IP地址 可选是否分配公网IP地址 「操作许可」页面：在此可启用虚拟机的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的规则和审批流程。默认选填继承业务组配置，可增删，可对操作列表进行角色筛选 SecurityGroup：点击SecurityGroup名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型和名称 「属性」页面： 默认勾选「使用已有安全组」，选择已有安全组，选择后将列出该安全组的规则，勾选「允许修改」和「仅审批时可修改」。 若不勾选「使用已有安全组」即新建安全组，填写安全组名称、描述，名称勾选「允许修改」和「仅审批时可修改」。，点击添加规则，配置相关的安全组规则 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，AWS服务配置并发布成功 配置青云服务 在左侧导航选择「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择青云蓝图，业务组，点击「提交」 「基本信息」「输入与输出」和「服务部署操作许可」视图配置请参照[概述] 「组件配置」视图：可以看到青云服务拓扑图以及服务配置中的所有组件：WindowsInstance、SecurityGroup WindowsInstance：点击WindowsInstance名称，进入节点详细设置，共有「基本信息」「云资源配置」「操作许可」等标签页。 「基本信息」页面： 基本信息 展示WindowsInstance的类型、名称等基本信息。 云主机数量 默认云主机数量为1，可更改或选择\"勾选「允许修改」和「仅审批时可修改」。\" 「云资源配置」页面： 云主机配置云主机名称， 没有定义时默认继承业务组命名规则，支持勾选「允许修改」和「仅审批时可修改」。 资源池配置，资源池选择策略； 手工指定：手工指定资源池。选择资源池，将根据蓝图类型进行过滤。 选择子网，将根据所选资源池中配置的子网进行过滤。 「Note」若该服务共享给全部业务组，则资源池无法指定，默认强制勾选「允许修改」和「仅审批时可修改」。；若该服务指定给某一业务组，则选择该业务组下的资源池 虚拟机模板配置：操作系统 选择Linux操作系统；虚拟机模板 选择该操作系统下的青云虚拟机模板 计算规格配置：资源规格 选择在「基础设施」-「计算规格」中自定义的规格；云平台规格 选择在「基础设施」-「计算规格」中自定义的云平台规格，将根据所选的资源规格进行过滤；公网配置分配公网IP地址 可选是否分配公网IP地址。 没有定义时默认继承业务组命名规则，支持勾选「允许修改」和「仅审批时可修改」。 手工指定：手工指定资源池 「Note」若该服务共享给全部业务组，则资源池无法指定，默认强制勾选「允许修改」和「仅审批时可修改」。；若该服务指定给某一业务组，则选择该业务组下的资源池 「操作许可」页面：在此可启用虚拟机的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的规则和审批流程。默认选填继承业务组配置，可增删，可对操作列表进行角色筛选 SecurityGroup：点击SecurityGroup名称，进入节点详细设置，共有「基本信息」「属性」等标签页 「基本信息」页面：显示类型和名称 「属性」页面： 默认勾选「使用已有安全组」，选择已有安全组，选择后将列出该安全组的规则，勾选「允许修改」和「仅审批时可修改」。 若不勾选「使用已有安全组」即新建安全组，填写安全组名称，点击添加规则，配置相关的防火墙规则 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，青云服务配置并发布成功 配置Hyper-V服务 在左侧导航点击「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择Hyper-V单节点蓝图），业务组，点击「提交」 「基本信息」页面： 业务组 部署所属业务组 服务部署名称 部署名称（若业务组已设定服务部署命名规则，服务部署名称将按照规则自动生成，无需填写） Logo图像 上传图像，在服务目录展示时更美观 描述 部署描述 服务分组 内置三者类型：工单服务、数据库、基础设施，支持自定义（关于服务分组的详细介绍请参考：服务分组 顺序 指定服务目录中的排列顺序，数值小的排列靠前 服务状态 实时展示服务状态，如：未发布 服务部署租用时间（日） 租用时间，租用时间到后，部署里的所有云主机会停机并归档 服务部署保留时间（日） 保留时间，保留时间到后，部署会被卸除 允许申请时添加软件 勾选上则允许服务申请时添加软件 审批流程 可选择无审批流程、默认审批流程和自定义的审批流程 「流程配置」视图：可以选择流程类型，查看流程信息、流程图、流程步骤 「组件配置」视图：可以看到Hyper-V服务拓扑图以及服所有组件：WindowsInstance和NetworkAdapter，可进行组件节点详细设计。其中下面为您详细介绍WindowsInstance云资源配置： 资源池配置 资源池选择策略：选择手工指定；资源池：选择Hyper-V资源池，勾选申请时可见则服务申请时显示，勾选申请时可修改则在服务申请时可以修改资源池。 计算规格 计算规格：选择微型（1C1G）; 勾选申请时可见则服务申请时显示，勾选申请时可修改则在服务申请时可以修改计算规格。 「输入与输出配置请参照[概述] 「服务部署操作许可」视图：在此可启用服务部署管理中的各项操作，以及配置所需的审批流程。对于每个操作，可针对不同的角色，配置不同的规则和审批流程。默认继承业务组配置，可增删，可对操作列表进行角色筛选 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，Hyper-V虚拟机服务配置并发布成功 配置F5与OpenStack组合服务 在左侧导航点击「服务建模」-「服务配置」，点击左上角的「添加」进入新建服务配置界面，依次填写服务名称，服务描述（选填），蓝图设计（选择F5与OpenStack组合蓝图），点击「提交」。 「基本信息」页面： 除了服务名称自定义填写，其余与配置vSphere单节点服务基本信息页面一致。 「流程配置」视图：可以选择流程类型，查看流程信息、流程图、流程步骤 「组件配置」视图：可以看到OpenStack 服务拓扑图以及所有组件：Server、Network，F5服务所有组件：Virtual Server、Pool以及SNAT Pool OpenStack的Server和Network组件，配置参考：配置OpenStack单节点服务 F5服务的组件配置： Pool: 进入「属性」视图，选择资源池选择策略（手工指定），选择资源池（F5BIG-IP资源池），勾选允许修改 则在服务申请时允许修改，选择负载均衡方式；SNAT Pool: 进入「属性」视图，选择资源池选择策略（手工指定），选择资源池（F5BIG-IP资源池），勾选允许修改 则在服务申请时允许修改，定义基础属性 ：勾选使用已有资源 选择已有的SNATPool，例如：F5-SNATPool;不勾选使用已有资源 定义IP名称和IP地址，例如： Virtual Server: 进入「属性」视图，选择资源池选择策略（手工指定），选择资源池（F5 BIG-IP资源池），勾选允许修改 则在服务申请时允许修改，IP分配方式选择（IP池） 点击「保存」，返回组件列表界面。点击「验证」，验证成功后，「保存并发布」该服务，F5服务配置并发布成功 编辑服务配置 在左侧导航选择「服务建模」-「服务配置」，在服务配置列表界面，点击服务配置名称，进入「基本信息」页面，可编辑相应的参数，点击」保存」。 取消发布服务配置 在左侧导航选择「服务建模」-「服务配置」，在服务配置列表界面，选中某服务配置，若该服务配置状态为\"已发布\"，则「取消发布」操作可用，点击后确定，取消发布成功。在服务配置列表界面该服务配置状态更改为\"未发布\"，未发布服务配置将不能在服务目录界面显示且不能被申请。 卸除服务配置 在左侧导航选择「服务建模」-「服务配置」，在服务配置列表界面，选中某服务配置，点击「卸除服务部署」，确定后卸除服务配置成功。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/05服务建模/脚本库.html":{"url":"AdminDoc/05服务建模/脚本库.html","title":"脚本库","keywords":"","body":"脚本库 SmartCMP支持执行多种类型的脚本，包括shell、powershell、ansible、python、perl等。 点击「服务建模」-「脚本库」，进入脚本库列表界面，可以管理云主机执行脚本时所需脚本，以便云主机批量运维操作中使用，可以设置脚本类型、系统类型、脚本内容和脚本参数。 添加脚本 在左边导航选择「服务建模」-「脚本库」，点击「添加」按钮，出现创建脚本页面 输入脚本名称，脚本内容，选择脚本类型、系统类型、换行符、业务组。例如，下图创建更新插件的脚本，在创建脚本时需要注意，选择合适的业务组，脚本将只会应用在属于该业务组的云主机。 在页面下方脚本参数列表中点击按钮，编辑脚本参数并「保存」。例如，下图中定义脚本参数，指定需要更新的插件存放地址，指定插件的云平台属性，all代表升级更新所有，openstack,vsphere作为备选项。 点击「保存」，脚本创建成功 执行创建成功的脚本具体步骤：在左边导航选择「我的部署」-「云主机」，选择业务组下的云主机，点击执行脚本，在执行脚本配置页面，选择all,更新所有的插件 查看脚本库 在左边导航选择「服务建模」-「脚本库」，进入脚本库界面，显示当前所有的脚本。 编辑、删除脚本 在脚本库列表界面，选中一个脚本，点击「编辑」，可对脚本进行编辑。也可直接点击脚本名称进入编辑页面。点击「删除」，确认删除提示点击「是」，可删除该脚本。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/06云服务管理/":{"url":"AdminDoc/06云服务管理/","title":"云服务管理","keywords":"","body":"云服务管理 通过SmartCMP，普通用户不仅能够完成用户自服务申请云资源，云资源自动化部署交付，也可以自助地进行运维操作、查看性能监控信息，以及设置告警。同时，SmartCMP将基于管理员配置的策略对资源自动进行到期回收，实现生命周期管理，避免闲置、浪费。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/06云服务管理/服务目录.html":{"url":"AdminDoc/06云服务管理/服务目录.html","title":"服务申请","keywords":"","body":"服务申请 服务目录展现方式 服务配置发布成功之后，将会在服务目录界面看到发布的服务卡片，服务目录的界面展示支持两种方式： 标签页展示：即分组按照标签页展示，可以通过服务分组标签、业务组或搜索框快速定位您需要申请的服务。 层级展示：按照卡片的模式，先展示分组（图标，名称，描述）--文件夹的显示方式，点击一个分组，再展现这个分组的所有卡片，对于没有分组的卡片，如果按照层级展示，增加一个 未分组的服务 文件夹，点击进入展现所有未分组的卡片。如果卡片都是有分组的，则这个文件夹不显示。 「Note」 服务目录展现方式,在系统配置-界面配置功能区进行选择，具体操作步骤，请参考：界面配置 标签页展示 服务目录申请 当服务目录以标签页方式展示时，可以通过服务分组标签，例如：数据库、基础设施、工单服务等等，或通过不同的业务组，或通过搜索框快速定位您需要申请的服务。 以\"在vSphere云平台上部署虚拟机\"为例： 在左侧导航栏点击「服务目录」，选择某 \"vSphere VM\" 服务，点击将进入服务申请页面 服务申请页面的相关申请参数： 组织信息 业务组 若该服务为全部业务组，即共享服务，需选择业务组（该业务组需有相关资源池，否则将不允许申请）；若服务配置时该服务已指定业务组，则无需填写 项目 若该业务组下划分了项目，则可以选择项目 所有者 选择该服务的所有者，所有者需为业务组成员，服务部署的所有者，在服务部署的运维操作中支持更新所有者 部署信息 名称 若业务组已配置 “服务部署名命名规则”，则服务部署名无需填写，将根据业务组规则自动生成，若业务组未配置“服务部署名命名规则”，需手动填写 数量 填写部署的数量，默认为1 执行时间 可指定时间开始服务部署，精确到分钟 键值标签 默认勾选，所有server节点使用相同的键值标签， 若不勾选，将列出该服务部署下的所有server节点，可为每个server节点单独设置键值标签 其他信息 表单配置的参数 如果您在服务配置的表单配置中为云资源蓝图服务和手工单服务自定义相关字段，则在此处填写所需信息 申请参数 申请参数 若服务配置时，仅仅勾选了 “允许改变”这一项（没有勾选“仅审批时可修改”）或 ，将出现申请参数栏，可根据需要配置相关Server、Network、等组件的详细参数 软件配置 若在服务配置时勾选了“允许申请时添加软件”，将出现软件配置栏，可为该服务的计算节点/软件组件添加软件，点击「添加软件」 选择要安装的软件，将列出所有的软件组件；选择关系：“安装到”或“依赖于”；选择要安装到或依赖于的节点。 填写完成后点击「申请」，将根据业务组流程控制直接部署或等待审批，可至「我的部署」-「服务部署」中查看部署情况（也可在右上角「操作历史」中查看部署情况），或至「服务请求」-「待审批」中查看审批流程。 在您进行服务申请时，未能一次性填写完相关参数，点击「保存」能够对已填写参数进行保存，并且在下次申请的时候，点击「加载」可以重新加载，自动填充上次已经填写好的参数。 在您进行服务申请时，提前配置计费规则（私有云和共有云不相同，见下文），平台可以显示此次申请的费用，计费规则的具体配置步骤： 针对私有云，管理员在「计量计费」-「计费规则」配置私有云的计费规则之后，用户在申请服务时，直接使用计费的API进行计费。 针对公有云需要缓存公有云的单价API结构，然后计算费用。 层级展示 采用层级展示的方式，按照卡片的模式，先展示服务分组,服务分组的具体操作步骤，请参考：服务分组 在服务目录视图界面，可查看服务分组的图标、名称、描述和文件夹的显示方式，点击一个分组，展现此服务分组的所有卡片。（注意：当管理员创建的服务卡片没有选择服务分组时，如果按照层级展示，此类型卡片会存入 “未分组的服务” 文件夹，点击进入展现所有未分组的卡片。如果管理员创建的服务卡片都是有分组的，则“未分组的服务” 文件夹不显示。） 选择蓝图进行云资源申请 SmartCMP支持一张服务卡片绑定多个蓝图，支持用户根据需求快速选择蓝图，例如：\"申请数据库\"的服务卡片，提前配置了Mysql、Oracl、NoSQL等等与数据库相关的蓝图。 例如：可以通过以下步骤选择蓝图自服务申请： 进入「服务目录」，在“申请云资源”的卡片上点击「申请」，指定关联一个蓝图，点击「下一步」 「基本信息」页面，填写： 业务组 部署所属业务组 服务部署名称 部署名称（若业务组已设定服务部署命名规则，服务部署名称将按照规则自动生成，无需填写） 项目 部署所属项目 所有者 部署所有者 填写相关申请参数，例如：资源池、私有网络、虚拟机配置、存储大小、节点数量等等信息。 点击「保存」，确认无误后点击「提交」，等待部署完成。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/06云服务管理/服务请求.html":{"url":"AdminDoc/06云服务管理/服务请求.html","title":"服务请求","keywords":"","body":"服务请求 在待审批的页面，管理员在审批流程中配置的审批人，审批人具有审批权限，则能够查看待审批的服务请求的详细信息，并进行审批操作。 「Note」如果您想查看待审批的服务请求的详细信息，请您参考：待审批。 审批人执行审批操作完成之后，点击左侧菜单栏的「服务请求」-「已审批」，可查看所有已审批的申请列表。该页面显示申请编号、申请类型、服务部署名称、申请者、业务组、项目、申请状态、申请时间以及完成时间。 「Note」如果您想查看待审批的服务请求的详细信息，请您参考：已审批。 已审批 此处显示已经通过审批的所有请求。 在左侧导航栏点击「服务请求」-「已审批」，已审批页面显示你发起的所有审批请求其中已经审批通过的部分，其中显示审批请求的基本信息：申请编号，请求类型，服务部署名称，申请者，业务组，项目，申请状态，申请时间。 待审批 在待审批的页面，管理员在审批流程中配置的审批人，审批人具有审批权限，则能够查看待审批的服务请求的详细信息，并进行审批操作。 在左侧导航栏点击「服务请求」-「待审批」，我的待审批页面显示你发起的所有审批请求其中待审批部分，其中显示审批请求的基本信息：申请编号，请求类型，服务部署名称，申请者，业务组，项目，申请状态，申请时间。 选择一个请求，点击「请求编号」链接，跳转到我的请求详情页面，可查看该请求的审批人，审批状态，基本信息，工单信息，服务部署信息，组件参数，IP地址，部署资源占用信息总览，服务请求，资源申请依据等等。 基本信息包括请求编号，申请时间，请求类型，申请者，业务组，项目等等。 服务部署基本信息包括服务目录，服务部署名称、数量、原因。 组建参数采集蓝图部署组件的参数 查看部署资源占用信息总览：资源池名称，待分配资源等 服务请求信息：审批流程，审批流程名称，状态，审批意见，审批人，审批角色，审批时间和审批意见等。 点击页面下方批准按钮即可批准此次申请，申请状态变更为已审批，点击拒绝，则此处申请被驳回，填写审批意见点击退回，申请则退回申请人处修改申请详情。 所有请求 租户管理员可查看所有申请的详细信息,具体步骤如下： 点击左侧菜单栏的「服务请求」-「所有请求」，可查看该租户的所有的申请列表，包括待审批和已审批，待处理和已处理（待处理和已处理在工单服务管理中详细介绍，具体请您参考待处理、已处理。 该页面显示请求编号、服务名称、请求类型、标题、业务组、项目、申请状态、申请时间以及完成时间。可点击「申请编号」可查看申请的详细信息。 基本信息包括请求编号，申请时间，请求类型，申请者，联系方式，邮箱，业务组，项目等等。 工单信息包括标题，描述，优先级，紧急程度。 审批信息包括审批人，审批状态，服务部署名称，服务请求，资源申请依据。 处理记录包括流程步骤，描述，处理结果描述，状态，处理人，处理时间 「Note」默认租户管理员有查看所有申请的权限 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/06云服务管理/我的部署.html":{"url":"AdminDoc/06云服务管理/我的部署.html","title":"我的部署","keywords":"","body":"我的部署 服务部署 服务部署页面可查看服务部署的状态、详情、监控等。用户在「服务目录」选择蓝图自服务申请或服务目录申请后，可在服务部署界面查看部署的服务状态，若该部署有审批流程，在服务部署页面可跳转至审批页面，查看当前的审批流程；若无审批，则可查看该部署详情信息。 在左侧导航栏选择「我的部署」-「服务部署」后，用户将会看到服务部署列表，点击高级搜索，可根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中 ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作 在服务部署列表中，用户可以选中一个或者多个服务部署快速进行一些操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」，更多操作如：「更改项目」「更改业务组」和「伸缩」 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」「监控」（对云主机和应用组件的监控）以及顶部的运维操作 「基本信息」包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将操作失败更改为运行 「服务部署拓扑」包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等 「操作历史」显示该服务部署的操作历史记录 「监控」显示对该部署中有的组件应用的监控信息 服务部署运维操作 在服务部署列表界面或点击服务部署名称进入服务部署详情界面，均可对服务部署做运维操作。服务部署的运维操作由业务组和服务配置进行控制。可在「业务组」-「服务部署操作许可」中选择启用或不启用相应的运维操作给相应的角色，若启用还可指定是否需要审批，以及其审批模板。若启用，则可以在「服务建模」-「服务配置」-「服务部署操作许可」中选择为该服务继承业务组配置或在业务组配置基础上，对运维操作进行删减。在展示页面对服务部署运维的更多操作进行分组。 刷新状态 状态为遗失的虚拟机无法查看详情，在某些业务场景中，遗失的虚拟机会重新加入平台中，需要支持能够手动刷新状态。同时，也要能够支持其他云资源状态的刷新。 支持批量刷新，在服务部署列表中，选中一个或多个部署 点击“刷新状态”按钮，可以手工刷新状态。刷新状态的按钮放在第一个。 刷新后，后台更新每个服务部署的状态还包括：规格配置的修改，磁盘的增加，IP地址的修改，刷新的结果通过通知返回。刷新的操作会记录到操作历史中。 在云主机中进行运维操作时，SmartCMP能够根据虚拟机的UUID重新刷新虚拟机的正确状态 启动服务部署 若服务部署处于关闭状态，则「启动服务部署」操作可用。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 停止服务部署 若服务部署处于正在运行的状态，则可以「停止服务部署」，该操作将对该服务部署下的所有虚机进行关机操作。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 安装软件 选择服务部署下的云主机，并选择需要安装的软件。该软件列表来源于「软件组件」，可对软件的属性键值进行更改。 更改组织信息 更改所有者 更改服务部署的所有者，将会同时改变该服务部署下的所有虚机的所有者。现在目标所有者，该所有者为该业务组下的成员。 更改项目 更改服务部署的所属项目，将会同时改变该服务部署下的所有虚机的所属项目。选择目标项目，并选择该项目下的用户。 更改业务组 将会把该服务部署下的所有虚机同时更改到新业务组中，并修改所有者等相关信息。选择目标业务组，项目（可选），所有者（该业务组下的成员），资源池（该业务组下的资源池）。如果资源池列表为空，表示该业务组上没有可用的资源。 扩展与收缩 伸缩 扩展当前部署下的实例，静态IP部署的Server不支持伸缩。至少伸缩1个实例，最多6个。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 复制服务部署 服务部署成功后，可将该服务部署整体的应用环境复制至其他云平台或克隆至当前云平台。 常见应用场景：例如将vSphere服务部署复制至阿里云，vSphere至vSphere，阿里云至阿里专有云 操作步骤： 选择目标服务：选择目标业务组、项目（可选）、所有者以及服务，选择当前实例节点作为模板来复制/新建到所选的服务拓扑图中的目标节点 配置参数：填写服务部署名称（若业务组有规则将根据业务组规则自动生成）、服务部署租用到期时间，以及配置该服务拓扑图中的其他节点参数，针对每个计算节点，可以选择复制或者新建（从模板部署一台新机器） 点击提交，等待执行。 「Note」若是跨云复制，则需要第三方支持 延长过期时间 延长服务部署的租用到期时间，点击将显示业务组中设置的最大可延期次数以及已延期次数，选择延长到哪一时间到期，精确到分钟。 删除 卸除服务部署 服务部署后，可卸除该服务部署下的云资源。卸除服务部署将删除在SmartCMP中新建的所有资源。若该服务部署中包含共享资源，将不删除共享资源；若该服务部署包含已有资源，如LoadBalance\"使用已有资源\"，将不删除已有资源；若导入资源后，您是该资源的Owner，可删除导入资源。 删除管理信息 删除该服务部署以及所属虚拟机在SmartCMP上的相关信息，在相关云平台中仍然保留，不进行删除。 删除节点 可在服务部署后删除计算节点、存储和软件组件。点击「删除节点」，将展示该服务部署名称、该部署下的所有计算节点、存储和软件组件节点以及部署状态，可单选或多选节点进行删除，可启用定时指定时间进行操作。 重新部署 重新执行部署 可在服务部署后针对部署节点进行重新执行部署的操作。 操作步骤： 点击「重新执行部署」，将展示该服务部署名称、该部署下的所有计算节点/存储节点/软件组件节点以及部署状态 可单选或多选节点进行重新执行；可启用定时，指定时间进行操作 点击「提交」，等待执行 云主机 用户可以根据下面的步骤来查看云主机列表来对其进行管理和操作，操作的启用和是否需要审批需要在业务组级别或者服务配置级别进行设置： 在左侧导航栏选择「我的部署」-「云主机」后，用户将会看到云主机的列表。可在该列表界面查看云主机名称、所属云平台、操作系统、云主机状态（已启动、遗失、停止等）、健康状态、业务组、项目、服务部署、租用到期时间、保留到期时间、所有者、IP地址、标签、已装软件、资源标签等，其他展示列可通过点击「展示列」，可以勾选或者不选某些列进行展示。根据业务组，项目，所有者，状态，标签、云平台类型、是否启用监控、云平台类型、是否安装代理、操作系统类型、是否导入进行筛选 在云主机列表中，用户可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」，具体操作介绍会在下文展开 您也可以单击某一个云主机进入其详情界面进行管理和操作，虚拟机详情界面包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」和顶部的运维操作列表 「基本信息」包括了虚拟机及其相关主机的一些信息，该虚拟机在平台中的组织信息以及该虚拟机的CPU、内存、存储的运行状态、VNC连接信息等 「操作历史」包括了该虚拟机进行过的操作的历史记录 「快照信息」显示当前的快照信息（快照名称、创建时间等），点击「添加」可以创建快照 「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据） 「Note」只有在虚拟机模板中配置安装监控的虚拟机在部署生成后，才可以在监控中看到数据，如何配置安装监控请参看「虚拟机模板管理」章节。 「应用列表」显示当前虚机已安装的应用列表 运维的操作列表包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开 「Note」只有在业务组设置或服务配置时配置虚拟机的操作许可，虚拟机在部署生成后才能看到允许的操作列表，如何配置虚拟机操作许可请参看「业务组管理」和「服务配置」章节。 云主机运维操作 在云主机列表界面或点击云主机名称进入云主机详情页面，均可对云主机进行下列运维操作，运维操作的启用与否由业务组/服务部署进行控制。 启动 可以实时启动（关机状态的）虚拟机，也可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 挂起（vSphere） 挂起（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 挂起多个（开机状态的）虚拟机，可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 「Note」只有vSphere的虚拟机才会有此操作选项。 停止 停止（即关机）（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 重启 重启（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 重启多个（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 执行脚本 在该虚拟机中执行一个脚本库的脚本，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务，也可选择某个IP地址。 「Note」如果没有安装代理，执行脚本时必须输入虚机的用户名和密码 vMotion迁移（vSphere） 支持对vSphere 的计算资源迁移和存储迁移。利用vSphere的vMotion迁移功能，使用不同的迁移方式，将虚拟机在不同主机之间进行迁移。 计算资源迁移，选择目标主机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 存储迁移： 链接克隆：选择需要存储，将目标云主机迁移到所选的存储中去； 完全克隆：选择置备模式（与源格式相同、精简置备、厚置备延迟置零、后置备置零）；选择虚拟机存储策略（保留现有虚拟机存储策略、数据存储默认值，以及其他自定义存储策略）；存储（根据所选的存储策略判定存储的兼容性，并显示各存储的空间和占比） 启用定时：设置时间在将来某一时刻触发此项任务 「Note」只有vSphere的虚拟机才会有此操作选项。迁移存储时，可保留原有的置备模式和存储策略，或进行修改 远程终端 「Note」OpenStack虚拟机远程终端操作需要使用VNC Web Client, 您的浏览器需要支持HTML5 Canvas和HTML5 WebSockets。如果需要了解VNC Web Client所支持的全部浏览器，可以访问 https://github.com/kanaka/noVNC/wiki/Browser-support WEB远程终端（vSphere） vSphere的Web console client，无需浏览器特别支持。 「Note」只有vSphere的虚拟机才会有此操作选项。 设置云主机标签 「Note」每个用户都可以为云主机设置标签，无需管理员配置操作许可。 可为云主机设置键值标签，从而为云主机分类和过滤。 云主机标签的使用方法如下： 添加标签 对新建的云主机添加标签: 在左侧导航栏选择「我的部署」-「云主机」，在云主机的列表界面，选择一个云主机 点击上方的「更多操作」，「设置标签」，出现键值标签的设置界面 填写键、值，点击「创建」「执行」，标签创建成功；也可选择已有的标签，点击「执行」。在云主机列表的右侧列项，可查看添加的云主机标签 对导入的云主机添加标签： 在左侧菜单选择「基础设施」，点击「资源池管理」，选择一个资源池，进入编辑资源池界面 进入「云主机」页面，点击「导入」 点击「标签」后的输入框，弹出键值标签创建页面，输入键值，创建新标签；也可选择已有标签 修改/删除标签： 在云主机列表界面，选择一个云主机；点击「设置标签」，出现该云主机的键标签，可直接删除并重新创建。 管理磁盘 添加新磁盘 给虚拟机添加一块新的磁盘，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」在挂起状态下不能执行该操作 扩展磁盘 给虚拟机扩展一块已有的磁盘，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」支持通过云管平台部署或在上一小节创建的磁盘进行扩展。在挂起状态下不能执行该操作 删除磁盘 删除虚拟机上除系统盘以外的磁盘，包括服务配置添加的磁盘或运维新增的磁盘，均可删除。 添加新逻辑卷 给Linux虚拟机添加一个新的逻辑卷，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」在挂起状态下不能执行该操作 扩展逻辑卷 给Linux虚拟机扩展一个已有的逻辑卷，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」支持通过云管平台部署或在上一小节创建的逻辑卷进行扩展。 更改配置 调整虚机配置 调整虚拟机或容器节点的配置（vCPU，内存），点击「提交」。 添加网卡 添加一个新网卡，针对该计算节点的所有实例生效，选择网络标签和IP分配方式，目前vSphere只支持DHCP，OpenStack和PowerVC支持DHCP和IP池两种IP分配方式，OpenStack云主机还支持手动指定IP。 删除网卡 删除运维新增加的网卡，该操作会影响该节点的所有云主机。 挂载NFS 将一个NFS（网络文件系统）挂载到虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」当配置NFS云平台和资源池后，此项操作才可用 更新云主机显示名 点击「更新云主机显示名」，可以重新设置云主机的显示名。 重置操作系统主机名 点击「重置操作系统主机名」，可以重新设置操作系统主机名。 「Note」windows操作系统只有安装代理的情况下才能进行该项操作 提升Linux用户权限 可临时给某个Linux用户提升一段时间的Sudo权限（免密）。若该云主机已安装自动化代理，则只需输入用户名以及权限使用时间。若该云主机未安装自动化代理，将输入管理员用户名和密码（或选择密钥对）、以及选择IP地址。 重置密码 点击「重置密码」，可以重新设置虚拟机的新密码。 应用级别的生命周期操作 云主机详细界面里，有应用标签页，里面有属于该云主机的应用列表，选择一个应用，会出现该应用的生命周期操作，操作包括「启动」「停止」和「自定义」操作。 管理快照 创建快照 支持创建快照的时候，设置定时循环任务，例如在每天的某个时间，每周或每月的某一天，自动的进行快照创建，并且支持随时查看、取消已经设置的定时循环任。 在左边导航选择「我的部署」-「云主机」，在右边选择「快照信息」 点击「添加」按钮 ，填入定时循环信息。 点击提交，定时创建快照的任务设置成功。 在左边导航选择「我的部署」-「云主机」，在右边选择「定时任务」 选中操作名称，点击上方的删除，即可取消已经设置的定时循环任务。 恢复至快照（vSphere） 把虚拟机恢复到之前的某一个快照，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务 「Note」只有vSphere的虚拟机才会有此操作选项。 删除快照 删除已创建的快照 执行快照策略 针对阿里云的实例下的单个磁盘做执行快照策略，快照策略在阿里云平台中被创建。 取消快照策略 针对阿里云的实例下的单个磁盘取消快照策略期间。 监控和代理 添加自动化代理 如果云主机未安装自动化代理，可通过该操作安装；输入具有SSH功能并具有管理员权限的用户名和密码/密钥对，输入完成后点击「执行」。若未输入端口，还需在云主机详情页，「云主机中配置的SSH端口」中输入端口号。 更新自动化代理 如果云主机已安装自动化代理，可通过该操作进行更新。 启用/切换监控 目前对vSphere云主机支持两种监控方式：内置代理监控以及云平台监控。内置代理监控包括预安装监控代理和WinRM/SSH监控代理（WinRM对于Windows操作系统的云主机，SHH对于Linux操作系统的云主机）；云平台监控是指直接从vCenter上读取虚机的监控数据而不需要安装监控代理。 对Openstack云平台只支持内置监控代理。 更新监控代理 如果云主机安装了内置代理监控，可通过该操作进行更新。 云资源 云资源菜单下统一纳管所有的云资源，展示其相关信息以及提供各云资源对应的运维 操作。 点击左侧导航栏「我的部署」-「云资源」，将在左侧看到「存储资源」「容器服务」「网络资源」「PaaS资源」「软件资源」五个菜单。 容器服务 支持在云资源中展示kubernetes的各个组件信息，包括部署（Deployment）、容器（Container）、服务（Service）、路由（Ingress）、存储卷（PVC）、配置字典（ConfigMap）、保密字典（Secrets）等。 部署 Kubernetes的部署（Deployment）为Pod和ReplicaSet提供声明式更新。通过在Deployment中描述所期望的集群状态，DeploymentController会将现在的集群状态在一个可控的速度下逐步更新成所期望的集群状态。Deployment的主要职责同样是为了保证Pod的数量和健康，90%的功能与ReplicationController完全一样，可以看作下一代的Replication Controller。 支持对部署（Deployment） 的资源展示，点击「容器服务」-「部署」，将看到Kubernetes的部署列表：显示名称、云平台类型、状态、业务组、服务部署、项目、所有者、标签、容器组、镜像以及创建时间。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入部署详情页面。部署详情页面包括「基本信息」「容器组」「操作历史」「监控」「已触发警报」，以及「更新副本数量」「更新镜像」「调整配置」等运维操作 「Note」「监控」「已触发警报」标签页需要在Kubernetes的云平台处设置Prometheus监控地址后才会出现。 部署的「基本信息」页面包括： 基本信息：名称、命名空间、标签、注释、策略、镜像、创建时间等 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运维操作 更新副本数量：更新POD的副本数量（Replicas），点击后在弹框中选择需要更新的副本数量，也可启用定时在特定时间执行操作 更新镜像：更新该部署的实例镜像，点击后在弹出框中选择需要更新的容器节点（必填），选择镜像源，选择镜像名称（必填），选择镜像标签，也可启用定时在特定时间执行操作。点击「提交」，等待操作执行完成 「Note」支持集成Habor以及Docker 原生镜像作为Image Registry。在Kubernetes云平台中，可添加容器镜像源。参考[添加Kubernetes云平台 调整容器配置：调整选定容器节点的vCPU和内存的大小，包括请求值和最大值，请求值（request）必须小于最大值（limit） 「操作历史」：包括了该Deployment进行过的操作历史记录 「监控」：显示该部署的监控信息，如Pod CPU使用情况、Pods内存使用情况、Pod网络流量等，可更改时间跨度查看不同时间段的监控信息 「已触发警报」：根据定义好的对容器的告警策略和告警操作，若监控信息检测到该部署已达到触发警报条件，将触发警报。该页面显示已触发的警报信息，以及可对该警报做恢复、暂停、解除等操作 守护进程集 Kubernetes的守护进程集（DaemonSet）保证在每个Node上都运行一个容器副本，常用来部署一些集群的日志、监控或者其他系统管理应用。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「守护进程集」中查看详细信息。 在「容器服务」-「守护进程集」中可查看守护进程集的基本信息，如：名称、云平台类型、状态、业务组、服务部署、项目、所有者、标签、容器组、镜像和创建时间等。**高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入DaemonSet的详情页面。包括「基本信息」「容器组」「操作历史」「监控」「已触发警报」等 「基本信息」页面包括了： 基本信息：名称、命名空间、标签、注释、镜像、创建时间等 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运维操作：更新镜像、调整配置 「操作历史」页面：包括了对守护进程组进行过的操作历史记录 「Note」「监控」「已触发警报」标签页需要在Kubernetes的云平台处设置Prometheus监控地址后才会出现。 有状态副本集 Kubernetes的有状态副本集（StatefulSet）是为了解决状态服务的问题。由以下几个部分组成：用于定义网络标志（DNS domain）的Headless Service、用于创建PersistentVolumes的volumeClaimTemplates、定义具体应用的StatefulSet。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「有状态副本集」中查看详细信息。 在「容器服务」-「有状态副本集」中可查看有状态副本集的基本信息，如：名称、云平台类型、状态、业务组、服务部署、项目、所有者、标签、容器组、镜像和创建时间等。**高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入StatefulSet的详情页面。包括「基本信息」「容器组」「操作历史」「监控」「已触发警报」，以及「更新副本数量」「更新镜像」「调整配置」等运维操作 容器 K8s Container部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「容器」中查看详细信息。 在容器（Container）的列表界面，可查看该容器的名称、云平台类型、状态、业务组、服务部署、项目、所有者、镜像、端口、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入容器的详情页面。包括「基本信息」「操作历史」 运维操作：「调整配置」 服务 在K8集群中，客户端需要访问的服务就是Service对象。每个Service会对应一个集群内部有效的虚拟IP，集群内部通过虚拟IP访问一个服务。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「服务」中查看详细信息。 在容器服务的服务（Service）的列表界面，可查看该服务的名称、云平台类型、状态、业务组、服务部署、项目、所有者、集群IP、内部端点、外部端点、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入服务的详情页面。包括「基本信息」「容器组」「操作历史」「监控」「已触发警报」等页面 运维操作：「更新副本数量」「更新镜像」「调整配置」 路由 在kubernetes中，通常情况下，服务（service）和pod的IP仅可在集群内部访问。集群外部的请求需要通过负载均衡转发到service在Node上暴露的NodePort上，然后再由kube-proxy将其转发给相关的Pod，而路由（Ingress）就是为进入集群的请求提供路由规则的集合。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「路由」中查看详细信息。 在路由（Ingress）的列表界面，可查看该路由的名称、云平台类型、状态、业务组、服务部署、项目、所有者、端点、规则、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入路由的详情页面。包括「基本信息」「操作历史」 存储卷 Kubernetes中的存储卷（PVC：PersistentVolumeClaim）是用户存储的请求。它类似于pod。Pod消耗节点资源，PVC消耗光伏资源。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「存储卷」中查看详细信息。 在存储卷（PVC）的列表界面，可查看该存储卷的名称、云平台类型、状态、业务组、服务部署、项目、所有者、卷状态、总量、访问模式、存储类、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入存储卷的详情页面。包括「基本信息」「操作历史」 配置字典 在kubernetes中，配置字典（ConfigMap）用于保存配置数据的键值对，可以用来保存单个属性，也可以用来保存配置文件。ConfigMap跟保密字典（Secret）很类似，但它可以更方便地处理不包含敏感信息的字符串。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「配置字典」中查看详细信息。 在配置字典（ConfigMap）的列表界面，可查看该配置字典的名称、云平台类型、状态、业务组、服务部署、项目、所有者、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入配置字典的详情页面。包括「基本信息」「操作历史」 保密字典 在kubernetes中，保密字典（Secret）解决了密码、token、密钥等敏感数据的配置问题，而不需要把这些敏感数据暴露到镜像或者Pod Spec中。Secret可以以Volume或者环境变量的方式使用。部署成功后可在左侧导航栏选择「云资源」-「容器服务」-「保密字典」中查看详细信息。 在保密字典（Secret）的列表界面，可查看该保密字典的名称、云平台类型、状态、业务组、服务部署、项目、所有者、类型、创建时间等。高级搜索可通过业务组、状态、项目和所有者对列表信息进行快速筛选定位 点击名称，进入保密字典的详情页面。包括「基本信息」「操作历史」 存储资源 云硬盘 支持对OpenStack/Azure/阿里云/青云的云硬盘进行统一管理。 点击「存储资源」下的「云硬盘」，将看到云硬盘列表 在云硬盘的列表界面，可查看云硬盘的相关信息：名称、云平台类型、状态、业务组、服务部署、项目、所有者、大小（GB）、挂载状态、挂载到的云主机以及创建时间 点击名称，进入云硬盘详情页面。云硬盘详情页面包括「基本信息」「操作历史」 云硬盘详情的「基本信息」页面包括： 基本信息：名称、云平台类型、状态、业务组、服务部署、项目、所有者、大小挂载到的云主机、创建时间等 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运维操作： 卷分离：去除云硬盘和云主机的挂载关系 卷挂载：建立云硬盘和云主机的挂载关系 调整大小：支持对硬盘调整大小（Azure/AWS） 云硬盘详情的「操作历史」页面：包括了该云硬盘进行过的操作历史记录 对象存储 支持对AWS、Azure、阿里云的对象存储进行统一管理，分别是S3、Blob、OSS。 点击「存储资源」下的「对象存储」，将看到对象存储列表 在对象存储的列表界面，可查看对象存储的相关信息：名称、云平台类型、状态、状态、业务组、服务部署、项目、所有者、创建时间 点击名称，进入对象存储详情页面。对象存储详情页面包括「基本信息」「操作历史」 对象存储详情的「基本信息」页面包括： 基本信息：名称、云平台类型、状态、所有者、公共访问级别、存储账户、资源组、创建时间等 组织信息：服务部署名称、服务名称、业务组、租户、项目等 对象存储详情的「操作历史」页面：包括了该云硬盘进行过的操作历史记录 网络资源 支持OpenStack的防火墙（FireWall）、浮动IP（Floating IP）的独立部署和全生命周期管理。部署完成后，可在「云资源」-「网络资源」处查看基本信息和运行状况。还支持OpenStack的负载均衡器（LoadBalance）和负载均衡监听器（Listener）,以及VMware NSX的虚拟服务器（VirtualServer）。 负载均衡器 负载均衡是高可用网络基础架构的关键组件，通常用于将工作负载分布到多个服务器来提高网站、应用、数据库或其他服务的性能和可靠性。 若部署中包含负载均衡器（LoadBalancer），则部署成功后可在「云资源」-「网络资源」-「负载均衡器」中查看详细信息。 在负载均衡器（LoadBalancer）列表界面，显示负载均衡器的名称、云平台类型、状态、业务组、服务部署、项目、所有者、IP地址、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」 运维操作（OpenStack）： 绑定浮动IP：选择某一浮动IP，将该负载均衡器和浮动IP 进行绑定，可启动定时在特定时间执行操作 解绑浮动IP：若该负载均衡器已绑定浮动IP，则可进行解绑操作，可启动定时在特定时间执行操作 负载均衡监听器 支持VMWare NSX / OpenStack / Azure的负载均衡监听器，VMWare NSX 负载均衡监听器为VirtualServer，OpenStack 负载均衡监听器为Listener，Azure 负载均衡监听器为LoadBalancerRule。负载均衡器可以监听多个端口上请求，每个端口通过负载均衡监听器指定。部署成功后可在「云资源」-「网络资源」-「负载均衡监听器」中查看详细信息。 在负载均衡器监听器（Listener）列表界面，显示负载均衡监听器的名称、状态、描述、业务组、项目、所有者、协议、云平台类型、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」界面，以及「添加成员」「删除成员」等运维 运维操作 -- OpenStack 「添加成员」:添加成员（member），可添加内部成员和外部成员。选择要添加成员的云主机、指定IP地址、端口和权重。可启动定时在特定时间执行操作 「删除成员」：点击后选择需要删除的成员，可启动定时在特定时间执行操作 浮动IP 支持OpenStack的的浮动IP（FloatingIP），FloatingIP可单独部署，部署成功后可在左侧导航栏选择「云资源」-「网络资源」-「浮动IP」中查看详细信息。 在选择「云资源」-「网络资源」-「浮动IP」,可查看已部署成功的浮动IP的列表界面，该界面显示浮动IP的名称、云平台类型、状态、业务组、服务部署、项目、所有者、IP地址、网络、映射地址、创建时间等 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面，显示该浮动IP的的基本信息和组织信息 「操作历史」页面，显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 「关联端口」：若当前Floating IP未关联任何一个端口，则在详情页上方会显示「关联端口」操作，点击后在弹框中选择需要绑定的端口，下拉框中会列出当前业务组下，OpenStack云平台中所有未被关联的端口（Port）。选择后点击「提交」 「解除绑定」：若当前Floating IP已关联端口，则在详情页上方会显示「解除绑定」操作，点击后「提交」，也可启用定时在特定时间执行操作 防火墙 支持OpenStack防火墙即服务（Firewall as a service），Fwaas应用于OpenStack对象，如项目，路由器和路由器端口。OpenStack防火墙的核心概念是防火墙策略和防火墙规则。策略是有序的规则集合。可在左侧导航栏选择「云资源」-「网络资源」-「防火墙」查看已部署成功的防火墙。 选择「云资源」-「网络资源」-「防火墙」,可查看已部署成功的防火墙列表界面，该界面显示防火墙的名称、云平台类型、状态、业务组、服务部署、项目、所有者、策略、路由、激活状态、管理员状态、创建时间等 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面：显示该防火墙的的基本信息和组织信息 「操作历史」页面：显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 「更新防火墙」：点击后可在页面中选择已有的防火墙策略或新建防火墙策略。勾选「使用已有策略」，将列出当前业务组下，OpenStack云平台中所有可用的防火墙策略。若未勾选，则新建防火墙策略，需填写策略名称（必填），策略描述（选填），可选择是否属于已共享、已审计，还可定时，操作完成后点击「提交」 「更新防火墙策略」：该页面将列出当前所有可用的规则列表。支持使用已有规则和新建规则。若使用已有规则，在列表中勾选将使用的规则即可。若新建规则，将展现新建规则界面： 填写基本信息：名称、描述、协议（必填，TCP、UDP、ICMP和任何）、动作（必填，允许、拒绝）、源IP、源端口、目的IP、目的端口、选择是否是共享的、激活 可选择新增的规则的位置，指定当前规则在某条规则之前插入（规则前于），或指定规则在某条规则后插入（规则后于）。如果两者均被指定，前者优先级更高。 「Note」：一个防火墙策略可关联多个规则，但规则只能被一个策略所关联 「删除防火墙规则」：删除防火墙中已关联的规则，删除后将不可恢复。可同时选择多个规则删除，也可启动定时在特定时间执行操作 安全组 安全组是一种虚拟防火墙，具备状态检测和数据包过滤功能，用于在云端划分安全域。您可以通过配置安全组规则，允许或禁止安全组内的虚拟机实例对公网或私网的访问。 支持展示OpenStack、AWS、Azure、阿里云的安全组。若安全组组件部署后，将在「云资源」-「网络资源」-「安全组」中查看部署的安全组组件。 在「安全组」列表界面，显示安全组名称、云平台类型、状态、所属业务组、服务部署、所属项目、所有者、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」界面 「基本信息」页面，显示该安全组的的基本信息、组织信息和入站/出站安全组规则。 「操作历史」页面，显示操作历史记录，点击后将在操作历史列表下方显示操作详情 域名系统DNS 支持OpenStack域名系统DNS，若DNS组件部署后，将在「云资源」-「网络资源」-「域名系统DNS」中查看部署的DNS组件。 在「域名系统DNS」列表界面，显示DNS名称、状态、业务组、项目、所有者、DNS类型、DNS域、DNS服务器、DNS参数等 点击名称进入详情页面，包括「基本信息」「操作历史」界面 运维操作 「更新DNS」：更新DNS参数，DNS类型不可更改 PaaS资源 支持AWS、Azure、阿里云的关系型数据库（RDS）的独立部署和全生命周期管理，支持关系型数据库即服务（RDS as a Service）和Web应用。部署完成后，可在「云资源」-「PaaS资源」处查看基本信息和运行状况。 关系型数据库 在左侧导航栏选择「云资源」-「PaaS资源」-「关系型数据库」查看已部署成功的关系型数据库（RDS）。 在关系型数据库的列表界面，可查看关系型数据库的相关信息，如名称、所属业务组、所属项目、所有者、云平台类型、创建时间等 点击名称可进入该关系型数据库详情页面，有「基本信息」「操作历史」两个页面 「基本信息」页面，显示该关系型数据库的基本信息和组织信息。 「操作历史」页面，显示对该关系型数据库的操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 更新防火墙：点击关系型数据库名称进入详情页，或在关系型数据库的列表页勾选一个关系型数据库，点击「更新防火墙」按钮，打开「更新防火墙 - RDS名称」弹窗。勾选\"定时\"，设置执行时间，点击「提交」按钮，定时更新防火墙；或者直接点击「提交」按钮，立即更新防火墙 Web应用 在左侧导航栏选择「云资源」-「PaaS资源」-「Web应用」查看已部署成功的Web应用 在Web应用的列表界面，可查看Web应用的相关信息，如名称、所属业务组、所属项目、所有者、云平台类型、创建时间等 点击名称可进入该Web应用详情页面，有「基本信息」「操作历史」两个页面 「基本信息」页面，显示该Web应用的基本信息和组织信息。 「操作历史」页面，显示对该Web应用的操作历史记录，点击后将在操作历史列表下方显示操作详情 软件资源 「Note」 支持对软件资源的统一展示和管理。 选择「云资源」-「软件资源」-「软件」,可查看已部署成功的软件列表，该界面显示软件名称、云平台类型、状态、业务组、服务部署、项目、所有者、版本、系统类型、创建时间等。可通过高级搜索对业务组、状态、项目或所有者进行筛选，也可使用普通搜索进行快速定位 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面：显示该软件的基本信息、组织信息、参数 「操作历史」页面：显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 「Note」 运维操作根据「服务建模」-「软件组件」中对个软件的操作定义显示对应的运维操作，例如：启动、停止、删除、创建、配置等 资源状态图 资源状态图能够显示云主机、容器的健康状态，根据性能指标的状态显示不同的颜色。若该云主机或容器未配置监控，默认显示灰色。浅绿到深绿到红色，颜色越深代表使用的资源越多。 鼠标移至该云主机上，将显示该云主机名称 点击后显示详情： 基本信息：IP地址、操作系统、vCPU数量、内存、磁盘总空间 组织信息：业务组、项目、所有者 性能监控指标：内存使用率、CPU使用率、磁盘使用率 「Note」若未安装监控，将不显示性能监控指标 可根据您的需求对展示内容进行筛选，如全部或已安装监控或未安装监控、按云平台筛选、业务组筛选、项目筛选、标签筛选等。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/06云服务管理/监控告警.html":{"url":"AdminDoc/06云服务管理/监控告警.html","title":"监控告警","keywords":"","body":"监控告警 告警为用户提供了云主机、任意应用的告警配置自服务。 在左边导航选择「监控告警」，监控告警下有5个二级菜单，依次是「组件监控」「告警策略」「告警」「已触发警报」、「宿主机监控」和「云平台告警」。 组件监控 功能：作为单独的页面。展示对应用监控。 点击左侧导航栏「监控告警」- 「组件监控」，点击菜单「组件监控」，左侧展现Export组件的树形结构，右侧显示相关的Exporter 「Note」 Exporter 用于描述所有的Exporter的组件, 每个组件能定义自己支持的组件类型 点击右侧显示的某个Exporter，左侧显示关联的实例，右侧显示该组件的相关描述信息。 点击右侧显示的某个Exporter，左侧显示组件实例的名字，右侧显示该组件的相关描述信息 选择具体的Exporter实例，展现Dashboard监控。 「Note」 组件监控的权限管理：每个人都可以看见菜单，能够查看的组件资源是基于每个人的权限，例如，租户管理员看见自己拥有的资源，业务组管理员看见自己管理业务组内的所有资源，等等 告警策略 用来定义所选的对象类型（如云主机/应用/容器等）触发警报的条件。点击左侧导航「监控告警」下的二级菜单「告警策略」，显示告警策略列表，列表中包括告警策略名称、类别、类型（宕机、阈值或预测）、创建时间以及创建者等。可对告警策略进行添加、编辑、删除等操作。 添加告警策略 在左侧导航选择「告警策略」，进入告警策略列表界面，点击「添加」，进入添加告警策略界面。 在添加告警策略界面，定义告警策略的基本信息。依次输入告警策略的名字，选择告警类别和告警类型。告警类别支持对云主机、应用和容器的告警。告警类型支持对云主机的宕机告警、阈值告警和预测告警，支持对应用的阈值告警和预测告警，对容器的阈值和预测告警。根据选择的不同告警类型定义告警策略的触发条件。 宕机告警：输入时间（分钟），云主机在规定时间内失去响应后，将触发宕机警报 阈值告警：选择云主机/容器的xx指标（如内存使用（百分比）、CPU使用率（百分比）、POD内存使用等）的取最大值/最小值/平均值，在过去xx时间（分钟/小时），若该值小于/小于等于/大于/大于等于xx值后，将触发警报 预测告警：基于过去xx时间（分钟/小时/天）内的xx指标的值（如内存使用（百分比）、CPU使用率（百分比）等），预测未来xx时间（分钟/小时/天）内，若该指标的值小于/小于等于/大于/大于等于xx值后，将触发警报 点击「保存」，提示告警策略添加成功，返回告警策略列表界面 编辑告警策略 点击「告警策略」，选择一行已添加的告警策略，工具栏「编辑」按钮变成可用，点击「编辑」按钮，或者直接点击告警策略名称，进入告警策略编辑界面。 删除告警策略 点击「告警策略」，选择一行已添加的告警策略，工具栏「删除」按钮变成可用，点击「删除」按钮，确认删除提示后，提示告警策略删除成功。 告警 用来定义所选告警策略应用到的范围以及触发的通知和操作。点击左侧导航「监控告警」下的二级菜单「告警」，显示告警列表，包括告警名称、警报级别、告警策略名称、范围、对象、状态、创建时间、创建者等。可对告警进行添加、编辑、启用、禁用、删除等操作。 添加告警 在左侧导航选择「告警」，点击「添加」，进入添加告警界面，定义告警的基本信息。输入告警的名字，选择告警策略、告警范围、告警对象以及警报级别，触发xx次后，自动升级为更高级别。告警范围支持对租户、业务组、项目、服务部署和云主机的告警；告警对象依据所选的告警范围；告警级别为警告和危险。 定义触发告警后，通知到的用户、角色或邮件 可定义警报触发后的行为，触发行为后，可设置最多xx次操作后停止自动执行 支持云主机的扩展操作：横向收缩一个节点、横向扩展一个节点、关机、重新启动、扩展5G逻辑卷、增加1G内存（vSphere）、增加1个vCPU（vSphere） 支持对容器的扩展操作：减少3个副本数、增加2个副本数 点击「保存」，返回告警列表界面 已触发警报 点击左侧导航「监控告警」下的二级菜单「已触发警报」，显示已触发警报列表，包括警报级别、告警名称、触发告警对象、告警类型、第一次触发时间、最后一次触发时间、已触发次数以及告警状态。告警状态分为已触发、已暂停、已解除。还可对列表中的触发警报进行恢复、暂停、解除操作。 选择「已触发警报」，任意选择一条「已触发」的警报，工具栏中的「暂停」和「解除」将变为可用，点击「暂停」，将会有提示，确认后，提示操作成功 点击列表中的告警名称，可查看该警报的详细信息以及历史数据。该页显示了告警触发的对象、警报的级别，触发的条件、业务组、所有者、IP地址、警报图表（可调控时间范围灵活查看各个时间段的警报数据）、以及该告警的后续操作历史 告警触发的对象可链接，如服务部署链接至服务部署监控页面、云主机链接至云主机监控页面、应用链接至服务部署监控页面 宿主机监控 在主机运行状况页面，用户可以看到当前系统中，每个平台中的主机运行状况。主机的运行状况对应三个图表，分别是：CPU使用状况（GHz）、内存使用状况（GB）、存储使用情况（GB）。 用户可以设置时间跨度来更改图表统计方式。如果当前系统中有多个云平台，用户会看到多个云平台的标签，点击不同的云平台标签，会跳到对应云平台的数据统计页面，查看相应的图表，获取云平台下的主机信息。 云平台告警 订阅云平台告警 选择「监控告警」-「云平台告警」，点击「订阅」按钮，进入订阅告警页面， 在订阅告警界面，依次选择「云平台管理」，「监控对象」，「告警」， 选择完之后，会显示告警的详细信息，查看「通用」，显示该告警的基本信息，该界面信息不能更改。点击「触发器」标签页，查看触发器。 点击「操作」标签页，设置告警规则操作：可设置重复操作频率；点击添加告警操作，选择操作（警告或邮件）；选择警告和警示的次数（无、一次或重复）。点击「保存」，提示订阅告警成功。 编辑云平台告警 点击「云平台告警」，选择一行已订阅的告警，工具栏「编辑」按钮变成可用，点击「编辑」按钮，或者直接点击告警名称，进入告警编辑界面。 刷新告警 点击「云平台告警」，查看告警页面，当已订阅的告警到达该告警的触发器条件时，触发告警，此时右上角小铃铛会有提示，点击可查看已触发的告警信息或点击「刷新」即可查看最新的告警信息。 取消订阅告警 点击「主机告警」，告警页面选择一个已订阅的告警，点击「取消订阅」按钮，在弹出提示框点击「是」，提示取消告警订阅成功。 任意应用的告警 云资源监控 支持针对云主机、应用软件以及容器进行监控，实时动态搜集监控数据。 云主机监控 若在配置虚机模板时已添加监控代理，服务部署成功后，点击左侧导航栏「我的部署」-「服务部署」进入服务部署列表界面，点击服务部署名称，进入服务部署详情界面 点击「监控」标签页，点击云主机名标签页将显示该部署下的云主机的监控信息。若该部署含多个云主机，则会出现多个标签页，每个标签页对应一个云主机的监控。可调整时间跨度查看监控信息。 CPU、CPU使用率、CPU状态 内存总量、内存使用率、内存状态 SWAP总量、SWAP使用率 根文件系统总量、根文件系统使用率 丢失/错误的网络包、网络流量 磁盘吞吐量、磁盘IOPS 文件系统空间使用率 若在配置虚机模板时未添加监控，可在部署成功后，运维添加。「我的部署」-「云主机」，进入云主机列表界面，选择云主机，点击顶部的「启用/切换监控」，给该云主机添加监控，添加成功后，将在「服务部署」-「监控」页面查看。 也可点击「我的部署」-「云主机」，进入云主机列表界面，点击云主机名称进行云主机详情页面，点击「监控」标签页，点击云主机名标签页将显示云主机的监控信息。可调整时间跨度查看监控信息。 应用监控 支持对JMX、MySQL、Nginx的应用监控。需要在蓝图建模时，增加对应用的Exporter监控的添加，带应用及其监控的蓝图部署成功后。 点击左侧导航栏「我的部署」-「服务部署」进入服务部署列表界面 点击服务部署名称，进入服务部署详情界面 点击「监控」标签页，点击应用标签栏，该页面将显示该部署下的应用监控的监控信息 Kubernetes监控 支持Kubernetes的监控告警，查看Kubernetes监控前提： Kubernetes云平台中已添加Prometheus监控 在「基础设施」-「云平台管理」-「Kubernetes」中，添加Kubernetes云平台添加的Prometheus监控地址：如192.xx.xx.xx:xxxx 完成以上操作，部署kubernetes成功后， 点击「我的部署」-「云资源」-「容器服务」-「部署」进入容器部署列表界面 点击部署名称，进入kubernetes部署详情界面 点击「监控」标签页，该页面将显示该部署监控信息：Pods CPU使用情况(核)、Pods内存使用情况、Pods网络 流量等 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/06云服务管理/资源回收.html":{"url":"AdminDoc/06云服务管理/资源回收.html","title":"资源回收","keywords":"","body":"资源回收 系统自动回收资源 SmartCMP通过在业务组或服务配置设置服务部署租用时间和保留时间，使资源在被申请使用后，能够在规定时间内自动回收。 「组织架构」-「业务组」，点击业务组名称，进入「概况」页面，在该页面可修改业务组下的服务部署租用时间范围和服务部署保留时间范围 「服务建模」-「服务配置」，点击服务配置名称，进入「概况」页面，在该页面可修改服务配置下的服务部署租用时间和服务部署保留时间 「Note」服务配置处的租用/保留时间不能超过业务组上的最大时间范围。 若服务的租用时间到期后，该部署下的所有云主机将会被自动关机； 若服务的保留时间到期后，该部署下的所有云主机将被删除，资源释放。 手动回收资源 「我的部署」-「服务部署」，进入服务部署列表界面，选择某服务部署，顶部将出现对该服务的运维操作列表 点击「卸除服务部署」，该操作将卸除该服务部署包含的所有云资源 也可「启用定时」定时卸除资源 「确定」后，若业务组有审批流程，则审批通过后将开始卸除；若无审批流程，则直接开始卸除 服务部署延期 若该服务将到期时，可对该服务部署进行延期。 点击左侧导航栏的「组织架构」-「业务组」，进入「概况」页面，在该页面可配置业务组下的「最大可延期次数」，以保证服务的租用时间到期后仍可以正常使用，也可控制业务组内的资源申请 业务组成员申请服务部署成功后，在「我的部署」-「服务部署」，选择某服务部署，服务部署列表界面顶部将出现「延长过期时间」的运维操作 点击「延长过期时间」，可延长到期时间，该页面还显示「已延长次数」以及该业务组下的「最大可延期次数」 点击「确定」，若业务组有审批流程，则审批通过后将执行；若无审批流程，则直接开始执行 回收站 回收站功能，优化资源回收流程 存在误删除的情况时，支持找回资源与数据。具体步骤： 在左侧菜单选择「我的部署」-「回收站」在回收站列表页面再对该服务部署进行手工「删除」操作，该资源阶段状态显示为已删除，该服务部署信息在回收站列表页面默认保留一天，到期之后服务部署信息永久删除 ，资源也从云平台永久释放回收。 回收站列表页面的服务进行还原，点击「还原」则可以还原资源。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/07云资源分析/":{"url":"AdminDoc/07云资源分析/","title":"云资源分析","keywords":"","body":"云资源分析 数据中心概览 对于拥有查看概览权限的用户，用户可以看到「资源分析」-「数据中心概览」菜单。概览视图用来查看数据中心的当前状态和最近7天的状态信息。在SmartCMP里，数据中心是指一个地理位置上的所有云平台的集合。在「数据中西概览」界面内，用户可以看到数据中心分布图，以及每个数据中心目前CPU、内存、存储、云主机和物理主机的状态和使用情况，点击右上角的「放大」图标，可进入全屏模式查看。 全屏展示界面，可按「Esc」可退出全屏状态： 图表说明： 数据中心分布图：显示系统中所有数据中心的当前资源，包括CPU、内存、存储、虚拟机数量和物理主机数量。 当前资源使用情况：显示一个或多个数据中心中的资源使用情况，资源包括CPU、内存和存储，以及显示近7天的使用趋势图 云主机概览：显示一个或多个数据中心当前的云主机数量以及对应的状态 物理主机概览：显示一个或多个数据中心当前的物理主机数量以及对应的状态 最近7天实例数量和物理主机数量：显示一个或多个数据中心最近7天实例和物理机的数量以及对应的状态 资源申请趋势 在资源申请页面，用户可以看到当前租户下业务组的资源申请情况，这个页面包含四个图表，分别对应为云主机申请/卸除量（个）、服务部署申请/卸除量（个）、CPU申请量（个）、内存申请量（GB）、硬盘申请量（GB）。 在页面上方选择筛选项：业务组、类型（各云平台）、时间跨度。用户通过设置时间跨度来改变图表的统计方式，从而更直观的获取资源申请信息。 业务组资源占用 在业务组资源占用页面，用户可以看到当前系统中，每个业务组的资源占用情况。业务组资源占用页面中显示了四种信息，分别对应四个图表，分别是：CPU使用情况（个）、内存使用情况（GB）、存储使用情况（GB）、虚机使用个数（个）。 用户可以选择类型下拉列表中的云平台，图表会显示当前选中的云平台的相应信息，同时也可以设置时间跨度，来更改图表统计方式。如果当前系统中有多个业务组，用户可从业务组下拉列表中选择某个业务组，则会显示对应业务组的数据统计页面，查看相应的图表，获取信息。 报表 您可以在「资源分析」-「报表」中，查看相关的计费报表以及云主机总体情况报表或其他自定义报表。在「系统管理」-「报表配置」中，可针对不同用户角色，选择启用或禁用某一报表。支持对报表的多个维度的筛选条件以及表头的展示列选择，可导出Excel。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/07云资源分析/容量管理.html":{"url":"AdminDoc/07云资源分析/容量管理.html","title":"容量管理","keywords":"","body":"容量管理 容量管理为租户、基础设施和业务组管理员等角色提供了资源池配额和IP池、IP地址使用情况的告警功能。 SmartCMP支持对基础设施的容量使用进行检测、追踪，为您进行合理的规划提供决策依据。通过图形化的界面对数据中心整体状况的检测展示；对各种云资源的容量使用进行追踪，分析，告警； 资源池、IP池等基础设施资源使用的跟踪，根据制定的策略进行告警。 在左边导航选择「容量管理」，「容量管理」下有2个二级菜单，依次是「资源告警」和「已触发警报」。 资源告警 资源告警监控资源配额的使用情况，达到预设的条件会触发警报。点击左侧导航「容量管理」下的二级菜单「资源告警」，显示资源告警列表，列表中包括警报级别、告警名称、告警类别、告警类型、范围、对象、状态、创建时间以及创建人等。可对资源告警进行添加、编辑、启用、禁用、删除以及筛选、搜索等操作。 添加资源告警 选择「资源告警」，点击「添加」按钮，进入添加资源告警页面 在添加资源告警页面，定义告警的基本信息。依次输入告警的名字，选择告警类别、以及告警类型。支持对IP池、资源池的阈值告警和预测告警 根据选择的不同告警类别和类型，定义告警触发条件和对象 点击「保存」返回资源告警列表界面 编辑告警 点击「资源告警」，选择一行已添加的告警，工具栏「编辑」按钮变成可用，点击「编辑」按钮，或者直接点击告警名称，进入告警编辑界面。 启用/禁用告警 点击「资源告警」，选择一行状态为启用/禁用的告警，工具栏「禁用」/「启用」按钮变成可用，点击，提示该告警状态更新成功。 删除告警 点击「资源告警」，选择一行已添加的告警，工具栏「删除」按钮变成可用，点击「删除」按钮，确认删除提示后，提示告警删除成功。 已触发警报 点击左侧导航「容量管理」-「已触发警报」，显示已触发警报列表，包括警报级别、告警名称、触发告警对象、告警类型、第一次触发时间、最后一次触发时间以及告警状态。告警状态分为已触发、已暂停、已解除。还可对列表中的触发警报进行恢复、暂停、解除操作。 选择「已触发警报」，任意选择一条「已触发」的警报，工具栏中的「暂停」和「解除」将变为可用，点击「暂停」，将会有提示，确认后，提示操作成功。 点击列表中的告警名称，可查看该警报的详细信息以及历史数据。该页显示了告警触发的对象、警报的级别，触发的条件、业务组、类型、资源池配额总体情况（vCPU、内存、存储、虚机数量）或IP池使用情况、警报图表（可调控时间范围灵活查看各个时间段的警报数据）、以及该告警的后续操作历史。 告警触发的对象可链接，资源池链接至「资源池管理」-「资源使用趋势」、IP池链接至「IP地址管理」-「IP地址使用趋势」 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"AdminDoc/07云资源分析/计量计费.html":{"url":"AdminDoc/07云资源分析/计量计费.html","title":"计量计费","keywords":"","body":"计量计费 资源使用分析：发现和分析多云环境的使用情况和利用率，让所有资源可追踪、可追溯。通过自定义成本核算，公有云成本可见性，洞察多云环境的花费，提高ROI。可为计算、存储、网络、PaaS服务等数据中心资源，按照不同时间维度设置计费规则；自动按照部门、项目等维度进行分账；多维度展现费用使用情况和趋势；欢迎页一览资源总体情况；丰富的开箱即用的图表，多维度展示资源状况；仪表盘、报表可按需自定义，为不同角色配置不同视图。 费用优化：费用可视化，结合资源使用率，帮助优化工作负载部署，合理化配置。申请时候预估整体服务价格，进行不同云平台的比价；结合资源使用率和成本，提出优化建议，降低过高配置。 支持自定义计费模型，以实现私有云的计量计费；并且支持按照策略定时同步公有云账单，结合全新的费用分析模块，统一公有云和私有云的费用管理和分析。 费用分析 费用展示 点击左侧导航「计量计费」-「费用分析」，显示费用展示：该页面显示各业务组的费用占比，以时间为跨度的费用趋势，可根据时间、云平台、资源类型、业务组、项目和所有者进行筛选查看。 TOP排行 TOP排行展示了云平台费用使用TOP5、资源类型费用使用TOP5、业务组费用使用TOP5、项目费用使用TOP5、服务部署费用使用TOP5、所有者费用使用TOP5。可根据时间、云平台、资源类型、业务组、项目和所有者进行筛选查看 优化建议 优化建议功能列表展现了云资源的使用情况，以及费用情况，帮助您找出使用率较低的资源，并可以直接进行配置调整。 使用率分数是综合了CPU、内存以及磁盘的平均使用情况。根据使用率分数的排序找出闲置资源分布情况（使用率分数越小表示闲置资源越多），并能够一键重新进行配置，从而及时调整低效使用的资源，节省费用。 点击左侧导航「计量计费」-「优化建议」，展示所有虚拟机的使用情况：该页面显示各云主机的名称、状态、使用率分数、CPU使用率、内存使用率、磁盘使用率、费用（参考值）、配置（CPU/内存/磁盘）、业务组 、项目、所有者。 详细使用情况参数请看下表介绍： 业务组 所属业务组 名称 名称（若业务组已设定命名规则，名称将按照规则自动生成，无需填写） 项目 所属项目 所有者 部署的所有者 状态 三种状态：已启用、已停止、遗失 CPU使用率 一段时间CPU的平均使用率（上周、上个月、上三个月、上半年） 内存使用率 过去一段时间内存的平均使用率（上周、上个月、上三个月、上半年） 磁盘使用率 过去一段时间磁盘的平均使用率（时上周、上个月、上三个月、上半年） 使用率分数 过去一段时间磁盘的平均使用率和内存的使用率和CPU的使用率，三者的平均数（上周、上个月、上三个月、上半年） 分数越小代表使用率越低，闲置资源越多 费用 按照上个月部署资源的花费预计下个月的部署虚拟机的费用（数值统一了公有云和私有云的费用） 平台考虑了计算、网络、存储的使用率，基于数据监控，算出过去一个星期 、一个月、三个月或半年的磁盘使用率、内存使用率、CPU使用率的平均值，三者平均值之和得到使用率分数。根据以上展示的所有数据，找出闲置资源，排序分析得出费用比较高的虚拟机，使用率比较低的虚拟机，进行一键重新配置，优化资源配置，提高资源使用率。 重新配置资源的方法： 点击左侧导航「计量计费」-「优化建议」，选择某一个云主机，进入云主机详情页，显示云主机基本信息、操作历史、快照信息、监控、已触发警报、定时任务等，在云主机详情页可重新配置资源，可进行如下操作： 重新启动、挂起、停止、远程终端、调整虚机配置、添加新磁盘、扩展磁盘、添加网卡、删除网卡、创建快照、恢复至快照、vMotion迁移等。 使用情况 重新启动 重新启动（关机状态的）虚拟机，也可以通过设置「定时」，定时（在将来某一时刻）触发此项任务。 挂起 挂起（开机状态的）虚拟机，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务 停止 停止（即关机）（开机状态的）虚拟机，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务。 远程终端 进入远程终端页面。输入要执行的命令，单击确认 调整虚机配置 调整虚拟机或容器节点的配置（vCPU，内存） 添加新磁盘 给虚拟机添加一块新的磁盘，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务 扩展磁盘 给虚拟机扩展一块已有的磁盘，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务。 添加网卡 添加一个新网卡，针对该计算节点的所有实例生效，选择网络标签和IP分配方式 删除网卡 删除网卡，该操作会影响该节点的所有云主机 创建快照 给虚拟机创建一个快照，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务。 恢复至快照 把虚拟机恢复到之前的某一个快照，可以通过设置「定时」，定时（在将来某一时刻）触发此项任务 vMotion迁移 计算资源迁移和存储迁移 「Note」如您需要查看更多关于云主机操作的详细内容，请您参考：云主机操作 计费规则 SmartCMP允许自定义计费规则，对私有云的资源进行计费；并能够同步公有云的费用账单（详见「账单同步」小节），统一公有云和私有云的费用管理和分析。 按单价计费，是指当前的计费规格都是对单种资源来计费的，列表中列出了已经创建的资源类型及价格等信息。系统管理员和租户管理员可以对已创建的计费规格进行编辑和删除，同时可以添加新的计费规格。 点击左侧菜单栏「计量计费」-「计费规则」，将看到已创建好的计费规则列表，显示云平台、资源类别、存储类别、计价单位、价格、货币单位、周期等。 添加计费规则：进入菜单「计量计费」-「计费规则」，点击「添加」，在弹出页面中选择云平台管理、资源池、资源类别（CPU、内存、存储组件、浮动IP、负载均衡器、负载均衡监听器），计价单位、价格，货币单位（人民币）、周期（小时、天、周、月），点击「提交」，添加计算资源价格成功，计费管理列表显示刚才添加的信息。 编辑计费规则：选中列表中某个项目，点击「编辑」，修改信息后点击「提交」 删除计费规则：选中列表中某个项目，点击「删除」，弹出确认提示框，点击「是」 账单同步 支持定时同步公有云的账单数据。点击左侧菜单栏「计量计费」-「账单同步」，将看到账单同步列表，显示名称、云平台、状态（禁用/启用）、最近执行记录、最近执行时间等。可进行添加、编辑、删除、启用和禁用操作。 添加同步策略：点击「添加」，输入同步策略名称、选择一个要同步的云平台、选择状态（启用/禁用）、填写执行时间（cron表达式），点击「保存」 编辑同步策略：在列表中选择一项同步策略，点击「编辑」，进入编辑界面，可更改名称、云平台、对象存储、状态、执行时间等，页面下方显示该同步历史信息 启用/禁用同步策略：在列表界面选择某项已启用/禁用的同步策略，上方的禁用/启用操作将可用 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/07云资源分析/资源治理.html":{"url":"AdminDoc/07云资源分析/资源治理.html","title":"资源治理","keywords":"","body":"资源治理 事件配置 事件配置功能用来定义事件应用到的范围以及触发的通知和操作。使用场景： 当检测到IP地址被未知机器占用时，能够检测到冲突并触发告警，具体配置包括，针对IP冲突检测设置通知，通知/邮件的标题： 检测到IP地址冲突：x.x.x.x；通知/邮件的内容： 检测到IP地址冲突，x.x.x.x已被未知机器占用，请检查原因。该IP地址不会再被分配。 针对云主机部署成功设置通知（云主机部署成功） 支持扩展其他类型，比如云主机名称修改通知，云主机IP地址修改通知等等。 支持在“操作配置”功能区，灵活的自定义触发的事件的名称，类型，应用的范围，触发的操作。 具体操作步骤： 点击左侧菜单栏「资源治理」-「事件配置」，将看到事件配置列表，显示名称、类型、范围、对象、状态、创建者、创建时间。 添加事件配置：点击「添加」，输入事件名称，选择类型（检测到IP冲突、VM部署完成），选择针对的范围（租户），选择对某对象触发通知。通知配置选择用户/角色/邮箱，如果事件触发将收到系统通知和邮件通知 编辑事件配置：在列表中选择一项事件，点击「编辑」，进入编辑界面，可针对新建中的所有项进行编辑更改 启用/禁用事件：在列表界面选择某项已启用/禁用的事件，上方的禁用/启用操作将可用 操作配置 提供通用的任务配置，事件，告警发生后，能够触发操作，例如：云资源部署完成之后不仅是可以发送邮件通知，同时也可以进行云资源的运维操作，通知和操作可以同时配置，不配置具体操作就不会触发后续的运维操作。（具体的操作配置步骤与流水线的流程设计任务配置相似，请参考：配置任务） 其他常见使用场景包括：VM部署后，需要注册到跳板机； VM删除后，能够注销跳板机；告警场景发生后，能够创建工单流程。 事件历史 列出触发的事件以及执行的任务状态。事件历史页面显示： 展示事件编号（事件_时间戳），事件名称，事件类型，触发对象，触发时间，通知对象（没有通知就显示无），触发操作（没有操作就显示无），操作执行状态 触发的对象显示实际的对象名称，例如，检测到IP冲突，则触发对象显示具体的某个IP地址；部署完成或更新，则触发的对象是该部署 可根据筛选条件（事件类型，操作状态，起止时间）快速定位事件 点击任意事件进入事件详情页面：包括事件本身的信息，通知信息，触发的操作信息。（事件的信息：什么时间、针对哪个对象、触发了什么事。通知：发送通知给到了谁（将角色名、用户名、邮件地址放在一起显示。触发的操作信息：触发了什么操作，操作的状态，执行结果和输出） Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/11集成与发布管理/":{"url":"AdminDoc/11集成与发布管理/","title":"集成与发布管理","keywords":"","body":"持续发布与部署 SmartCMP应用持续发布和部署功能是通过软件组件、蓝图和全新引进的流水线来构建，具体包括： 定义应用软件：接入主流的制品仓库对软件组件进行存放管理和版本控制，软件组件关联制品仓库并自定义应用的部署方式和相关参数。 定义应用服务：通过蓝图建模，编排应用架构；通过服务配置，指定资源参数和相关应用的版本。 定义流水线：配置流水线的阶段和多种类型的任务，实现应用的测试、部署、更新、运维、回收的的全生命周期管理。 制品管理 SmartCMP配置应用软件，通过接入主流的制品仓库对软件组件进行存放管理和版本控制，软件组件关联制品仓库并自定义应用的部署方式和相关参数。 制品仓库管理是对软件研发过程中生成的产物的管理， 制品一般作为最终交付物完成发布和交付。所有的制品包，依赖组件均能够纳入制品库中统一管理。 制品仓库在SmartCMP平台中是通过入口来接入的，具体的操作步骤，请参考， 入口 SmartCMP支持通过软件组件功能实现定义应用软件，将制品仓库与软件组件关联，制品仓库对软件组件进行存放关联和版本控制管理。软件组件与主流制品库关联，具体的操作步骤如下：1. 在软件组件列表点击软件名称，进入组件视图。2. 在「制品」视图，您可以选择 端点、仓库（Nexus）、组、名称、版本。3. 点击保存按钮，即可将组件与包管理平台进行关联。 定义应用服务，基于蓝图建模，设计应用架构，实现每一个应用拓扑蓝图的自动化部署。基于服务配置，配置软件组件的节点详细参数，让平台根据策略执行应用管理和自动化部署。 （蓝图设计是平台原有功能，此处不再写具体配置步骤，请您参考，创建蓝图）配置软件组件的节点详细参数，具体的操作步骤如下：1. 在左边导航选择「服务建模」-「服务配置」，出现服务列表,列表中显示服务名称，点击服务名称，进入详细配置视图，点击「组件配置」，选择软件组件。2. 「节点详细设置」视图，配置软件组件节点的组、名称、版本 入口 入口可以添加需要连接的软件制品仓库，为将要使用的软件组件提供部署时的制品来源，定义了软件包或任务调度的对接。流水线中执行归档或镜像推送操作的程序包，会统一存放一份在制品仓库中，支持在入口处接入Nexus等等制品仓库管理平台。 具体步骤：在左侧导航栏点击「集成与发布」-「入口」， 点击添加Nexus入口，输入Nexus服务器端点名称、服务器详细的对接地址、用户名、密码 点击添加Jekins入口，输入Jekins服务器名称、地址，类型选择密码使输入用户名、密码；选择令牌时输入用户名和令牌。 点击验证、验证通过，点击提交即可接入软件制品仓库。 「Note」 先决条件： 确认Nexus或Jekins服务器可用并已配置。 流水线 SmartCMP的流水线，能够帮助用户建设自动化的、可重复利用、安全合规的应用持续交付和部署。流水线由一系列阶段构成，每个阶段由软件在发布到生产之前必须完成的多个任务和环境组成。目前支持多种阶段和任务的自定义和组装，能够在阶段中添加任意数量的执行任务，通过它们已经可以设计出各种场景适用的开发、部署、运维流水线。 具体步骤： 在左侧导航栏点击「集成与发布」-「流水线」，点击创建流水线，在基本信息页面输入名称、描述、绑定一个项目、通知到用户,并可添加全局参数，在后期任务中进行调用。例如：添加全局参数，定义master分支的全局信息，供配置调用，具体步骤：在基本信息页面，参数列表处，点击加号按钮，填写名称“Branch”,值“master”,选填描述，更多详情参考下图。 当您创建流水线完成之后， 在左侧导航栏点击「集成与发布」-「流水线」，可二次编辑、删除、执行、禁用、锁定流水线。 配置触发器 自定义流水线的触发条件，触发器定义何时自动运行流水线，可以手动触发流水线任务，也可以设定策略由触发器自动触发流水线任务。SmartCMP触发器类型包括：Webhook集成(支持Git，Gitlab等代码仓库改变触发)、Jenkins触发、定时触发、手工触发等等。 例如：添加定时触发器的具体步骤：输入触发器名称填写定时触发器、类型选择CRON、描述(选填)，配置CRON的详细参数，选择重复的类型（自定义cron表达式 例如：0 0 0 ？、每周某天的某个时段、每月某天的某个时段、每天的某个时段）点击创建即可配置完成触发器。例如：每天/每周/每月的10点10分执行生成快照的操作。 例如：添加配置一个Webhook类型的触发器（当代码提交到Gitlab代码仓库时触发），当提交代码到Gitlab代码仓库时，仓库状态发生改变，触发流水线。具体步骤：在左侧导航栏点击「集成与发布」-「流水线」，点击创建，在触发器页面点击创建， 输入触发器名称、类型选择WEBHOOK、描述(选填)，WEBHOOK详细参数配置如下： 以Gitlab为例，在流水线详情中添加一个webhook类型的触发器。在 \"来源\" 中自定义字段，例如：下图的\"gitlab-test\"，\"gitlab-test\"会自动拼接到\"URL\"，形成完整的网址链接。注意：这个完整的URL（ http://SmartCMP地址/ops-listener/webhook/gitlab-test ）， 在Gitlab中配置时要用到。添加过滤条件，过滤条件的作用相当于密码验证。当管理员不配置过滤条件时，只要调用这个URL（http://SmartCMP地址/ops-listener/webhook/Gitlab-test ），就会触发流水线操作。添加过滤条件后，相当于给\"webhook trigger\"添加了密码。当回调URL时，只有密码匹配成功才能触发流水线操作。如果只支持Gitlab，Gitlee和Git，过滤条件只需要设置密码就可以生效，采用键值对的方式是为了兼容更多的场景。所以添加过滤条件时，如果回调方是Gitlab，Gitlee和Git，“名称”要固定写token，“值”支持自定义（输入password）。配置完毕后依次保存。 Gitlab具体配置步骤：打开Gitlab，如果Gitlab是新申请的环境，要调整下network配置，允许请求从本地回调。 「Note」 配置webhook，创建一个project，进入project详情，依次点开Setting–Integrations，在URL中输入WEBHOOK参数配置中提前设置的URL地址(http://SmartCMP地址/ops-listener/webhook/gitlab-test) ，在Secret Token中输入\"条件过滤\" 中配置的token对应的值(自定义的值password)，注意，不要勾选Enable SSL verification 去掉，选择 Add Webhook，将实现当有代码提交时会触发流水线的功能。 配置阶段和任务 阶段指根据业务的需要，定义不同的阶段，在每个阶段中定义需要完成的任务。任务指具体执行的活动。支持自定义任务类型、输入输出参数，其中输入输出参数指SmartCMP支持流水线各个任务之间的参数传递，例如将上一个任务新部署虚拟机的SmartCMP地址传给下一个任务进行调用。 例如，可定义软件打包、部署测试环境等不同的阶段。每个阶段的任务类型包括：Jenkins Job 任务、部署新应用任务、云资源变更任务、脚本执行任务等等。流水线的发布者可以定义每个任务的参数，在后续的任务中进行调用。 例如，通过一个蓝图部署任务，即可以自动化触发一个已发布的云资源服务，进行云资源的部署；而云资源任务则可以自动化进行云资源变更、运维操作，进行应用软件的升级、更新。 设计流水的阶段和任务的具体步骤： 在左侧导航栏点击「集成与发布」-「流水线」，点击创建，在流程页面点击添加按钮，输入阶段名称，点击添加。 点击添加串行任务，在任务的详情页填写：任务类型、名称、描述、通知到用户，填写输入参数，自定义输出参数（任务类型不同，输入输出参数相应变化） 选择等待任务，在输入参数处填写等待时间（s），例如：在等待15s之后，流水线自动执行脚本 选择蓝图部署任务，在输入参数处填写服务（服务目录中发布的服务）和模板 「Note」 其中可选择的服务类型来源于服务目录中已发布的服务卡片，可选择的模板来源于，服务申请时保存申请信息的模板，具体步骤：点击左侧导航栏「服务目录」-「选择服务卡片」，进入「请求服务详情页面」，填写申请参数，点击下方「保存」按钮，填写模板名称，保存成功即可形成模板。 Jenkins任务，在输入参数处填写仓库入口（选择在入口处添加的Nexus或Jekins仓库），任务类型，选择是否等待结果，如果不稳定时，标记为成功继续继续还是标记为失败，结束执行 选择云资源任务，在输入参数处选择已有云资源，云资源类型、操作 「Note」 勾选已有云资源，则 可选择的云资源来源于平台已纳管的云资源（，云资源具体查看步骤：点击左侧导航栏「我的部署」-「云资源」，选择云资源类型，可查看已纳管的云资源。）例如：可选择资源类型为云主机，选择已经部署成功的云主机资源，在的操作处选择启动操作类型来源于云主机、服务部署的day2操作包括云主机的启动、停止，刷新服务部署状态、调整磁盘配置、自定义操作等等。不勾选已有云资源，例如：选择云资源类型为云主机，选择具体的云主机，云主机资源来源于此任务之前的部署虚拟机任务 选择脚本任务 「Note」勾选已有脚本库，选择已经创建完成的脚本库，脚本配置的具体步骤，请参考：(https://cloudchef.github.io/doc/AdminDoc/05服务建模/脚本库.html) ；不勾选已有脚本，自定义脚本，填写相关配置参数：脚本名称、选择脚本支持的语法类型（Python、Ansible、Shell），填入脚本类型和脚本参数。 选择注册堡垒机任务 执行设置内填写超时时间（例如：设置超时时间为360s,该任务执行时间超过360s代表任务执行失败）执行选项（选择失败后继续执行表示当前任务失败继续执行下一个任务，或选择失败后结束流程表示当前任务失败结束该流水线流程，流水线执行失败）。 执行方式（选择默认执行，或选择条件执行时需要设置条件执行表达式，例如：您可以输入EL表达式，可参考下图 执行流水线 流水线的执行历史 查看流水线的执行历史，通过执行历史可以查看执行状态、执行人、执行时间、每个阶段任务执行的详细信息。 在左侧导航栏点击「集成与发布」-「执行历史」，可根据筛选条件（项目、状态、起止时间）快速定位流水线。 点击流水线，可查看流水执行状态（进行中、成功、失败）、执行人信息、开始时间、结束时间、耗时、流水线完整的可视化的流程图。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/08工单服务管理/":{"url":"AdminDoc/08工单服务管理/","title":"工单服务管理","keywords":"","body":"工单服务管理 工单服务场景： 工单是用户提交多种类型服务请求的方式，支持提交云资源蓝图服务工单和手工服务工单。 租户管理员可自定义和发布标准的工单服务，用户可通过服务目录进行自服务申请与通过服务请求跟踪工单处理状态。 具体工单服务场景请参照以下步骤： 设置服务团队：租户管理员自定义关联用户。 定义手工工单服务流程：平台提供开箱即用的默认流程（标准手工工单、标准事件管理流程），当租户管理员有额外需求可通过「服务建模」-「流程配置」-「流程设计」通过可视化的流程设计器，自定义设计服务处理的方法和策略，添加到SmartCMP中使用。 手工工单服务配置：租户管理员定义服务流程和处理工单任务的服务团队角色或用户。配置完成后，发布到服务目录，使得业务组中的用户可在服务目录进行工单的申请。 申请工单和跟踪进度：用户申请工单完成后，根据预先配置的流程，系统根据服务团队与工单的关系，派发工单给相应的服务团队。服务团队中的指定用户或角色收到工单请求之后，可以进行转派，也可以进行线下处理，完成之后更新工单状态，系统通过邮件通知用户，用户可进行关闭操作或申请重新处理工单操作。 设置服务团队 服务团队是工单服务管理过程中处理工单任务的服务人员集合，支持租户管理员自定义关联用户。 「Note」组织架构管理已经对服务团队进行了详细的介绍，如您需要设置服务团队，请您参考服务团队 定义手工工单服务流程 服务团队建立完成之后，通过服务配置创建工单，将工单发布到服务目录，完成服务卡片的发布和服务目录的管理。以下内容将为您详细介绍配置手工工单服务流程、配置手工工单服务和发布手工工单服务的具体步骤。 自定义添加手工工单服务流程 在左侧导航栏点击「服务建模」-「服务流程管理」，点击添加，输入名称（手工工单服务流程）、描述、选择类别（手工工单服务）、上传流程配置文件。 内置的手工工单服务流程 平台内置的手工工单服务流程包括标准手工工单，标准事件管理流程、自动化服务流程。 标准事件管理流程，用来解决出现IT资源相关的问题，例如：服务器意外关闭，网络出现中断问题等等，网络IP地址冲突等等。流程类型属于手工工单服务。 标准手工工单：需要IT人工介入的服务，例如：申请重新设置密码的手工工单服务。 自动化服务流程：用户申请手工工单服务，服务通过审批之后，自动化创建用户申请的资源，例如：创建项目，创建IP池，等等。 「Note」内置的手工工单服务流程，不支持修改和删除，只支持查看和使用，用户自定义添加的手工工单服务流程支持修改和删除 手工工单服务配置 管理员可以将设计好的工单发布为服务，管理员可以将服务与企业内部的流程集成之后发布到服务目录。服务项主要功能有： 服务与指定服务团队关联，服务请求由团队关联的用户来处理，即指定服务团队，发布工单到不同部门服务与流程配置相关联，平台支持管员自定义服务流程，同时支持使用内置的服务流程 添加手工工单服务配置 您可以根据下面步骤添加手工工单服务配置： 在左边导航栏选择「服务建模」-「服务配置」，点击「添加」 填写服务名称、服务描述（选填）、选择业务组，服务类型为手工工单服务时，增选一项服务流程，点击「提交」，进入服务配置「概况」页面 在「基本信息」标签页填入下列信息：名称，描述，logo图像，服务分组，顺序 在「审批配置」页面指定审批流程，例如，申请创建新项目的手工工单服务，您可以指定租户管理员审批的审批流程。 在「流程配置」页面指定服务处理阶段需要指派合适的人去完成任务，指定服务确认关闭阶段需要申请人判断问题是否得到解决，配置处理人类型并根据类型选择处理人的详细信息（例如：处理人类型选择服务团队，并进一步选择具体哪一个服务团队） 在「表单配置」页面指定创建的表单，例如，申请创建新项目的手工工单服务，您可选择创建项目的表单。 点击保存按钮，服务将被保存不发布，点击保存并发布按钮，服务将被发布到服务目录页面。 编辑、删除手工工单服务配置 在左侧导航栏点击「服务建模」-「服务配置」，选择一个服务配置，点击「编辑」按钮，输入需要修改的内容，点击「保存」。 在左侧导航栏点击「服务建模」-「服务配置」，选择一个服务配置，点击「删除」按钮，提示删除服务配置成功。 发布、取消发布手工工单服务配置 在左侧导航栏点击「服务建模」-「服务配置」，选择一个服务配置，点击「发布」按钮，提示发布成功。 在左侧导航栏点击「服务建模」-「服务配置」，选择一个服务配置，点击「取消发布」按钮，提示取消发布服务配置成功。 申请和处理工单 工单的全生命周期可以管控和记录工单全过程，包括工单服务配置、工单申请、工单处理和实时查看服务进展。 当用户在服务目录申请工单完成后，根据预先配置的流程，系统将根据工单与服务团队的关联关系，派发工单给相应的服务团队进行处理。 服务团队中的指定人员收到工单请求之后，可以进行转派，也可以进行线下处理，完成之后更新工单状态，系统自动通知用户，也支持用户查看处理进程。 用户可在服务目录申请业务组发布的、已配置好的服务和共享的服务，其中服务类型包括两种类型：其一是手工工单服务，其二是云资源蓝图服务。服务申请完成，该服务信息可进入我的请求列表页面查看，稍后为您介绍我的请求详细信息。 我的请求 选择某一个手工工单服务，点击进入手工工单服务信息详情页。输入服务基本信息：标题，描述，优先级，紧急程度，申请者信息必填项的手机号，点击申请即可申请服务成功。服务申请成功之后，服务申请状态变更为处理中，申请进入我的请求当中。 用户可根据以下步骤查看用户自己已经申请的工单和跟踪工单处理进程： 在左侧导航栏点击「服务请求」-「我的请求」，我的请求页面显示我的请求的基本信息：请求编号，请求类型，标题，服务名称，业务组，项目，申请状态，申请时间，完成时间。 选择任意手工工单服务的服务请求，点击「请求编号」链接，跳转到我的手工工单服务请求详情页面，可查看该请求的基本信息，工单信息，处理记录，审批流程，审批记录等。 审批流程：审批流程图，审批层级、审批人、角色；审批记录：审批流程信息、审批流程名称、状态、审批意见、审批人、审批角色、审批时间 基本信息包括请求编号，申请时间，请求类型，申请者，联系方式，邮箱，业务组，项目等。 工单信息包括标题，描述，优先级，紧急程度，表单配置的字段信息。 处理记录信息：流程步骤，描述，处理结果描述、处理状态和处理人、处理时间。 所有请求 租户管理员还可以根据以下步骤查看所有用户的服务工单： 在左侧导航栏点击「服务请求」-「所有请求」，所有请求页面显示所有请求的基本信息：请求编号，请求类型，部署名称、申请者、业务组，项目，申请状态，申请时间，完成时间、审批者。 请求类型包括手工工单请求、云资源蓝图部署、Day2操作，不同请求类型展示的详情页面稍显不同，具体您参考：我的请求。 在服务请求列表页面，支持您快速定位到您需要查看的服务请求，您可以通过状态（服务请求的审批状态：审批未开始、审批中、审批通过、拒绝、退回、错误、撤回），业务组、起止时间（服务请求的起止时间）或关键字搜索框快速定位。 待处理 此处显示等待服务团队处理的服务请求 在左侧导航栏点击「服务请求」-「待处理」，待处理页面显示发起的所有处理请求其中待处理部分，其中显示处理请求的基本信息：请求编号，服务名称，请求类型，标题，业务组，项目，申请状态，申请时间，完成时间。 选择一个待处理的服务请求，点击「请求编号」链接，跳转到请求详情页面，查看该请求的基本信息，工单信息，处理记录，流程步骤，服务处理信息等。 基本信息包括申请编号，申请时间，申请类型，申请者，联系方式，邮箱，业务组，项目等。工单信息包括名称，描述，优先级，紧急程度和表单配置的字段信息。 处理记录包括流程步骤、描述、处理结果描述、状态、处理人、处理时间。 流程步骤： 发起申请：服务申请者通过服务目录发起手工工单服务，等待服务团队处理 服务处理：需要指派合适的人去完成这项工单任务 重新处理：申请人判断问题没有得到圆满的解决，选择将服务返回给服务人员进行处理 确认关闭：申请人判断问题已经得到圆满的解决，则关闭服务 处理方式：直接处理和转派处理 选择直接处理方式，点击直接处理，填上处理结果描述，即可点击提交处理，点击页面下方提交按钮即可处理完成此次服务请求，邮件通知服务申请者，申请者进行工单关闭操作，则服务请求状态变更为「已处理」。 选择转派处理方式，点击转派，选择服务团队，处理人和转派说明，点击页面下方提交按钮即可处理完成此次服务请求，服务请求状态「处理中」。 已处理 此处显示服务团队已经处理完成并且申请人已经确认关闭服务的请求。 在左侧导航栏点击「服务请求」-「已处理」，页面显示发起的所有处理请求其中已处理部分 显示处理请求的基本信息：请求编号，请求类型，服务名称，标题，申请者，业务组，项目，申请状态，申请时间，完成时间 选择一个请求，点击「请求编号」链接，跳转到我的请求详情页面，可查看该请求的基本信息，工单信息，处理记录。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/09系统管理/":{"url":"AdminDoc/09系统管理/","title":"系统管理","keywords":"","body":"系统管理 系统配置 在左侧菜单栏选择「系统管理」-「系统配置」，进入「概况」页面： 用户登录类型 可配置多种登录方式，包括： 本地登录， 直接使用SmartCMP配置的用户名和密码登录。 LDAP/Microsoft Active Directory 不论大小企业，无论企业性质，都需要一个集中式的帐号管理系统，员工只需要设置一次帐号密码，就可以方便地使用各个不同的系统。(例如：行政层面的OA系统、邮件系统、会议室预订系统等等。研发团队内部又可能有代码管理、项目进度管理、Bug追踪、依赖管理、Wiki等等。） 当选用经典的LDAP (Lightweight Directory Access Protocol)作为帐号管理服务器，LDAP是一个开放的，中立的，工业标准的应用协议，通过IP协议提供访问控制和维护分布式信息的目录信息。将OA系统、代码服务器、Jenkins等系统接入LDAP，实现“一套帐号，各系统共享”。 「LDAP配置」中填入：LDAP Connection Name、LDAP URL即LDAP服务器地址、 Base DN、ROOT DN、Password 配置完成之后，在LDAP的登录UI中，输入 LDAP的 uid／password, 进行登录，验证成功之后，可以进入到SmartCMP，但用户在第一次登录后没有任何的权限，管理员给这个User 配置ROLE和BG之后，用户需要重新登录，然后正常进行其它的操作。 OAuth2 OAuth2 是一个开放授权标准，它允许用户让第三方应用访问该用户在某服务的特定私有资源，但是不提供账号密码信息给第三方应用。例如：用户小明希望通过github账号来登录SmartCMP 下面为您介绍SmartCMP如何使用 OAuth2 登录的具体步骤。 选择登录类型为 OAuth2 进行具体的参数配置，以github为例，获取授权信息： 登陆giuhub，点击个人头像，一次点击 Settings --> Developer Settings --> OAuth，点击 New OAuth App 创建成功后如下: 配置完成后，在浏览器中输入：http://端口号/login/oauth2/租户id，将会自动跳转到用户授权页面，输入gitHub用户名和密码，验证通过后直接跳转到SmartCMP平台，以此实现通过github账号来登录SmartCMP的功能需求。 CAS_SSO 当选择登录方式为 CAS_SSO时，UI界面没有任何配置信息，后台会提前配置，具体配置方法请咨询交付工程师。 用户的访问方式：SmartCMP的每个租户在对接Cas的时候需要使用每个租户定制的登录方式, 例如: 租户 \"default\", 那么Cas的登录地址就是 custlogin/cas/default， 在浏览器下输入，http://192.168.12.34/custlogin/cas/default , 就是cas的登录方式，后缀“default”，是当前租户的id。在实际常见中，default替换为实际id，ip(192.168.12.34)以实际ip为准 DNS配置 如果需要配置和发布DNS服务，请在此处设置DNS根域名，并在资源池中根据不同环境的需要设置子域名，从而在服务配置中进行选择 DNS域（OpenStack） 新增DNS域，可新增一个或多个（选填） 域名由根域名、顶级域、二级、三级等多级域名构成，每级域名由字母、数字和连字符(-)构成(第一个字符不能是连字符)，不区分大小写，长度不超过63个字符。一个完整域名总长度不超过255个字符，必须以点结尾。配置成功后，可在OpenStack资源池中配置二级、三级域名。 「Note」DNS域名需在DNS服务器上配置，如无，在申请服务时将报错 界面配置 通过\"「系统配置」-「界面配置」\"来确定服务目录的显示方式，目前服务目录支持2种视图。在系统管理下，增加二级菜单“界面配置”。 租户管理员可以配置 在服务目录中，分组与服务的展现方式：标签页展示或层级展示 具体展现方式：标签页展示：即分组按照标签页展示。层级展示的方式，按照卡片的模式，先展示服务分组,服务分组的具体操作步骤，请参考：服务分组 在服务目录视图界面，可查看服务分组的图标、名称、描述和文件夹的显示方式，点击一个分组，展现此服务分组的所有卡片。 资源标签 标签核心功能是自动匹配资源，快速选择资源以及利用标签一键搜索，快速筛选。 添加标签的具体步骤：点击左侧导航栏 「系统管理」 - 「资源标签」，管理员有配置标签和定义标签的参数的权限。 配置资源标签的「基本信息」：名称（一般配置中文，比如环境）、主键（只能输入英文和数字，比如env，作为标识位）、描述、顺序（定义标签选择的顺序）选择类型（单选/多选，指定做筛选时，标签选择值集的方式），指定的资源类型：云资源（例如：资源池）、存储资源（例如：vSphere的数据存储，OpenStack的存储类型）、网络资源。注意：同一个资源池可以设置多个标签，例如：可以给同一个vSphere资源池的存储或网络资源，分别选择使不同的标签。 配置资源标签的「值集」例如：当key是环境，支持创建值value时，支持添加一个值集（例如：生产环境），也支持添加多个值集（例如：生产环境、测试环境、开发环境）并且每个值需要配置名称， 主键（可以用于命名规则），以及描述。 点击保存按钮，资源标签创建完成 使用资源标签 资源标签创建完成之后，将资源池与资源标签进行绑定，具体操作步骤：点击左侧导航栏 「基础设施」 - 「资源池管理」在资源标签选择“标签键值”，一个资源池只能选择一个key,能选择一个或多个value, 例如：vSphere资源池,key选定为\"环境\",选择一个value“开发环境”或多个value“生产环境、测试环境、开发环境”。 资源标签在服务配置中的应用：配置Server或Instance节点的资源池，可供选择的资源池来源于“共享资源池、业务组绑定的资源池”，其中资源标签在选择资源池的作用： 选择手工指定资源池的策略，然后根据选定的资源标签过滤，再进一步根据标签过滤的结果进行选择，选择是否允许在申请时修改或者在审批时修改。例如：vSphere云服务配置Server组件，选择手工指定资源池的策略，选定拥有“开发环境”资源标签的资源池“vSphere开发资源池”，勾选“允许修改”和“仅审批时可改”，则服务配置完成之后，在服务申请时，可再一次选择资源池。 选择“自动选择剩余容量最大、自动选择费用最低、平均分配” 的资源池选择策略，平台将根据策略自动分配，并且自动分配的时候，只能在按照标签过滤出来的资源池当中进行选择。更多服务配置信息请参考：服务配置 资源标签在服务申请中的应用：服务配置中配置资源池允许修改，则在申请页面，针对每个key，根据资源池中已经配置的资源标签，只展现资源池中已经使用的value。 「Note」面对“多个key 并且每个key有多个value”的应用场景。例如，存在两个key,分别为 “环境、性能 ”。key是环境时，下面设有三个value ，分别为“Pro，UAT，Dev”；key是性能时，下面设有三个value 分别为 “高性能，中性能，一般性能” 。两个资源池（vSphere-dev 资源池 和 vSphere-test 资源池），vSphere-dev 资源池有2个标签Pro和高性能，vSphere-test 资源池有2个标签UAT和一般性能, 因此在为节点配置云资源、服务申请页面展示的时候，“环境”下只显示Pro和UAT，“性能”下只显示高性能和一般性能,任意选择其中一个资源标签的value之后，剩余的标签展示要根据第一个资源标签的value的选择进行动态调整。例如：首先选择资源标签的value “ Pro ”，剩余的第二个标签只会出现“高性能”。以此类推，在更多key和更多value的应用场景中，选择逻辑也一致。 通知配置 SMTP配置 进入菜单「系统管理」-「系统配置」，在SMTP配置标签页，用户可以配置当前租户能够访问的SMTP配置。 在SMTP配置中可以填入下列信息： 基本信息 说明 使用SSL 当前SMTP是否适用了SSL SMTP服务器 SMTP服务器地址 端口 SMTP端口号 用户名 用户名 密码 密码 发件人 默认的邮件发件人 配置完成后，可点击「验证设置」，系统将会根据配置自动发送一封测试邮件到当前账户的邮箱地址，以验证SMTP服务器是否工作。 SMS配置 进入菜单「系统管理」-「系统配置」，在「SMS配置」标签页中，可以填入当前租户能够访问的SMS（短消息）配置。 基本信息 说明 用户名 用户名 密码 密码 SMS服务器 SMS服务器地址 端口 SMS端口 企业微信配置 进入菜单「系统管理」-「系统配置」，在「企业微信配置」标签页中，租户管理员可以配置当前租户企业微信的相关信息。 基本信息 说明 企业ID 在企业微信管理后台“我的企业”->“企业信息”下查看 应用ID 每一个应用的唯一AgentID，请在企业微信管理后台“应用与小程序”->“应用”下查看 应用密钥 每一个应用都有一个独立的访问密钥，请在企业微信管理后台“应用与小程序”->“应用”下查看 钉钉配置 进入菜单「系统管理」-「系统配置」，在「钉钉配置」标签页中，租户管理员可以配置当前租户钉钉的相关信息。 基本信息 说明 应用ID 创建应用时，系统自动生成的AgentId，可用于发送企业会话消息等场景 应用Key 创建应用时，与应用Key一起同时由系统自动生成 应用密钥 创建应用时，系统自动分配，是应用开发过程中的唯一性标识 菜单配置 当您接入第三方系统或扩展系统（如接入百度、京东、Azure账单、仪表盘）时，菜单配置使接入的菜单能够更加灵活。 在菜单配置中您可以定义多种仪表盘，您也可以接入外部系统，并自由灵活的选择扩展菜单，下文为您介绍具体的操作方法。 添加菜单配置 菜单配置可定义多种仪表盘和接入多种不同第三方系统，定义好的仪表盘和扩展系统将根据定义的权限分配给不同的角色查看，并根据定义的位置灵活的展现。 点击「系统管理」-「菜单配置」，点击添加，在「添加菜单配置」标签页中，输入名称、描述、类型（选择Metabase代表接入的是仪表盘，选择外部URL为接入第三方系统）、位置、URL参数、角色（选择能够访问此菜单的角色）、状态（选择启用还是禁用该菜单）。 您可以灵活选择扩展菜单的位置，例如: 添加扩展菜单百度，位置选择 前于系统管理（系统管理是一级菜单），则百度也是一级菜单在系统管理菜单前面 位于系统管理（系统管理是一级菜单），则百度是二级菜单内置在系统管理菜单中 后于系统管理（系统管理是一级菜单），则百度也是一级菜单在系统管理菜单后面 点击「提交」，菜单配置列表中显示目前添加的所有仪表盘，显示仪表盘名称、描述、ULR来源、URL参数、角色（可查看该仪表盘的角色）、状态、创建时间等。 编辑、删除菜单配置 点击「系统管理」-「菜单配置」，点击编辑，在「编辑菜单配置」标签页中，二次编辑扩展菜单信息。 点击「系统管理」-「菜单配置」，点击删除，即可删除扩展菜单 报表配置 报表配置功能为用户提供更多各种类型的报表，形成一个可扩展的报表模块，支持管理员自由灵活地定义报表功能。 在「系统管理」-「报表配置」配置不同角色的报表查看权限，设置报表的状态（启用、禁用），并选择将报表赋予给某角色进行查看，如租户成员、业务组管理员、软件架构师以及自定义角色。 配置完成后，在「资源分析」-「报表」可以查看相应的报表，支持将报表导出为常用的Excel和PDF格式文件。 操作审计 支持对用户访问、操作信息的记录，租户管理员和sysadmin默认有该权限，若需要为其他角色增加该权限， 请新增角色并添加该权限，详见角色 点击左侧导航栏的「系统管理」-「操作审计」，可看到该租户下的操作记录。显示操作的者、操作对象、操作名称、操作参数、状态以及操作时间。可通过「高级搜索」进行快速筛选定位，支持操作者、状态、操作对象、起止时间的筛选，也可以使用普通搜索功能。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:48:40 "},"AdminDoc/10租户管理/":{"url":"AdminDoc/10租户管理/","title":"租户管理","keywords":"","body":"租户管理 租户管理概述 SmartCMP支持多租户混合云计费管理模式，在系统管理租户的「租户中心」页面中，系统管理员可以对租户进行管理。 通过URLhttp://（server-address）/login?tenant=admin 登录系统管理租户，在菜单中点击「租户中心」-「租户」 添加租户：在菜单中点击「租户中心」-「租户」，租户页面点击「添加」按钮，创建租户页面「基本信息」输入ID和名称，可设置该租户的logo图像和主题颜色，点击「保存」 编辑租户：在菜单中点击「租户中心」-「租户」，租户页面选择一个租户，点击「编辑」按钮，输入需要修改的租户信息；编辑租户时可为租户设置主题颜色，可选择默认的3种主题，也可自定义，「确定」后点击「保存」 删除租户：在菜单中点击「租户中心」-「租户」，租户页面选择一个租户，点击「删除」按钮，删除提示框点击「是」，提示租户删除成功 「Note」admin租户不能被删除。 许可证管理 登录系统管理租户，在菜单中点击「系统管理 」-「许可证管理」。许可证管理页面将显示云主机总个数以及已使用的云主机个数，以及授权的物理CPU总个数以及已使用的物理CPU个数。 产品许可证控制软件的发型许可，包括以下内容： 注册名：系统许可证所有者 许可类型：控制软件的功能属性，例如包含哪些系统自带组件，支持哪些云平台管理等信息。 版本：系统版本 有效期至：软件使用时间限制，过期如需继续使用，需进行更新 授权云主机个数：使用本系统创建虚拟机上限。超过上限将不允许部署新的虚拟机 授权物理CPU数（个）：使用本系统创建虚拟机总物理CPU上限，如本项已设置，则授权云主机个数视为不设限。混合云的环境中，如果按照CPU采购，公有云上的虚拟机，按照15台虚拟机等于1个物理CPU计算。超过上限将不允许部署新的虚拟机。 状态：显示许可证的状态：有效和到期。 点击添加按钮可进入许可证添加页面，输入许可证，点击「添加」 选择一个许可证，点击更新，进入更新许可证界面，输入新的许可证，点击「更新」即可更新许可证 选择一个许可证，点击「删除」，即可删除许可证,系统还有15天内过期时，用户将会在页面顶部看到提示信息,目前支持多种许可证（License）的组合。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-12-07 17:46:26 "},"UserDoc/01快速上手/":{"url":"UserDoc/01快速上手/","title":"快速上手","keywords":"","body":"用户快速上手 SmartCMP主要有两种服务使用场景，其一是使用云资源蓝图服务；其二是使用工单服务。 使用云资源蓝图服务 经过蓝图建模之后，通过服务配置指定用户可以申请使用的资源、参数，形成基于蓝图的标准服务，发布后用户可以自助申请，自动化交付。 例如：您申请一项vSphere单节点虚拟机服务是使用云资源蓝图服务的典型场景。 使用工单服务 用户通过服务目录进行服务申请，服务团队接收服务工单，进行工单处理操作。 工单服务分为两种类型： 申请非标准化资源的服务（例如：为了卸除某项服务部署，申请云资源蓝图服务） 需要IT人工介入的服务（例如：申请重新设置密码的手工工单服务） 「Note」更多云资源蓝图服务和手工工单服务使用指南请您参考:云资源蓝图服务使用指南和手工工单服务使用指南 此章内容帮助用户快速上手服务申请操作和自助运维操作。 申请服务操作：在「服务目录」模块进行服务申请，您可以按需快速申请所需的服务，根据策略自动化部署 自助运维：在「我的部署」菜单栏中查看服务部署、云主机或云资源的详细信息，并进行自助运维操作 接下来的章节将介绍如何申请服务操作。 登录系统 浏览器输入SmartCMP的IP，例如：http://cmp.smartcmp.online:1688/#/login 输入用户名和密码。 申请服务 服务发布成功后，可在服务目录界面查看并申请已发布的服务。 点击左侧导航栏的一级菜单「服务目录」，选择vSphere单节点服务或OpenStack单节点服务，点击进入服务申请界面 在该页面查看该服务的详情信息，如：基本信息，服务拓扑，组件配置和流程控制等 填写/修改相关信息，若无直接进入下一步 点击申请，根据该业务组的流程控制（审批模板）获得批准后申请成功。如果业务组无审批流程，申请后直接进入服务部署 自助运维 服务申请后，可在「我的部署」-「服务部署」查看该部署的进行状态。 若有审批流程，点击「服务请求」-「待审批」查看待审批的服务列表，点击服务部署申请编号，将进入蓝图部署的审批详情页面，可查看当前审批流程走向 若无审批流程，可点击服务部署名称进入部署详情页面，可查看该部署的基本信息，服务部署拓扑，以及操作历史 若服务已开始部署，可在操作历史中查看当前部署进程。 在「我的部署」-「服务部署」-「操作历史」标签页中，选中操作，可在下方查看当前部署进程 或点击平台右上角的操作历史，点击刚刚申请的操作，进入操作历史详情页面；或者点击「查看全部」，进入操作历史列表界面，点击刚刚申请的服务的「操作名称」，进入操作历史详情页面，查看操作进程 查看服务部署详情和自助运维 服务成功部署后，可在「服务部署」页面查看该服务部署的详细信息以及云主机、应用组件的监控信息。一个服务部署包含一台或多台云主机。 在左侧菜单选择「我的部署」-「服务部署」后，您将会看到服务部署列表，可在「高级搜索」中根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中 ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作 在服务部署列表中，您可以选中一个或者多个服务部署快速进行一些运维操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」「更改项目」「更改业务组」和「伸缩」（示例为vSphere服务部署，不同云平台的运维操作有差异） 「Note」 如果租户管理员在业务组设置或服务配置时，已经配置了虚拟机的操作许可，虚拟机在部署生成后，才能看到允许操作的操作列表。 Default业务组默认全部的启用操作，由业务组管理员负责，并且服务部署无审批流程。 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」和「监控」（对云主机和应用组件的监控） 「基本信息」：包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将\"操作失败\"更改为\"运行\" 「服务部署拓扑」：包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等 「操作历史」：显示该服务部署的操作历史记录 「监控」：显示对该部署中的云主机和组件应用的监控信息 查看云主机详情和自助运维 同时，可在「云主机」中查看云主机状态和详情来对其进行管理和操作，操作的启用和是否需要审批需要在业务组级别或者服务配置级别进行设置。 在左侧菜单选择「我的部署」-「云主机」，您将会看到云主机的列表，在列表右上角「高级搜索」中可以根据业务组、状态（已启动、遗失、已停止）、所有者、项目、标签进行筛选。点击「展示列」，可以勾选或者不选某些列进行展示 在云主机列表中，您可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」等 您也可以单击某一个云主机进入其详情界面进行管理和操作，包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」标签页和顶部的运维操作列表 「Note」只有当该云主机安装监控和带应用时，部署成功后，在云主机详情页才能看见监控和应用标签页 「基本信息」包括： 虚拟机及其相关主机的基本信息，如：名称、操作系统、已装软件、vCPU、内存、状态、SSH端口、自动化代理、监控方式、监控端口、租用/保留到期时间等 关系：服务器信息、资源池、数据存储、虚拟机存储策略以及网络标签等 物理主机信息 用户和组 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运行状态 IP地址 键值标签 「Note」更多主机相关信息，将根据不同云平台、不同服务配置项决定 「操作历史」包括了该虚拟机进行过的操作历史记录 「快照信息」显示当前的快照信息（快照名称、创建时间等），可对快照进行「刷新」「添加」「恢复」和「删除」操作 「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据） 「Note」只有在虚拟机模板中配置安装监控的虚拟机在部署生成后，才可以在监控中看到数据。 「应用列表」显示当前虚机已安装的应用列表（若该虚机未安装应用，则不显示应用列表菜单） 「运维操作列表」包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开 「Note」只有在业务组设置或服务配置时配置虚拟机的操作许可，虚拟机在部署生成后才能看到允许的操作列表。Default业务组默认业务组管理员启用全部操作，且无审批流程；业务组成员已启用常见操作，且无审批流程。 查看云资源详情 支持用户在「云资源」查看相关云资源状态和详情来对其进行管理和操作。 在左侧菜单选择「我的部署」-「云资源」，您将会看到列表左侧有以下几个类别：存储资源、容器服务、网络资源、PaaS资源、软件资源。 「存储资源」:云硬盘、对象存储 「容器服务」：部署、守护进程集、有状态副本集、容器、服务、路由、存储卷、配置字典、保密字典 「网络资源」：负载均衡器、负载均衡监听器、负载均衡成员池、负载均衡SNAT池、浮动IP、防火墙、安全组、域名系统DNS 「PaaS资源」：关系型数据库、Web应用 「软件资源」：软件 资源状态图 资源状态图能够显示云主机、容器的健康状态，根据性能指标的状态显示不同的颜色。若该云主机或容器未配置监控，默认显示灰色，资源使用率越高，图片背景色越深。 支持用户将鼠标移至该云主机上，将显示该云主机名称 支持用户点击服务部署名称后显示对应云主机详情： 基本信息：IP地址、操作系统、vCPU数量、内存、磁盘总空间 组织信息：业务组、项目、所有者 性能监控指标：内存使用率、CPU使用率、磁盘使用率 「Note」若未安装监控，将不显示性能监控指标 还支持用户根据需求对展示内容进行筛选，如全部或已安装监控或未安装监控、按云平台筛选、业务组筛选、项目筛选、标签筛选等。 资源回收 回收站 SmartCMP的回收站用于保留卸除的资源，当存在误删除的情况时，可以进行还原。在「回收站」页面可进行删除和还原操作。 具体步骤： 在左侧菜单选择「我的部署」-「回收站」对服务部署进行「删除」操作，资源从云平台永久释放回收。 回收站列表页面的服务进行还原，点击「还原」则可以还原资源。 支持设置资源在回收站中默认保留时间，到期之后将自动删除。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-25 09:26:35 "},"UserDoc/02首页/":{"url":"UserDoc/02首页/","title":"首页","keywords":"","body":"首页 用户登录后，左侧是各级菜单，代表不同的功能模块列表。 右侧是功能具体展示和操作区域。右侧区域右上角为快速查找信息功能区，可以直接点击按钮查看相应信息，从左至右分别是「欢迎页」「通知」「操作历史」「关于」「帮助中心」「我的账户」。 欢迎 点击右上角的「欢迎」,可查看欢迎页详细信息，包括： 我的账户：头像、显示名、角色、所属业务组、上次登录时间 待处理任务：待审批的申请数量和待处理的工单数量，点击链接您可进入「待审批」、「待处理」 告警信息（警告、危险） 服务信息：已申请的云资源服务： 审批中的服务数量点击链接您可进入「我的部署」-「服务部署」查看处于审批中状态的部署； 已部署的服务数量点击链接您可进入「我的部署」-「服务部署」查看处于运行、操作进行中、关闭、已失败、已取消状态的部署； 即将到期的服务数量点击链接您可进入「我的部署」-「服务部署」查看两周内即将到期的部署； 即将卸除的服务数量，点击链接您可进入「我的部署」-「服务部署」查看两周内即将被卸除的部署； 工单服务： 审批中数量（即等待审批的手工工单服务请求的数量），点击链接您可进入「服务请求」-「我的请求」，请求类型为手工工单服务，申请状态为审批中的列表； 处理中的服务数量（即正在被处理的手工工单服务请求的数量），点击链接您可进入「服务请求」-「我的请求」，请求类型为手工工单服务，申请状态为处理中的列表； 申请服务：点击链接您可进入「服务目录」申请您需要的服务或资源 资源信息： 虚拟机数量（即已部署的云主机实例数量），点击链接您可进入「我的部署」-「云主机」页面，查看云主机详情； 应用数量（即云资源的软件资源数量），点击链接您可进入「我的部署」-「云资源」-「软件资源」-「软件」查看软件详细信息 其它资源数量（即除去云主机和应用的云资源总数），点击链接您可进入「我的部署」-「云资源」 CPU总数、内存总量、存储总量，点击链接您可进入「仪表盘」-「云资源使用情况」查看CPU、内存、存储的具体使用情况 我的请求：显示最新的五条请求信息，包括请求编号、请求时间，点击请求编号跳转到服务请求详情页面；点击更多进入「我的请求」服务请求列表 告警信息：针对云主机和应用的告警，以及触发危险和警告两个级别的告警总次数，警告次数占比总次数，危险次数占比总次数，根据百分比形成饼图），点击链接您可进入「监控告警」-「已触发警报」查看告警信息详情 导航栏 左侧导航栏详情： 服务目录 用户可以通过服务目录管理以自服务的方式请求该用户可以使用的服务。 服务请求 我的请求：用户服务请求的信息列表 待审批：用户等待审批的服务请求列表 已审批：用户已经审批完成的服务请求列表 待处理：等待用户处理的服务请求 已处理：用户处理完成的服务请求 我的部署 服务部署：用户请求目录之后，系统会生成对应蓝图的云主机，即将蓝图对应的应用部署出来。用户可以在服务部署中进行各种运维操作 云主机：管理云主机，云主机的三种来源：通过服务目录申请和、导式申请部署的云主机和同步导入进来的云主机。支持用户监控云主机状态，相关物理主机的信息，进行Day2的运维操作直接管理应用或云主机 云资源：展现用户申请成功的各种资源，如存储资源、容器服务、网络资源、PaaS资源、软件资源 资源状态图：显示云主机和容器的健康状态 回收站：所有的服务手工卸除或者到期后自动卸除后，将放置到回收站中进行保留。支持从回收站中进行还原，手工删除（删除后所有资源从云平台中真正删除），或为回收站设置保留时间，到期自动删除（支持设置回收站保留时间为0天，即服务不在回收站中保留） 仪表盘 用户可在仪表盘查看： 云资源分布、云主机总览、云主机操作系统分布、有告警的云主机、正在进行的操作、即将到期的服务部署、即将卸载的服务部署、CPU/内存/磁盘使用率最高的云主机-Top10CPU/内存/磁盘使用率最低的云主机-Top10 监控告警 订阅云主机的报警，并定义对报警的响应行为： 告警策略：定义所选的对象类型（如云主机/应用/容器等）触发警报的条件 告警：定义所选告警策略应用到的范围以及触发的通知和操作 已触发警报：显示已触发警报列表 资源分析 提供各类资源使用的分析报表： 报表：计费报表、云平台总体情况报表以及其他自定义报表 通知 点击右上角的「通知」，可查看当前未读消息列表，通知包括消息（如等待审批）、告警通知等，可标记列表中的通知为已读，将不再提示。点击列表中的某条通知将进入该通知详情页面。 点击列表下的「查看所有通知」，可进入所有通知列表。「高级搜索」可通过通知创建的起止时间进行快速搜索定位，也可普通查询搜索。可单个或批量删除通知。 操作历史 点击右上角的「操作历史」，该列表显示当前正在进行的操作，显示该操作的名称、服务名称，请求用户以及创建时间。可点击某条操作信息进入操作历史详情页面。也可点击「查看全部」进入操作历史列表界面。点击某条操作，列表下方显示该操作历史详情信息。可通过「高级搜索」根据业务组、请求用户、起止时间、状态进行快速筛选搜查，也可采用普通搜索。 帮助文档 点击欢迎页右上角的「帮助中心」问号图标，可直接进入在线文档，您可以在线查阅产品基础概念、管理员手册和用户手册，了解SmartCMP基础概念和功能。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-25 09:24:40 "},"UserDoc/03云资源服务使用指南/":{"url":"UserDoc/03云资源服务使用指南/","title":"云服务使用指南","keywords":"","body":"云服务使用指南 云资源蓝图服务基于蓝图建模来定义标准的服务框架与组件，提供丰富的开箱即用的软件组件，以可视化的形式编排蓝图，将服务发布成服务卡片，用户通过服务目录申请云资源蓝图服务。 例如：申请一项vSphere单节点虚拟机服务是云资源蓝图服务使用的典型场景。 下文为您介绍服务申请、服务部署的具体操作。 服务申请 服务快速申请 用户可在服务目录选择快速申请，无需服务配置，选择所需蓝图，直接申请服务进行自动化部署。 例如： 进入服务目录您可查看到申请数据库的服务卡片，数据库服务绑定了多个蓝图包括：所有纯数据库的蓝图，Oracle（包括群集的），MySQL（包括群集的），MongoDB，DB2，SQL Server 点击「申请数据库」选择需要的蓝图，即可快速申请自动化部署。 服务目录申请 用户可在服务目录申请已配置完成的服务服务，具体申请步骤： 在左侧导航栏点击「服务目录」，选择某一服务，点击将进入服务申请页面 服务申请页面显示该服务的详细信息： 服务申请 -服务详情 描述 该服务的描述信息 基本信息 服务配置/业务组配置的服务租用时间、保留时间 服务拓扑 服务所用的拓扑图 组件配置 服务拓扑图中的所有组件，展开后可查看各个组件的配置信息 流程控制 服务配置/业务组上设置的部署/卸除前/后序操作，及是否需要审批以及邮件通知 服务申请页面填写相关申请参数： 组织信息 业务组 若该服务为全部业务组，即共享服务，需选择业务组（该业务组需有相关资源池，否则将不允许申请）；若服务配置时该服务已指定业务组，则无需填写 项目 若该业务组下划分了项目，则可以选择项目 所有者 选择该服务的所有者，所有者需为业务组成员 部署信息 名称 若业务组已配置 “服务部署名命名规则”，则服务部署名无需填写，将根据业务组规则自动生成； 若业务组未配置“服务部署名命名规则”，需手动填写 数量 填写部署的数量，默认为1 执行时间 可指定时间开始服务部署，精确到分钟 其他信息 键值标签 默认勾选，所有server节点使用相同的键值标签 若不勾选，将列出该服务部署下的所有server节点，可为每个server节点单独设置键值标签 所有Server节点 若勾选键值标签，可为所有server节点设置键值标签 备注信息 选填 申请附件 选择文件作为附件 表单配置的字段信息 填写在「服务建模」-「表单配置」界面额外自定义的字段 申请参数 申请参数 若服务配置时，勾选了 “允许申请时改变”，将出现申请参数栏，可根据需要配置相关参数 软件配置 若在服务配置时勾选了“允许申请时添加软件”，将出现软件配置栏，可为该服务的计算节点/软件组件添加软件，点击「添加软件」 选择要安装的软件，将列出所有的软件组件 选择关系：“安装到”或“依赖于” 选择要安装到或依赖于的节点 填写完成后点击「申请」，将根据业务组流程控制直接部署或等待审批，可至「我的部署」-「服务部署」中查看部署情况（也可在右上角「操作历史」中查看部署情况），或至「服务审批」-「我的申请」中查看审批流程。 自动加载 用户进行服务申请时，未能一次性填写完相关参数，点击「保存」能够对已填写参数进行保存，并且在下次申请的时候，点击「加载」可以重新加载，自动填充上次已经填写好的参数。 预估费用 在您进行服务申请时，平台可以显示此次申请的费用（按月计算）。 针对私有云，管理员在「计量计费」-「计费规则」配置私有云的计费规则之后，用户在申请服务时，直接使用计费的API进行计费。 针对公有云需要缓存公有云的单价API结构，然后计算费用。 服务请求 用户申请服务的操作完成之后，如果该服务提前配置有审批流程，则该服务进入待审批状态，等待审批人执行审批操作。 如果没有审批流程，服务请求信息进入「我的请求」信息列表，云资源服务直接进入准备部署状态，则进入「我的部署」查看部署信息。 我的请求 此处显示当前用户发起的服务请求。查看服务详情的步骤如下： 点击左侧菜单栏的「服务请求」-「我的请求」，可查看用户申请服务的列表。 该页面显示请求编号、服务名称、请求类型、标题、业务组、项目、申请状态、申请时间以及完成时间。可点击「请求编号」可查看申请的详细信息。 待审批 服务申请完成后，该服务提前配置有审批流程时，该服务进入待审批状态，「待审批」模块显示该服务的详情。 审批人可按照以下步骤查看待审批服务的详情： 在左侧导航栏点击「服务请求」-「待审批」，待审批页面显示用户待审批的服务详情， 显示审批请求的基本信息：申请编号，请求类型，服务部署名称，申请者，业务组，项目，申请状态，申请时间。 已审批 「已审批」模块显示审批人已经执行完成审批操作的服务请求。 查看审批完成的服务请求的具体步骤： 在左侧导航栏点击「服务请求」-「已审批」，已审批页面显示你发起的所有审批请求其中已经审批通过的部分 显示审批请求的基本信息：申请编号，请求类型，服务部署名称，申请者，业务组，项目，申请状态，申请时间。 服务部署 概述 服务部署页面可查看服务部署的状态、详情、监控等。用户在「服务目录」选择服务目录申请后，若该部署有审批流程，则服务部署进入待审批状态，审批通过才能执行部署操作；若无审批，则服务部署开始进行，点击服务部署名称，可查看该部署详情信息。 在左侧导航栏选择「我的部署」-「服务部署」后，用户将会看到服务部署列表，点击高级搜索，可根据业务组、阶段（运行、操作进行中、关闭、操作失败、已取消、部署审批中 ）、状态（正常、异常）、所有者、项目进行筛选，也可直接进行搜索操作 在服务部署列表中，用户可以选中一个或者多个服务部署快速进行一些操作，包括「停止服务部署」「安装软件」「复制服务部署」「延长过期时间」「卸除服务部署」「删除管理信息」「更改所有者」，更多操作如：「更改项目」「更改业务组」和「伸缩」 点击服务部署名称，可查看该服务部署的详细信息。服务部署详情信息界面包括「基本信息」「服务部署拓扑」「操作历史」「监控」（对云主机和应用组件的监控）以及顶部的运维操作 「基本信息」包括服务部署的名称、业务组、项目、蓝图、资源池、云平台，以及费用、状态、时间等相关信息。还包括该服务部署的输入参数列表以及输出结果信息。服务部署失败后，某些场景可线下修复，修复成功后支持更改服务部署状态，将操作失败更改为运行 「服务部署拓扑」包括服务部署的蓝图、详情和流程信息。鼠标悬停至服务拓扑图中，将显示该节点的关键信息，如Server节点将显示云主机名称、客户操作系统、IP地址、内存、磁盘总空间、vCPU数量、CPU使用率、内存使用率等 「操作历史」显示该服务部署的操作历史记录 「监控」显示对该部署中有的组件应用的监控信息 服务部署运维操作 在服务部署列表界面或点击服务部署名称进入服务部署详情界面，均可对服务部署做运维操作。 「Note」服务部署的运维操作的权限由业务组和服务配置进行控制，此处默认该用户拥有运维操作的权限。为了方便您进行运维操作，平台对运维操作进行了分组 更改组织信息 更改所有者 更改服务部署的所有者，将会同时改变该服务部署下的所有虚机的所有者。现在目标所有者，该所有者为该业务组下的成员。 更改项目 更改服务部署的所属项目，将会同时改变该服务部署下的所有虚机的所属项目。选择目标项目，并选择该项目下的用户。 更改业务组 将会把该服务部署下的所有虚机同时更改到新业务组中，并修改所有者等相关信息。选择目标业务组，项目（可选），所有者（该业务组下的成员），资源池（该业务组下的资源池）。如果资源池列表为空，表示该业务组上没有可用的资源。 启动服务部署 若服务部署处于关闭状态，则「启动服务部署」操作可用。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 停止服务部署 若服务部署处于正在运行的状态，则可以「停止服务部署」，该操作将对该服务部署下的所有虚机进行关机操作。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 卸除服务部署 服务部署后，可卸除该服务部署下的云资源。卸除服务部署将删除在SmartCMP中新建的所有资源。若该服务部署中包含共享资源，将不删除共享资源；若该服务部署包含已有资源，如LoadBalance\"使用已有资源\"，将不删除已有资源；若导入资源后，您是该资源的Owner，可删除导入资源。 重新执行部署 可在服务部署后针对部署节点进行重新执行部署的操作。 操作步骤： 点击「重新执行部署」，将展示该服务部署名称、该部署下的所有计算节点/存储节点/软件组件节点以及部署状态 可单选或多选节点进行重新执行；可启用定时，指定时间进行操作 点击「提交」，等待执行 删除 删除管理信息 删除该服务部署以及所属虚拟机在SmartCMP上的相关信息，在相关云平台中仍然保留，不进行删除。 删除节点 可在服务部署后删除计算节点、存储和软件组件。点击「删除节点」，将展示该服务部署名称、该部署下的所有计算节点、存储和软件组件节点以及部署状态，可单选或多选节点进行删除，可启用定时指定时间进行操作。 扩展与伸缩 伸缩 扩展当前部署下的实例，静态IP部署的Server不支持伸缩。至少伸缩1个实例，最多6个。可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 延长过期时间 延长服务部署的租用到期时间，点击将显示业务组中设置的最大可延期次数以及已延期次数，选择延长到哪一时间到期，精确到分钟。 复制服务部署 服务部署成功后，可将该服务部署整体的应用环境复制至其他云平台或克隆至当前云平台。如vSphere至阿里云，vSphere至vSphere，阿里云至阿里专有云 操作步骤： 选择目标服务：选择目标业务组、项目（可选）、所有者以及服务，选择当前实例节点作为模板来复制/新建到所选的服务拓扑图中的目标节点 配置参数：填写服务部署名称（若业务组有规则将根据业务组规则自动生成）、服务部署租用到期时间，以及配置该服务拓扑图中的其他节点参数（若是跨云复制，则需要第三方支持） 点击「提交」，等待执行 安装软件 选择服务部署下的云主机，并选择需要安装的软件。该软件列表来源于「软件组件」，可对软件的属性键值进行更改。 云主机 概述 用户可以根据下面的步骤来查看云主机列表来对其进行管理和操作。 具体操作步骤： 在左侧导航栏选择「我的部署」-「云主机」后，用户将会看到云主机的列表。可在该列表界面查看云主机所属云平台、操作系统、是否安装监控代理、是否属于导入、云主机状态（已启动、遗失、停止等）、健康状态等，其他展示列可通过点击「展示列」，可以勾选或者不选某些列进行展示。根据业务组，项目，标签可以进行筛选 在云主机列表中，用户可以选中一个或者多个云主机快速进行一些操作，包括「启动」「重新启动」「挂起」「停止」「执行脚本」「设置标签」「启用/切换监控」「更新监控代理」「更新自动化代理」，具体操作介绍会在下文展开 您也可以单击某一个云主机进入其详情界面进行管理和操作，虚拟机详情界面包括「基本信息」「操作历史」「快照信息」「监控」「应用列表」和顶部的运维操作列表 「基本信息」包括了虚拟机及其相关主机的一些信息，该虚拟机在平台中的组织信息以及该虚拟机的CPU、内存、存储的运行状态、VNC连接信息等 「操作历史」包括了该虚拟机进行过的操作的历史记录 「快照信息」显示当前的快照信息（快照名称、创建时间等），点击「添加」可以创建快照 「监控」包括了该虚拟机CPU、内存、磁盘、网络的监控数据（可以按照需要调整时间跨度或者平均时间来查看历史监控数据） 「Note」只有在虚拟机模板中配置安装监控的虚拟机在部署生成后，才可以在监控中看到数据，如何配置安装监控请参看「虚拟机模板管理」章节。 「应用列表」显示当前虚机已安装的应用列表 Day2的操作列表包括了该虚拟机可执行的操作列表，具体操作介绍会在下文展开 云主机运维操作 在云主机列表界面或点击云主机名称进入云主机详情页面，均可对云主机进行下列运维操作，运维操作的启用与否由业务组/服务部署进行控制。 可以实时启动（关机状态的）虚拟机，也可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 挂起（vSphere） 挂起（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 挂起多个（开机状态的）虚拟机，可以通过设置「启用定时」，从而定时（将来某一时刻）触发此项任务。 「Note」只有vSphere的虚拟机才会有此操作选项。 停止 停止（即关机）（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 重新启动 重启（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 重启多个（开机状态的）虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 监控和代理 添加自动化代理 如果云主机未安装自动化代理，可通过该操作安装；输入具有SSH功能并具有管理员权限的用户名和密码/密钥对，输入完成后点击「执行」。若未输入端口，还需在云主机详情页，「云主机中配置的SSH端口」中输入端口号。 更新自动化代理 如果云主机已安装自动化代理，可通过该操作进行更新。 启用/切换监控 目前对vSphere云主机支持两种监控方式：内置代理监控以及云平台监控。内置代理监控包括预安装监控代理和WinRM/SSH监控代理（WinRM对于Windows操作系统的云主机，SHH对于Linux操作系统的云主机）；云平台监控是指直接从vCenter上读取虚机的监控数据而不需要安装监控代理。 对Openstack云平台只支持内置监控代理。 更新监控代理 如果云主机安装了内置代理监控，可通过该操作进行更新。 管理快照 创建快照 给虚拟机创建一个快照，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 恢复至快照 把虚拟机恢复到之前的某一个快照，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务 删除快照 删除已创建的快照 更改配置 调整配置 调整虚拟机或容器节点的配置（vCPU，内存），点击「提交」。 管理磁盘 添加新磁盘 给虚拟机添加一块新的磁盘，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」在挂起状态下不能执行该操作 扩展磁盘 给虚拟机扩展一块已有的磁盘，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」支持通过云管平台部署或在上一小节创建的磁盘进行扩展。在挂起状态下不能执行该操作 删除磁盘 删除虚拟机上除系统盘以外的磁盘，包括服务配置添加的磁盘或Day2新增的磁盘，均可删除。 添加新逻辑卷 给Linux虚拟机添加一个新的逻辑卷，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」在挂起状态下不能执行该操作 扩展逻辑卷 给Linux虚拟机扩展一个已有的逻辑卷，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」支持通过云管平台部署或在上一小节创建的逻辑卷进行扩展。在挂起状态下不能执行该操作 vMotion迁移（vSphere） 支持对vSphere 的计算资源迁移和存储迁移。利用vSphere的vMotion迁移功能，使用不同的迁移方式，将虚拟机在不同主机之间进行迁移。 计算资源迁移，选择目标主机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 存储迁移： 链接克隆：选择需要存储，将目标云主机迁移到所选的存储中去； 完全克隆：选择置备模式（与源格式相同、精简置备、厚置备延迟置零、后置备置零）；选择虚拟机存储策略（保留现有虚拟机存储策略、数据存储默认值，以及其他自定义存储策略）；存储（根据所选的存储策略判定存储的兼容性，并显示各存储的空间和占比） 启用定时：设置时间在将来某一时刻触发此项任务 「Note」只有vSphere的虚拟机才会有此操作选项。 远程终端 「Note」OpenStack虚拟机远程终端操作需要使用VNC Web Client, 您的浏览器需要支持HTML5 Canvas和HTML5 WebSockets。如果需要了解VNC Web Client所支持的全部浏览器，可以访问https://github.com/kanaka/noVNC/wiki/Browser-support WEB远程终端（vSphere） vSphere的Web console client，无需浏览器特别支持。 「Note」只有vSphere的虚拟机才会有此操作选项。 设置云主机标签 「Note」每个用户都可以为云主机设置标签，无需管理员配置操作许可。 可为云主机设置键值标签，从而为云主机分类和过滤。 云主机标签的使用方法如下： 添加标签 对新建的云主机添加标签： 在左侧导航栏选择「我的部署」-「云主机」，在云主机的列表界面，选择一个云主机 点击上方的「更多操作」，「设置标签」，出现键值标签的设置界面 填写键、值，点击「创建」「执行」，标签创建成功；也可选择已有的标签，点击「执行」。在云主机列表的右侧列项，可查看添加的云主机标签 对导入的云主机添加标签： 在左侧菜单选择「基础设施」，点击「资源池管理」，选择一个资源池，进入编辑资源池界面 进入「云主机」页面，点击「导入」 点击「标签」后的输入框，弹出键值标签创建页面，输入键值，创建新标签；也可选择已有标签 修改/删除标签： 在云主机列表界面，选择一个云主机；点击「设置标签」，出现该云主机的键标签，可直接删除并重新创建。 添加网卡 添加一个新网卡，针对该计算节点的所有实例生效，选择网络标签和IP分配方式，目前vSphere只支持DHCP，OpenStack和PowerVC支持DHCP和IP池两种IP分配方式。 删除网卡 删除Day2新增加的网卡，该操作会影响该节点的所有云主机。 挂载NFS 将一个NFS（网络文件系统）挂载到虚拟机，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务。 「Note」当配置NFS云平台和资源池后，此项操作才可用 执行脚本 在该虚拟机中执行一个脚本库的脚本，可以通过设置「启用定时」，定时（在将来某一时刻）触发此项任务，也可选择某个IP地址。 「Note」如果没有安装代理，执行脚本时必须输入虚机的用户名和密码 更新云主机显示名 点击「更新云主机显示名」，可以重新设置云主机的显示名。 重置操作系统主机名 点击「重置操作系统主机名」，可以重新设置操作系统主机名。 「Note」windows操作系统只有安装代理的情况下才能进行该项操作 提升Linux用户权限 可临时给某个Linux用户提升一段时间的Sudo权限（免密）。若该云主机已安装自动化代理，则只需输入用户名以及权限使用时间。若该云主机未安装自动化代理，将输入管理员用户名和密码（或选择密钥对）、以及选择IP地址（仅vSphere）。 重置密码 点击「重置密码」，可以重新设置虚拟机的新密码。 应用级别的生命周期操作 云主机详细界面里，有应用标签页，里面有属于该云主机的应用列表，选择一个应用，会出现该应用的生命周期操作，操作包括「启动」「停止」和「自定义」操作。 云资源 云资源菜单下统一纳管所有的云资源，展示其相关信息以及提供各云资源对应的Day2 操作。 点击左侧导航栏「我的部署」-「云资源」，将在左侧看到「存储资源」「容器服务」「网络资源」「PaaS资源」「软件资源」五个菜单。 存储资源 云硬盘 支持对OpenStack/Azure/阿里云/青云的云硬盘进行统一管理。 点击「存储资源」下的「云硬盘」，将看到云硬盘列表 在云硬盘的列表界面，可查看云硬盘的相关信息：名称、云平台类型、状态、业务组、服务部署、项目、所有者、大小（GB）、挂载状态、挂载到的云主机以及创建时间 点击名称，进入云硬盘详情页面。云硬盘详情页面包括「基本信息」「操作历史」 云硬盘详情的「基本信息」页面包括： 基本信息：名称、云平台类型、状态、业务组、服务部署、项目、所有者、大小挂载到的云主机、创建时间等 组织信息：服务部署名称、服务名称、业务组、租户、项目等 运维操作：卷分离：去除云硬盘和云主机的挂载关系。卷挂载：建立云硬盘和云主机的挂载关系。 调整大小：支持对硬盘调整大小（Azure/AWS） 云硬盘详情的「操作历史」页面：包括了该云硬盘进行过的操作历史记录 对象存储 支持对AWS、Azure、阿里云的对象存储进行统一管理，分别是S3、Blob、OSS。 点击「存储资源」下的「对象存储」，将看到对象存储列表 在对象存储的列表界面，可查看对象存储的相关信息：名称、云平台类型、状态、状态、业务组、服务部署、项目、所有者、创建时间 点击名称，进入对象存储详情页面。对象存储详情页面包括「基本信息」「操作历史」 对象存储详情的「基本信息」页面包括： 基本信息：名称、云平台类型、状态、所有者、公共访问级别、存储账户、资源组、创建时间等。 组织信息：服务部署名称、服务名称、业务组、租户、项目等 对象存储详情的「操作历史」页面：包括了该云硬盘进行过的操作历史记录 容器服务 支持在云资源中展示kubernetes 的各个组件信息，包括部署（Deployment）、容器（Container）、服务（Service）、路由（Ingress）、存储卷（PVC）、配置字典（ConfigMap）、保密字典（Secrets）等。 网络资源 支持OpenStack的防火墙（FireWall）、浮动IP（Floating IP）的独立部署和全生命周期管理。部署完成后，可在「云资源」-「网络资源」处查看基本信息和运行状况。还支持OpenStack的负载均衡器（LoadBalance）和负载均衡监听器（Listener）,以及VMware NSX的虚拟服务器（VirtualServer）。 负载均衡器 若部署中包含负载均衡器（LoadBalancer），则部署成功后可在「云资源」-「网络资源」-「负载均衡器」中查看详细信息。 在负载均衡器（LoadBalancer）列表界面，显示负载均衡器的名称、云平台类型、状态、业务组、服务部署、项目、所有者、IP地址、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」 运维操作（OpenStack）： 绑定浮动IP：选择某一浮动IP，将该负载均衡器和浮动IP 进行绑定，可启动定时在特定时间执行操作 解绑浮动IP：若该负载均衡器已绑定浮动IP，则可进行解绑操作，可启动定时在特定时间执行操作 负载均衡监听器 支持VMWare NSX / OpenStack / Azure的负载均衡监听器，VMWare NSX 负载均衡监听器为VirtualServer，OpenStack 负载均衡监听器为Listener，Azure 负载均衡监听器为LoadBalancerRule。负载均衡器可以监听多个端口上请求，每个端口通过负载均衡监听器指定。部署成功后可在「云资源」-「网络资源」-「负载均衡监听器」中查看详细信息。 在负载均衡器监听器（Listener）列表界面，显示负载均衡监听器的名称、状态、描述、业务组、项目、所有者、协议、云平台类型、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」界面，以及「添加成员」「删除成员」等Day2 运维操作 -- OpenStack 「添加成员」:添加成员（member），可添加内部成员和外部成员。选择要添加成员的云主机、指定IP地址、端口和权重。可启动定时在特定时间执行操作 「删除成员」：点击后选择需要删除的成员，可启动定时在特定时间执行操作 浮动IP 支持OpenStack的的浮动IP（FloatingIP），FloatingIP可单独部署，部署成功后可在左侧导航栏选择「云资源」-「网络资源」-「浮动IP」中查看详细信息。 在选择「云资源」-「网络资源」-「浮动IP」,可查看已部署成功的浮动IP的列表界面，该界面显示浮动IP的名称、云平台类型、状态、业务组、服务部署、项目、所有者、IP地址、网络、映射地址、创建时间等 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面，显示该浮动IP的的基本信息和组织信息 「操作历史」页面，显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 「关联端口」：若当前Floating IP未关联任何一个端口，则在详情页上方会显示「关联端口」操作，点击后在弹框中选择需要绑定的端口，下拉框中会列出当前业务组下，OpenStack云平台中所有未被关联的端口（Port）。选择后点击「提交」 「解除绑定」：若当前Floating IP已关联端口，则在详情页上方会显示「解除绑定」操作，点击后「提交」，也可启用定时在特定时间执行操作 防火墙 支持OpenStack防火墙即服务（Firewall as a service），Fwaas应用于OpenStack对象，如项目，路由器和路由器端口。OpenStack防火墙的核心概念是防火墙策略和防火墙规则。策略是有序的规则集合。可在左侧导航栏选择「云资源」-「网络资源」-「防火墙」查看已部署成功的防火墙。 选择「云资源」-「网络资源」-「防火墙」,可查看已部署成功的防火墙列表界面，该界面显示防火墙的名称、云平台类型、状态、业务组、服务部署、项目、所有者、策略、路由、激活状态、管理员状态、创建时间等 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面：显示该防火墙的的基本信息和组织信息 「操作历史」页面：显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 「更新防火墙」：点击后可在页面中选择已有的防火墙策略或新建防火墙策略。勾选「使用已有策略」，将列出当前业务组下，OpenStack云平台中所有可用的防火墙策略。若未勾选，则新建防火墙策略，需填写策略名称（必填），策略描述（选填），可选择是否属于已共享、已审计，还可定时，操作完成后点击「提交」 「更新防火墙策略」：该页面将列出当前所有可用的规则列表。支持使用已有规则和新建规则。若使用已有规则，在列表中勾选将使用的规则即可。若新建规则，将展现新建规则界面，具体操作步骤： 填写基本信息：名称、描述、协议（必填，TCP、UDP、ICMP和任何）、动作（必填，允许、拒绝）、源IP、源端口、目的IP、目的端口、选择是否是共享的、激活 可选择新增的规则的位置，指定当前规则在某条规则之前插入（规则前于），或指定规则在某条规则后插入（规则后于）。如果两者均被指定，前者优先级更高。 「Note」：一个防火墙策略可关联多个规则，但规则只能被一个策略所关联 「删除防火墙规则」：删除防火墙中已关联的规则，删除后将不可恢复。可同时选择多个规则删除，也可启动定时在特定时间执行操作 安全组 支持展示OpenStack、AWS、Azure、阿里云的安全组。若安全组组件部署后，将在「云资源」-「网络资源」-「安全组」中查看部署的安全组组件。 在「安全组」列表界面，显示安全组名称、云平台类型、状态、所属业务组、服务部署、所属项目、所有者、创建时间等 点击名称进入详情页面，包括「基本信息」「操作历史」界面 「基本信息」页面，显示该安全组的的基本信息、组织信息和入站/出站安全组规则。 「操作历史」页面，显示操作历史记录，点击后将在操作历史列表下方显示操作详情 域名系统DNS 支持OpenStack域名系统DNS，若DNS组件部署后，将在「云资源」-「网络资源」-「域名系统DNS」中查看部署的DNS组件。 在「域名系统DNS」列表界面，显示DNS名称、状态、业务组、项目、所有者、DNS类型、DNS域、DNS服务器、DNS参数等 点击名称进入详情页面，包括「基本信息」「操作历史」界面 运维操作 「更新DNS」：更新DNS参数，DNS类型不可更改 PaaS资源 支持AWS、Azure、阿里云的关系型数据库（RDS）的独立部署和全生命周期管理，支持关系型数据库即服务（RDS as a Service）。部署完成后，可在「云资源」-「PaaS资源」处查看基本信息和运行状况。 软件资源 支持对软件资源的统一展示和管理。 软件 选择「云资源」-「软件资源」-「软件」,可查看已部署成功的软件列表，该界面显示软件名称、云平台类型、状态、业务组、服务部署、项目、所有者、版本、系统类型、创建时间等。可通过高级搜索对业务组、状态、项目或所有者进行筛选，也可使用普通搜索进行快速定位 点击名称，进入详情页面，包括「基本信息」「操作历史」 「基本信息」页面：显示该软件的基本信息、组织信息、参数 「操作历史」页面：显示操作历史记录，点击后将在操作历史列表下方显示操作详情 运维操作： 运维操作根据「服务建模」-「软件组件」中对个软件的操作定义显示对应的运维操作，例如：启动、停止、删除、创建、配置等 资源状态图 资源状态图能够显示云主机、容器的健康状态，根据性能指标的状态显示不同的颜色。若该云主机或容器未配置监控，默认显示灰色。 支持用户将鼠标移至该云主机上，将显示该云主机名称 支持用户点击服务部署名称后显示详情： 基本信息：IP地址、操作系统、vCPU数量、内存、磁盘总空间 组织信息：业务组、项目、所有者 性能监控指标：内存使用率、CPU使用率、磁盘使用率 「Note」若未安装监控，将不显示性能监控指标 支持用户根据需求对展示内容进行筛选，如全部或已安装监控或未安装监控、按云平台筛选、业务组筛选、项目筛选、标签筛选等。 监控告警 监控告警为用户提供了云主机和应用的告警配置自服务。 在左边导航选择「监控告警」，监控告警下有3个二级菜单，依次是「告警策略」「告警」「已触发警报」。 告警策略 用来定义所选的对象类型（如云主机/应用/容器等）触发警报的条件。点击左侧导航「监控告警」下的二级菜单「告警策略」，显示告警策略列表，列表中包括告警策略名称、类别、类型、创建时间以及创建者等。可对告警策略进行添加、编辑、删除等操作。 添加告警策略 在左侧导航选择「告警策略」，进入告警策略列表界面，点击「添加」，进入添加告警策略界面 在添加告警策略界面，定义告警策略的基本信息。依次输入告警策略的名字，选择告警类别和告警类型。告警类别支持对云主机、应用和容器的告警。告警类型支持对云主机的宕机告警、阈值告警和预测告警，支持对应用的阈值告警和预测告警，对容器的阈值和预测告警 根据选择的不同告警类型定义告警策略的触发条件 宕机告警：输入时间（分钟），云主机在规定时间内失去响应后，将触发宕机警报 阈值告警：选择云主机/容器的xx指标（如内存使用（百分比）、CPU使用率（百分比）、POD内存使用等）的取最大值/最小值/平均值，在过去xx时间（分钟/小时），若该值小于/小于等于/大于/大于等于xx值后，将触发警报 预测告警：基于过去xx时间（分钟/小时/天）内的xx指标的值（如内存使用（百分比）、CPU使用率（百分比）等），预测未来xx时间（分钟/小时/天）内，若该指标的值小于/小于等于/大于/大于等于xx值后，将触发警报 点击「保存」，提示告警策略添加成功，返回告警策略列表界面 编辑告警策略 点击「告警策略」，选择一行已添加的告警策略，工具栏「编辑」按钮变成可用，点击「编辑」按钮，或者直接点击告警策略名称，进入告警策略编辑界面。 删除告警策略 点击「告警策略」，选择一行已添加的告警策略，工具栏「删除」按钮变成可用，点击「删除」按钮，确认删除提示后，提示告警策略删除成功。 告警 支持用户定义所选告警策略应用到的范围以及触发的通知和操作。 点击左侧导航「监控告警」下的二级菜单「告警」，显示告警列表，包括告警名称、警报级别、告警策略名称、范围、对象、状态、创建时间、创建者等。可对告警进行添加、编辑、启用、禁用、删除等操作。 添加告警 在左侧导航选择「告警」，点击「添加」，进入添加告警界面 定义告警的基本信息。输入告警的名字，选择告警策略、告警范围、告警对象以及警报级别，触发xx次后，自动升级为更高级别。告警范围支持对租户、业务组、项目、服务部署和云主机的告警；告警对象依据所选的告警范围；告警级别为警告和危险 定义触发告警后，通知到的用户、角色或邮件 可定义警报触发后的行为，触发行为后，可设置最多xx次操作后停止自动执行 支持云主机的扩展操作：横向收缩一个节点、横向扩展一个节点、关机、重新启动、扩展5G逻辑卷、增加1G内存（vSphere）、增加1个vCPU（vSphere） 支持对容器的扩展操作：减少3个副本数、增加2个副本数 点击「保存」，返回告警列表界面 已触发警报 点击左侧导航「监控告警」下的二级菜单「已触发警报」，显示已触发警报列表，包括警报级别、告警名称、触发告警对象、告警类型、第一次触发时间、最后一次触发时间、已触发次数以及告警状态。告警状态分为已触发、已暂停、已解除。还可对列表中的触发警报进行恢复、暂停、解除操作。 选择「已触发警报」，任意选择一条「已触发」的警报，工具栏中的「暂停」和「解除」将变为可用，点击「暂停」，将会有提示，确认后，提示操作成功 点击列表中的告警名称，可查看该警报的详细信息以及历史数据。该页显示了告警触发的对象、警报的级别，触发的条件、业务组、所有者、IP地址、警报图表（可调控时间范围灵活查看各个时间段的警报数据）、以及该告警的后续操作历史 告警触发的对象可链接，如服务部署链接至服务部署监控页面、云主机链接至云主机监控页面、应用链接至服务部署监控页面 资源分析 报表 您可以在「资源分析」-「报表」中，查看相关的计费报表以及云主机总体情况报表或其他自定义报表。在「系统管理」-「报表配置」中，可针对不同用户角色，选择启用或禁用某一报表。支持对报表的多个维度的筛选条件以及表头的展示列选择，可导出Excel。 「Note」报表的自定义配置请咨询骞云工程师 回收站 所有的服务手工卸除或者到期后自动卸除后，将放置到回收站中进行保留，支持用户需要时可进行恢复。具体操作步骤请参考：回收站 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-25 09:26:35 "},"UserDoc/05集成与发布使用指南/":{"url":"UserDoc/05集成与发布使用指南/","title":"集成与发布使用指南","keywords":"","body":"持续发布与部署 SmartCMP的应用持续发布和部署，通过软件组件、蓝图和在全新引进的流水线来构建： 定义应用软件：接入主流的制品仓库对软件组件进行存放管理和版本控制，软件组件关联制品仓库并自定义应用的部署方式和相关参数。 定义应用服务：通过蓝图建模，编排应用架构；通过服务配置，指定资源参数和相关应用的版本。 定义流水线：配置流水线的阶段和多种类型的任务，实现应用的测试、部署、更新、运维、回收的的全生命周期管理。 SmartCMP支持对持续集成与发布功能进行权限管理，管理员在配置流水线时，会为流水线绑定一个项目，并添加全局参数，在后期任务中进行调用。 该项目下的项目组成员，拥有添加、编辑、删除、执行、禁用、锁定自动化流水线、查看流水线执行历史的权限。 流水线 SmartCMP的流水线，能够帮助用户建设自动化的、可重复利用、安全合规的应用持续交付和部署。流水线由一系列阶段构成，每个阶段由软件在发布到生产之前必须完成的多个任务和环境组成。目前支持多种阶段和任务的自定义和组装，能够在阶段中添加任意数量的执行任务，通过它们已经可以设计出各种场景适用的开发、部署、运维流水线。 新增流水线，绑定一个项目，并可添加全局参数，在后期任务中进行调用。 具体步骤： 在左侧导航栏点击「集成与发布」-「流水线」，点击创建，在基本信息页面输入名称、描述、项目、通知到用户 设置自定义属性，点击添加按钮，输入名称、值、描述，点击创建即可 当您创建流水线完成之后， 在左侧导航栏点击「集成与发布」-「流水线」，可二次编辑、删除、执行、禁用、锁定流水线。 配置触发器 自定义流水线的触发条件，触发器定义何时自动运行流水线，可以手动触发流水线任务，也可以设定策略由触发器自动触发流水线任务。SmartCMP触发器类型包括：Webhook集成(支持Git，Gitlab等代码仓库改变触发)、Jenkins触发、定时触发、手工触发等等。 具体步骤： 在左侧导航栏点击「集成与发布」-「流水线」，点击创建，在触发器页面点击创建， 输入触发器名称、类型、描述 点击创建即可配置完成触发器 配置阶段和任务 可根据业务的需要，定义不同的阶段，在每个阶段中定义需要完成的任务。 例如，可定义软件打包、部署测试环境等不同的阶段。每个阶段的任务类型包括：Jenkins Job 任务、部署新应用任务、云资源变更任务、脚本执行任务等等。流水线的发布者可以定义每个任务的参数，在后续的任务中进行调用。 任务指具体执行的活动。支持自定义任务类型、输入输出参数，其中输入输出参数指SmartCMP支持流水线各个任务之间的参数传递，例如将上一个任务新部署虚拟机的IP地址传给下一个任务进行调用。 例如，通过一个蓝图部署任务，即可以自动化触发一个已发布的云资源服务，进行云资源的部署；而云资源任务则可以自动化进行云资源变更、运维操作，进行应用软件的升级、更新。 设计流水的阶段和任务的具体步骤： 在左侧导航栏点击「集成与发布」-「流水线」，点击创建，在流程页面点击添加按钮，输入阶段名称，点击添加 点击添加串行任务，在任务的详情页填写：任务类型、名称、描述、通知到用户，填写输入参数，自定义输出参数（任务类型不同，输入输出参数相应变化） 选择等待任务，在输入参数处填写等待时间（s） 选择蓝图部署任务，在输入参数处填写服务（服务目录中发布的服务）和模板 Jenkins任务，在输入参数处填写仓库入口，任务类型，选择是否等待结果，如果不稳定时，标记为成功继续继续还是标记为失败，结束执行 选择云资源任务，在输入参数处选择已有云资源，云资源类型、操作（云资源的day2运维操作包括挂载，调整磁盘配置等等） 执行设置内填写超时时间、执行选项（选择失败后继续执行或失败后结束流程）、执行方式（选择默认执行或条件执行） 查看流水线的执行历史 通过执行历史可以查看执行状态、执行人、执行时间、每个阶段任务执行的详细信息。 在左侧导航栏点击「集成与发布」-「执行历史」，可根据筛选条件（项目、状态、起止时间）快速定位流水线。 点击流水线，可查看流水执行状态（进行中、成功、失败）、执行人信息、开始时间、结束时间、耗时、流水线完整的可视化的流程图。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-27 18:23:22 "},"UserDoc/04手工工单服务使用指南/":{"url":"UserDoc/04手工工单服务使用指南/","title":"工单服务使用指南","keywords":"","body":"工单服务场景 工单申请是用户提交手工工单服务请求的方法，工单服务申请提供对非标准化资源申请（例如：卸除某项服务部署的服务请求）和需要IT人工介入的服务申请（例如：用户登陆密码重置的服务请求）。 具体的工单服务功能描述： 工单申请：支持用户在服务目录进行工单服务的申请。 工单跟踪：用户在服务目录申请工单完成后，支持用户进入我的请求去查看服务详情。 如果您想要了解服务、服务分组等相关概念，请您参考：基础概念-服务模型章节下文会向您介绍服务申请和跟踪的详细步骤。 工单的申请 用户可在服务目录申请已配置好的手工工单服务或共享服务。 在左侧导航栏点击「服务目录」，选择手工工单服务，例如：申请新项目的手工工单服务，点击进入服务申请页面 服务申请页面填写该服务的详细信息：标题、工单描述、优先级、紧急程度、申请者、邮箱、手机号。 当管理员为表单配置了额外的字段信息时，用户可在详细信息页面填写需要的字段。例如：申请一个新项目，管理员为表单配置字段（项目、描述、项目成员），用户在申请新项目时，填写相关信息。 点击申请，工单服务申请成功。 工单的跟踪 用户在服务目录发起工单请求后，根据管理员预先配置的流程，系统根据服务团队与工单的关系，派发工单给相应的服务团队。服务团队中的指定用户或角色收到工单请求之后，可以进行转派，也可以进行线下处理，完成之后更新工单状态。 系统会通过邮件通知用户 用户可对此次服务请求进行关闭操作，工单状态变更为已处理，服务请求完成；支持用户申请重新处理工单，工单将返回给服务团队进行重新处理，工单状态变更为处理中。 服务请求分为两种类型：云资源蓝图服务请求和手工工单服务请求。跟踪手工工单服务进程，查看手工工单服务的详细信息和上文查看云资源蓝图服务请求详细信息方法类似，如您想了解更多关于服务处理次昂管信息请您参考：我的请求 待处理 用户在服务目录申请工单服务完成之后，可到服务请求中查看工单处理状态、处理人、处理信息、处理方式、和处理结果等详细信息。 此处显示用户发起的服务请求中待处理的部分。 点击左侧菜单栏的「服务请求」-「待处理」，可查看该用户的所有待处理的申请列表。该页面显示请求编号、请求类型、服务名称、标题、申请者、业务组、项目、申请状态（处理中）、申请时间以及完成时间。可点击「请求编号」可查看申请的详细信息。 「Note」当用户与服务团队存在关联关系，手工工单指派给该用户，用户有权进行工单处理，用户进入待处理页面即可查看待处理的工单信息。 已处理 此处显示用户发起的服务请求中已经处理完成的部分。 点击左侧菜单栏的「服务请求」-「已处理」，可查看该用户的所有已处理带审批的申请列表。该页面显示请求编号、请求类型、服务名称、标题、申请者、业务组、项目、申请状态（已完成）、申请时间以及完成时间。可点击「请求编号」可查看申请的详细信息。 「Note」当用户与服务团队存在关联关系，手工工单被指派给该用户，用户有权进行工单处理。工单处理完成之后更新工单状态，工单状态更新为为已完成状态。 Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-25 09:26:35 "},"PDF/":{"url":"PDF/","title":"PDF","keywords":"","body":" 5.1.0基础概念PDF 5.1.0管理员手册PDF 5.1.0用户手册PDF 5.2.0基础概念PDF 5.2.0管理员手册PDF 5.2.0用户手册PDF Copyright © 2013-2019 CloudChef. All Rights Reserved. 上海骞云信息科技有限公司版权所有            更新时间： 2019-09-30 11:36:23 "}}